(window.webpackJsonp=window.webpackJsonp||[]).push([[562,58],{"/9iQ":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-documents",use:"icon-small-documents-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-documents"><path d="M1 4h7.0084L11 7v8H1V4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8.0005 4v3h3.0015M4 8h1M4 11h3.9722" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 1h11v12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"/R3n":function(e,t){e.exports='<div class="content-item-course-outline">\n  <div class="name">\n    <ng-switch on="content.getContentDisplay().linkAction()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n      <div ng-switch-when="resource/x-bb-folder">\n        <bb-content-item-folder></bb-content-item-folder>\n      </div>\n      <div ng-switch-when="contenturl">\n        \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n        <a bb-prevent-click-if="content.isConditionalReleaseLocked()"\n            ng-click="contentItemBase.onExternalLinkClick()"\n            ng-href="{{content.getContentDisplay().contentUrl()}}" target="_blank" rel="noopener noreferrer" class="content-title"\n            ng-class="{\'name-middle\': contentItemCourseOutline.shouldAlignMiddle()}"\n            aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n            analytics-id="content.item.course.outline.courseContent.link"\n            analytics-context="{{::content.getContentDisplay().contentUrl()}}"\n            aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n            tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n          <span>{{ content.title }}</span>\n        </a>\n      </div>\n      <div ng-switch-when="fileurl">\n        \x3c!-- Open the file preview panel for content that can be previewed --\x3e\n        <a bb-prevent-click-if="content.isConditionalReleaseLocked()"\n            ng-click="contentItemBase.onExternalLinkClick()"\n            bb-peek-sref="preview-file({id: content.id})"\n            ng-class="{\'name-middle\': contentItemCourseOutline.shouldAlignMiddle()}"\n            class="content-title"\n            aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n            analytics-id="content.item.course.outline.courseContent.link"\n            analytics-context="{{::content.getContentDisplay().contentUrl()}}"\n            aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n            tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n          <span>{{ content.title }}</span>\n        </a>\n      </div>\n      <div ng-switch-when="ltilaunch">\n        <bb-content-item-ltilaunch></bb-content-item-ltilaunch>\n      </div>\n      <div ng-switch-when="scormlaunch">\n        <bb-content-item-scormlaunch></bb-content-item-scormlaunch>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-agn-link">\n        \x3c!-- open  edit page when an instructor(=entitledToDesignAssessment) is accessing an assignment in a complete course. page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           bb-peek-sref="gradebook-item.assignment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\' })"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment"\n           bb-peek-sref="assignment.view({assignmentId:content.id})" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           class="content-title"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.readOnly.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-assignment">\n        <a bb-peek-sref="assignment.view({assignmentId:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.assignment.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-document">\n        <a bb-peek-sref="content-manage.edit.document({id:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.document.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-page">\n        <bb-content-item-page></bb-content-item-page>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-test-link">\n        \x3c!-- open edit page when an instructor(=entitledToDesignAssessment) is accessing content. In a complete course, page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment" class="content-title"\n           bb-peek-sref="gradebook-item.assessment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\',\n                                 assessmentType: \'test\'})"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment" href="javascript:void(0);"\n           ng-click="contentItemBase.openAssessmentItem()" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.readOnly.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <a ng-switch-when="resource/x-bb-forumlink" bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n         bb-prevent-click-if="content.isConditionalReleaseLocked()"\n         class="content-title" aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n         analytics-id="content.item.courses.outline.gradebook.item.forum.link"\n         aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n         tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      <div ng-switch-when="resource/x-bb-courselink">\n        <bb-web-link-item content="content" target-content="contentItemBase.targetContent" prefix="\'course.outline\'"/>\n      </div>\n      <div ng-switch-when="resource/x-bb-journallink">\n        <a bb-peek-sref="journal.view.with-participation({contentId:content.id})"\n          bb-prevent-click-if="content.isConditionalReleaseLocked()"\n          class="content-title" aria-describedby="activity-indicator-{{::content.id}}"\n          analytics-id="content.item.courses.outline.journal.link"\n          aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n          tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-default class="content-title">{{ content.title }}</div>\n      <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator"></bb-svg-icon>\n    </ng-switch>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span ng-bind-html="content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: \'m\': this "></span>\n    </span>\n    <span class="content-item-course-outline__proctored-tag" ng-if="contentItemCourseOutline.displayProctoredTag()">\n      <span class="vertical-bar"></span>\n      <bb-ui-icon-small-proctor-shield\n        class="content-item-course-outline__proctored-icon"\n        class-name="content-item-course-outline__proctored-icon-svg"\n      >\n      </bb-ui-icon-small-proctor-shield>\n      <span bb-translate>components.services.proctoring.outline.proctored</span>\n    </span>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true" class="content-no-due-date-label" ng-if="!dueDate">components.directives.content-item-base.no-due-date</span>\n    <span bb-translate ng-switch-when="true"\n          class="content-due-date-label" ng-if="dueDate">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date" ng-if="dueDate"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span ng-bind-html="content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: \'m\': this "></span>\n    </span>\n    <span class="content-item-course-outline__proctored-tag" ng-if="contentItemCourseOutline.displayProctoredTag()">\n      <span class="vertical-bar"></span>\n      <bb-ui-icon-small-proctor-shield\n        class="content-item-course-outline__proctored-icon"\n        class-name="content-item-course-outline__proctored-icon-svg"\n      >\n      </bb-ui-icon-small-proctor-shield>\n      <span bb-translate>components.services.proctoring.outline.proctored</span>\n    </span>\n  </div>\n  <bb-content-item-peer-assessment ng-if="content.id" content="content"></bb-content-item-peer-assessment>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="guidance-wrapper">\n      <div class="group-name">\n        <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n        <span class="group-target-guided" bb-guidance-target component-key="contentGroupInfo"\n              ng-if="!contentItemBase.contextCourse.course.isComplete()">\n        </span>\n        <a ng-if="contentItemBase.hasViewGroupsAsAdmin"\n           class="js-groups-link"\n           href="javascript:void(0);"\n           ng-click="contentItemBase.editGroups()"\n           analytics-id="content.item.course.outline.contentItemBase.editGroups.link">\n          <bb-group-count content="content"></bb-group-count>\n        </a>\n        <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="js-groups-link">\n          <bb-group-count content="content"></bb-group-count>\n        </span>\n        <div ng-if="!(contentItemBase.canViewGroups || contentItemBase.hasViewGroupsAsAdmin)" class="student-group-enrollment">\n          <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n        </div>\n        \x3c!-- For complete course, will not show this guidance: LRN-107718 --\x3e\n        <span>\n          <bb-guidance ng-if="!contentItemBase.contextCourse.course.isComplete() && !contentItemBase.entitledToDesignAssessment" component-key="contentGroupInfo"\n                       class="guidance-element-group guidance-is-empty-student guidance-element-overlay push-left">\n            <span bb-translate="{{::contentItemCourseOutline.groupAssessmentFtueKey}}" translate-values="{title: contentItemCourseOutline.customCategory}"></span>\n          </bb-guidance>\n        </span>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n    tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"\n    class="lock-info"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="false"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    open-panel-on-restricted="true"\n                                    enable-conditional-release="content.canAccessAdaptiveRelease()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control"\n       ng-class="{\'conditional-release-control-for-complete-course\': contentItemCourseOutline.isCourseCompletedAndInInstructorView()}">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemCourseOutline.canOpenConditionalRelease && contentItemCourseOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-disable-on-mouse-over="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-open-on-activation="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.link">\n        <span>{{contentItemBase.conditionalRelease.getConditionDescription()}}</span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},"/hmo":function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-blti-link" \n     bb-component-sref="{{prefix}}.engagement.edit({contentId:\'{{targetContent.id}}\'})"\n     class="content-title"\n     analytics-id="course.content.lti.link"><span>{{ content.title }}</span></a>\n</ng-switch>\n'},"/z4E":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("Llzl"),s=n("Oyr+"),o=n("0JpG"),a=n("Vsv2"),r=n("zXZW"),c=n("pjml"),l=n("12mu"),d=n("lEL+"),u=n("DMV0"),p=n("ol3u");const h="ultra.directives.bbCloudStorageIntegration";class m{constructor(e,t,n,i,s,o,a,r){this.scope=e,this.$q=t,this.$exceptionHandler=n,this.bbLocalize=i,this.$modal=s,this.CloudDriveModel=o,this.CloudDriveTaskModel=a,this.timeout=r,this.bbLocalize.loadBundle("components/directives/cloudStorageIntegration")}getFileId(e){return e.account+"|"+e.id}onFileSelect(e){this.scope.$emit(s.d,e,this.scope.primaryKey&&this.scope.primaryKey()),this.scope.onFilesSelected&&this.scope.onFilesSelected(e)}getDownloadFileInfo(e){const t=this.getFileId(e);return this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(t).$fetch({accessToken:this.accessToken}).$asPromise()}downloadFiles(e,t,n,i){const o={accessToken:this.accessToken,expand:"mimeType,isMedia"};this.scope.fileLocation&&(o.fileLocation=this.scope.fileLocation),this.scope.webLocation&&(o.webLocation=this.scope.webLocation),(n?this.CloudDriveTaskModel.$new(i||e.id):this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(i||e.id).download).$fetch(o).$then(n=>{if("COMPLETE"===n.status){const i=this.scope.$on(s.e,(o,a,r)=>{r!==s.c.UploadProgressComplete||e.ui.fileId&&a!==e.ui.fileId||(this.attachHandler(n,e,t),i())})}else this.timeout(()=>{this.downloadFiles(e,t,!0,n.taskId)},this.scope,2e3);(n.completePercentage<100||"COMPLETE"===n.status)&&this.scope.$root.$broadcast(s.e,e.ui.index,n.completePercentage,null,s.c.UpdateProgress,e.inProgressFileId,e.ui.targetDiv,e.ui.fileId)},t=>{this.displayUploadError(),this.scope.$root.$broadcast(s.e,e.ui.fileId,e,s.c.Error,e.ui.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.$exceptionHandler(t,"source")})}attachHandler(e,t,n){const i=this.$q.defer(),s={fileName:null,fileLocation:null};return e&&(s.fileName=e.fileName,s.fileLocation=e.fileLocation,s.webLocation=e.webLocation,s.mimeType=e.mimeType,s.isMedia=e.isMedia),this.scope.attachHandler(s,t,this.scope.isUploadMultipleFiles,void 0,n).then(e=>{i.resolve(e)},e=>{i.reject(e)}),i.promise}displayUploadError(){this.$modal.open({template:u,scope:this.scope})}}m.$inject=["scope","$q","$exceptionHandler",o.serviceName,l.b,c.h.serviceName,c.i.serviceName,d.b];class b{constructor(e,t,n,s,o){this.$injector=e,this.$q=t,this.$modal=n,this.CloudDriveService=s,this.bbLocalize=o,this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?",onFilesSelected:"=?",onCancelFocus:"=?"},this.restrict="A",this.link=(e,t,n)=>{const s=this;e.cloudStorageIntegration=this.$injector.instantiate(m,{scope:e}),e.folderBranchCounts=0,e.isInitialized=!!s.CloudDriveService.cloudDriveStorage,e.isInitialized||s.CloudDriveService.initializeCloudDrive();const o=function(t){const n=[];if(t&&t.length>0){for(let i=0;i<t.length;i++)n.push(e.cloudStorageIntegration.getDownloadFileInfo(t[i]));s.$q.all(n).then(t=>{s.CloudDriveService.isGettingFilesInfo=!1,e.cloudStorageIntegration.onFileSelect(t),t.length>1&&(e.isUploadMultipleFiles=!0)},()=>{s.CloudDriveService.isGettingFilesInfo=!1})}};t.on("click",()=>{if((!e.disableClick||!e.disableClick())&&e.isInitialized){const n=this.bbLocalize.getLocale(e);s.CloudDriveService.cloudDriveStorage.openFilePicker(n,e.allowMultiple).then(n=>{if((n||[]).length>0){if(!n[0]||!n[0].bearer_token||!n[0].bearer_token.key)return void this.$modal.open({template:p,scope:e});e.cloudStorageIntegration.accessToken=n[0].bearer_token.key,s.CloudDriveService.isGettingFilesInfo=!0,i.isDefined(e.allowMultiple)&&!1===e.allowMultiple&&n.length>1?o([n[0]]):o(n)}else e.onCancelFocus?e.onCancelFocus():t.focus()}),e.$on("$destroy",()=>{s.CloudDriveService.isGettingFilesInfo=!1,t.off("click")})}}),e.$on("downloadFile",(t,n,i)=>{n.ui.primaryKey===(e.primaryKey&&e.primaryKey())&&n.file.$url().indexOf("CloudStorageIntegration")>=0&&e.cloudStorageIntegration.downloadFiles(n,i)})}}}b.$inject=["$injector","$q","$modal",a.b,o.serviceName],i.module(h,[o.moduleName,a.a,r.a,l.a,d.a]).directive("bbCloudStorageIntegration",["$injector",e=>e.instantiate(b)])},"0/Nk":function(e,t){e.exports='<div class="group-student-self-enroll-directive" bb-load-bundle="components/directives/group/group-student-enrollment">\n  <div ng-if="$ctrl.content.assignedGroups.length > 0">\n    <span ng-if="!$ctrl.isOpenEnrollment()" class="ellipse title">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </span>\n    <a ng-if="$ctrl.isSelfEnrollment && $ctrl.isOpenEnrollment()" class="self-enroll-link js-self-enroll-link"\n       href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()"\n       analytics-id="components.directives.group-student-enrollment.groupTitle.link">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </a>\n  </div>\n  <span ng-if="!($ctrl.content.assignedGroups.length > 0) && !$ctrl.isSelfEnrollment" class="ellipse title" bb-translate\n        translate-values="{title: components.directives.group-student-enrollment.unknown}">\n    components.directives.group-student-enrollment.unknown\n  </span>\n  <div ng-if="!($ctrl.content.assignedGroups.length > 0) && $ctrl.isSelfEnrollment">\n    <div ng-if="$ctrl.isOpenEnrollment()">\n      <a href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" class="self-enroll-link js-self-enroll-link"\n         bb-translate analytics-id="components.directives.group-student-enrollment.self-enroll-to-participate">components.directives.group-student-enrollment.self-enroll-to-participate</a>\n    </div>\n    <div ng-if="$ctrl.isBeforeEnrollment()" class="self-enroll-date" translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-starts</div>\n    <div ng-if="$ctrl.isOpenEnrollmentWithEnding()" class="self-enroll-date"\n         ng-class="{\'is-important\': $ctrl.selfEnrollGroupInfo.isEnrollmentDateImportant}"\n         translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closes</div>\n    <div ng-if="$ctrl.isAfterEnrollment()" class="self-enroll-date"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closed</div>\n  </div>\n</div>\n'},"07HN":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    class="button-add-content"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.grades.button"\n  >\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>'},"0lMW":function(e,t,n){},"0rzL":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),s=(n("eWdw"),n("Llzl")),o=n("nbDY"),a=n.n(o),r=n("ckcj"),c=n("dJ97"),l=n("aHpC"),d=n("Bu0u"),u=n("UODz"),p=n("zGdY");const h="ultra.components.directives.submissionCard";class m extends a.a{}m.ATTEMPT=new m("ATTEMPT"),m.GRADE=new m("GRADE"),m.INFO=new m("INFO");let b=class{constructor(e){if(this.scope=e,!e.gradingColumn&&!e.gradeDetail)throw new d.a({message:"gradingColumn or gradeDetail must be provided."});if(this.scope.gradeDetail&&!this.scope.gradeDetail.column)throw new d.a({message:"gradeDetail.column must be provided to display attempt mode."});let t,n;switch(this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)&&(this.attempt=this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt,this.currentGradeStatus=this.scope.gradeDetail.ui.attempt.status),(!e.gradeDetail||e.gradeDetail&&!this.attempt)&&e.gradingColumn?this.scope.mode=m.INFO:e.gradeDetail&&this.attempt&&(this.scope.mode=m.ATTEMPT,this.scope.gradingColumn=this.scope.gradeDetail.column),this.showLate=!e.showLate||e.showLate(),e.mode){case m.INFO:n=e.gradingColumn.dueDate?"DUE":"NO_DUE_DATE",t=this.showLate?"UNOPENED_LATE":"UNOPENED";break;case m.ATTEMPT:n=this.attempt.status.toString(),e.hasAttempt=!0,t=p.AttemptStatus.InProgress===this.attempt.status&&this.showLate?"SUBMISSION_LATE":"SUBMISSION";break;case m.GRADE:}e.status="components.directives.submission-card.attemptStatus."+n,e.title="components.directives.submission-card.title."+t}shouldExpandForRubricIcon(){return(this.scope.showRubricButton&&this.scope.showRubricButton()||this.scope.showRubricDiv&&this.scope.showRubricDiv())&&this.scope.gradingColumn.hasRubricAssociation&&this.scope.gradingColumn.hasRubricAssociation()}get showLateIcon(){return this.showLate&&(!this.scope.gradeDetail||!this.attempt||this.attempt.isInProgress())}};b=Object(i.__decorate)([Object(i.__param)(0,Object(l.b)("scope"))],b);let g=class{constructor(e){this.$injector=e,this.restrict="AE",this.template=u,this.scope={gradeDetail:"=?",gradingColumn:"=?",inline:"@?",clickable:"=?",showLate:"&?",showRubricButton:"&?",showRubricDiv:"&?"},this.link=e=>{e.submissionCard=this.$injector.instantiate(b,{scope:e})}}};g=Object(i.__decorate)([Object(i.__param)(0,Object(l.b)("$injector"))],g),s.module(h,[r.a,c.a]).directive("bbSubmissionCard",["$injector",e=>e.instantiate(g)])},"1/hr":function(e,t,n){},"1Niw":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    class="button-add-content js-show-add-options"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.editor.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="::addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>\n\x3c!--\n  The elements are kept around to trigger download actions.\n  The \'ng-hide\' class is added to prevent the buttons from interfering with AX (tab order, screen readers)\n--\x3e\n<ul class="element-list-add-menu angular-animate ng-hide">\n  <li>\n    <button type="button"\n            class="js-add-text-block"\n            ng-click="addContentButton.addTextBlock()"\n            analytics-id="components.directives.add-content-button.editor.addText.button">\n      <div>\n        <i class="icon-doc-pencil-2"></i>\n        <span bb-translate>components.directives.add-content-button.addContent</span>\n      </div>\n    </button>\n  </li>\n  <li ng-if="addContentButton.canEditUnsafeHtml">\n    <button type="button"\n            ng-click="addContentButton.addHtmlBlock()"\n            analytics-id="components.directives.add-content-button.editor.addHtml.button">\n      <div>\n        <bb-svg-icon size="small" icon="code"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.addHtml</span>\n      </div>\n    </button>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      click-enabled="true"\n      disable-drag="false"\n      class="js-file-upload"\n      web-location="{{webLocation}}"\n      file-location="{{fileLocation}}"\n      target-div="{{\'#\' + fileListViewId}}"\n      disallow-folder-uploads="true"\n      is-third-party-upload="false"\n      ignored-states="::ignoredStates()">\n        <button\n          type="button"\n          class="file-upload-button"\n          ng-click="addContentButton.assignPosition()"\n          aria-label="{{addContentButton.uploadAriaLabel}}"\n          analytics-id="components.directives.add-content-button.editor.fileUpload.button">\n          <div ng-if="!addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromComputer</span>\n          </div>\n          <div ng-if="addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromDevice</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="false"\n      monitor-leave="true"\n      target-div="{{\'#\' + fileListViewId}}"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      disable-drag="true"\n      is-third-party-upload="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      ignored-states="::ignoredStates()">\n      <button\n        type="button"\n        class="js-upload-from-cloud-storage-integration"\n        ng-click="addContentButton.assignPosition()"\n        bb-cloud-storage-integration\n        primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n        attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="false"\n        on-cancel-focus="!initialUpload ? addContentButton.focusAddButton : null"\n        analytics-id="components.directives.add-content-button.editor.uploadFromCloudStorage.button">\n          <div>\n            <i class="icon-cloud"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromCloudStorage</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n</ul>\n'},"2E9T":function(e,t){e.exports='<bb-svg-icon size="small" icon="add" class="js-add-plus add-circle-default"></bb-svg-icon>\n<bb-svg-icon size="small" icon="add" status="active" class="js-add-plus add-circle-active"></bb-svg-icon>'},"2a+M":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var i=n("nsO7"),s=n("Llzl"),o=n("nbDY"),a=n.n(o),r=n("0JpG");const c="ultra.services.dragDrop",l="dragDropService";class d extends a.a{}d.TOP=new d("TOP"),d.BOTTOM=new d("BOTTOM"),d.FOLDER=new d("FOLDER"),d.SELF=new d("SELF");class u{constructor(e,t){this.$timeout=e,this.bbLocalize=t,this.dragHoverClass="dz-drag-hover",this.dragElementSelector=".drag-element",this.onFolderClass="on-folder",this.onNestedFolderClass="on-nested-folder",this.originalElementClass="drag-element-original",this.movableElementClass="drag-element-movable",this.queuedScreenReaderMessages="",this.bbLocalize.loadBundle("components/services/drag-drop").then(()=>{this.folderDepthMessageKey="components.services.drag-drop.folderDepthMessage"})}createDropPlaceholderElement(t){this.dropPlaceholderElement=e('<div class="dragdropplaceholder js-no-file-drop" style="height: '+t.height()+"px; width: "+t.width()+'px"></div>')}setDropTarget(e){this.lastDropTargetId=this.currentDropTargetId,this.currentDropTargetId=e}clearDropTarget(){this.setDropTarget(void 0)}isCurrentDropTarget(e){return this.currentDropTargetId===e}isNotSameDropTarget(){return this.currentDropTargetId!==this.lastDropTargetId}scrollDragDropItemsContainer(e,t){const n=this._getScrollingContainerElement();if(n){const i=e<u.SCROLLING_CONSTANTS.scrollZoneHeight,s=e>n.height()-u.SCROLLING_CONSTANTS.scrollZoneHeight,o=n.scrollTop();i?n.scrollTop(o-t):s&&n.scrollTop(o+t)}}_getScrollingContainerElement(){const e=u.SCROLL_CONTAINERS_SELECTORS.map(e=>this.originalElement.closest(e));return i.find(e,e=>this._elementHasScrollbar(e))}_elementHasScrollbar(e){return e.get(0).scrollHeight>e.innerHeight()}}u.SCROLLING_CONSTANTS={scrollZoneHeight:200,mouseInteractionDistanceToScroll:30,keyboardInteractionDistanceToScroll:200},u.SCROLL_CONTAINERS_SELECTORS=[".panel-wrap",".panel-content"],u.$inject=["$timeout",r.serviceName];class p extends u{}s.module(c,[r.moduleName]).service(l,u)}).call(this,n("5iHu"))},"2i58":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-content-market",use:"icon-small-content-market-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-market"><path d="M2 2h13l-1 8H4" stroke-width="2" stroke-linejoin="round" /><circle cx="13" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="4" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 6h11.5M7 2v8M11 2v8M1 1h1l2 12h9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"2lxm":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var i=n("D57K"),s=n("Llzl"),o=n("pjml"),a=n("aHpC"),r=n("IbyE"),c=n("9OUN");const l="ultra.service.gradable-item-user-option",d="gradableItemUserOptionService";let u=class{constructor(e,t,n){this.$rootScope=e,this.$q=t,this.$ngRedux=n,this.subscribeToRedux()}subscribeToRedux(){const e=this.$ngRedux.connect(null,e=>Object(c.bindActionCreators)({persistGradableItemUserOption:r.actions.gradableItemUserOption.persistGradableItemUserOption,deleteGradableItemUserOption:r.actions.gradableItemUserOption.deleteGradableItemUserOption,fetchGradableItemUserOption:r.actions.gradableItemUserOption.fetchGradableItemUserOption,fetchGradableItemUserOptionCount:r.actions.gradableItemUserOption.fetchGradableItemUserOptionCount,fetchGradableItemUserOptionExceptions:r.actions.gradableItemUserOption.fetchGradableItemUserOptionExceptions},e))(this);this.$rootScope.$on("$destroy",e)}updateGradableItemUserOption(e,t){return this.$q.when(this.persistGradableItemUserOption(e,t)).then(e=>e.item)}removeGradableItemUserOption(e){return this.$q.when(this.deleteGradableItemUserOption(e)).then(e=>e)}getGradableItemUserOption(e,t,n){const i={courseId:e,columnId:t},s={membershipIds:n};return this.$q.resolve(this.fetchGradableItemUserOption(i,s))}getGradableItemUserOptionExceptions(e,t,n){const i={courseId:e,membershipId:t},s={columnId:n};return this.$q.resolve(this.fetchGradableItemUserOptionExceptions(i,s))}getGradableItemUserOptionCount(e,t){const n={courseId:e,columnId:t};return this.$q.resolve(this.fetchGradableItemUserOptionCount(n,{}))}getGradableItemUserOptionByMembershipId(e,t){return r.select.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,t)}getGradableItemUserOptionByUserId(e,t,n){var i;const s=null===(i=r.select.courseMembership.getCourseMembershipsByUserIds(this.$ngRedux.getState(),t,[n])[0])||void 0===i?void 0:i.id;return r.select.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,s)}};u=Object(i.__decorate)([Object(i.__param)(0,Object(a.b)("$rootScope")),Object(i.__param)(1,Object(a.b)("$q")),Object(i.__param)(2,Object(a.b)("$ngRedux"))],u);class p extends u{}s.module(l,[o.N]).service(d,u)},"367g":function(e,t,n){},"4J8k":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("dmkk");const o="ultra.components.directives.bbUiIcon.large.AvatarMultiple";Object(i.a)(s.a,o,"bbUiIconLargeAvatarMultiple")},"4qUd":function(e,t){e.exports='<div bb-load-bundle="components/directives/schedule-outline" class="schedule-outline">\n\n  \x3c!-- compact representation, used on /courses --\x3e\n  <div ng-if="scheduleOutlineCollection().length !== 0">\n    \x3c!-- If there is only one schedule for this course - show it. --\x3e\n    <div ng-if="scheduleOutlineCollection().length === 1">\n      <p class="location-name" ng-if="scheduleOutlineCollection()[0].location">{{scheduleOutlineCollection()[0].getTruncatedLocation(TRUNCATION_LOCATION_COURSE_CARD)}}</p>\n      <p class="schedule">\n        <span ng-switch="scheduleOutlineCollection()[0].recurRules.freq">\n          <span ng-switch-when="WEEKLY">{{scheduleOutline.getWeeklyRepeatLabel(scheduleOutlineCollection()[0])}}</span>\n          <span ng-switch-when="MONTHLY">\n            <span bb-translate>scheduleOutline.monthlyEvent</span>\n            <span bb-translate ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])">scheduleOutline.nextMonthlyEvent</span>\n            <span ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0] )" bb-date="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])" format="short" auto-update="true"></span>\n          </span>\n          <span ng-switch-when="DAILY" bb-translate>scheduleOutline.dailyEvent</span>\n        </span>\n        <span ng-if="scheduleOutlineCollection()[0].isAllDayEvent()" bb-translate>scheduleOutline.allDay</span>\n        <span ng-if="!scheduleOutlineCollection()[0].isAllDayEvent()"><span bb-time="{{scheduleOutlineCollection()[0].startDate}}" auto-update="true" format="Short"></span> - <span bb-time="{{scheduleOutlineCollection()[0].endDate}}" auto-update="true" format="Short"></span></span>\n      </p>\n    </div>\n\n    \x3c!-- if there is more than one schedule for this course - just tell how many schedules available. --\x3e\n    <div ng-if="scheduleOutlineCollection().length > 1">\n      <span bb-translate translate-values="{count: scheduleOutlineCollection().length}">scheduleOutline.moreMeetingsCompact.plural</span>\n    </div>\n  </div>\n</div>\n'},"5Tom":function(e,t,n){"use strict";var i=n("D57K"),s=n("nYZ0"),o=n("fYJU"),a=n("0JpG"),r=n("TnpK"),c=n("0/Nk"),l=n("M2M2"),d=n("yC9S"),u=n("aHpC");n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));const p="ultra.directives.group.group-student-enrollment";let h=class{constructor(e,t,n,i,s){this.scope=e,this.contentService=t,this.currentUserService=n,this.localize=i,this.ultraState=s,this.isSelfEnrollment=!1}$onInit(){this.render()}async render(){if(this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0){const{locale:e,babelfishFormatter:t}=this.localize.getReactBabelfishParams(this.scope),n=this.content.selfEnrollmentGroups.filter(e=>e.group).map(e=>e.group);this.selfEnrollGroupInfo=await l.getSelfEnrollmentGroupInfo(n,e,t),this.isSelfEnrollment=this.selfEnrollGroupInfo.isSelfEnrollment}else this.isSelfEnrollment=!1}async openContentEnrollPanel(){this.fromView?this.ultraState.current.name.endsWith("discussion.view.with-grading.peek.discussion-details")?(await this.ultraState.leavePeekState(),await this.ultraState.leavePeekState(),await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})):(await this.ultraState.leavePeekState(),await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})):await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id})}isBeforeEnrollment(){return this.selfEnrollGroupInfo&&"Before"===this.selfEnrollGroupInfo.enrollmentDateState}isOpenEnrollment(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState}isOpenEnrollmentWithEnding(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState&&null!=this.selfEnrollGroupInfo.relativeDate}isAfterEnrollment(){return this.selfEnrollGroupInfo&&"After"===this.selfEnrollGroupInfo.enrollmentDateState}};h=Object(i.__decorate)([Object(d.a)({moduleName:p,componentName:"bbGroupStudentEnrollment",template:c,bindings:{content:"<",fromView:"@"},requireModules:[s.d,o.a,a.moduleName,r.b]}),Object(i.__param)(0,Object(u.b)("$scope")),Object(i.__param)(1,Object(u.b)(s.f)),Object(i.__param)(2,Object(u.b)(o.b)),Object(i.__param)(3,Object(u.b)(a.serviceName)),Object(i.__param)(4,Object(u.b)(r.d))],h)},"66CI":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-lock-circle",use:"icon-small-lock-circle-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock-circle"><g stroke-width="2"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8h6v3H5V8z" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 9h4v1H6z" /><path d="M6 8V5.7143C6 4.857 6.6667 4 8 4m0 0c.3333 0-.3333 0 0 0zm0 0c1.3333 0 2 .8571 2 1.7143V8" stroke-linecap="round" stroke-linejoin="round" /></g></symbol>'});s.add(o);e.exports=o},"6sUD":function(e,t){e.exports='<div>\n  \x3c!-- Display a loading spinner if page is rendering --\x3e\n  <div class="telemetry-loading-anim" ng-if="telemetryPanelHeader.showSpinner">\n    <div class="spinner bb-secondary-color-2"/>\n  </div>\n  <header class="panel-header simple-header">\n    <div class="panel-titles-container">\n      <div class="panel-sub-title">{{ ::course().name }}</div>\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                type="button"\n                analytics-id="components.directives.telemetry.panel.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>components.directives.telemetry.panel.menu</span>\n        </button>\n        <h1 class="panel-title" ng-if="::titleKey" bb-translate>{{::titleKey}}</h1>\n        <h1 class="panel-title" ng-if="title">{{::title}}</h1>\n        \x3c!-- BUTTON 2 (displayed to the left of Button 1) --\x3e\n        <button ng-if="buttonTwoIcon" id="button-two"\n                aria-haspopup="true"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonTwoAriaLabel,\'title\': buttonTwoTitle}"\n                ng-click="buttonTwoCallback()"\n                ng-class="{ \'active\': mobileStudentListVisible }"\n                analytics-id="components.directives.telemetry.panel.buttonwTwo.button">\n          <i class="{{ ::buttonTwoIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonTwoTitle</span>\n        </button>\n        \x3c!-- BUTTON 1 (displayed on the far right) --\x3e\n        <button ng-if="buttonOneIcon"\n                id="button-one"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonOneAriaLabel,\'title\': buttonOneTitle}"\n                ng-click="buttonOneCallback()"\n                analytics-id="components.directives.telemetry.panel.buttonOne.button">\n          <i class="{{ ::buttonOneIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonOneTitle</span>\n        </button>\n      </div>\n    </div>\n  </header>\n</div>\n'},"6xt4":function(e,t){e.exports='<div id="{{::addContentButton.getButtonWrapperId()}}" tabindex="-1">\n  <button\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    data-show-add-options\n    ng-click="addContentButton.toggleOverflowMenu()"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    analytics-id="components.directives.add-content-button.course-outline.addContentMenu.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible && !addContentButton.isEmptyFolder()"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  aria-labelledby="{{::addContentButton.getTargetId()}}"\n  analytics-id="components.directives.add-content-button.contextualMenu">\n</bb-ui-contextual-menu>\n<ul class="element-list-add-menu angular-animate small-block-grid-2 medium-block-grid-2"\n    ng-class="\'large-block-grid-3\'"\n    ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n    ng-show="addContentButton.isEmptyFolder()">\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-create"\n       bb-peek-sref="content-manage.create(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.link">\n      <div>\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.create</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="addContentButton.currentCourse.canCopy() && addContentButton.isEmptyFolder()">\n    <a class="content-import-button"\n       bb-peek-sref="content-manage.copy(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.import.link">\n      <div>\n        <bb-svg-icon size="small" icon="duplicate"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.copy</span>\n      </div>\n    </a>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      is-content="true"\n      primary-key="fileListViewLocalId"\n      skip-zip-file-check="true"\n      class="js-file-upload"\n      depth="depth()">\n      <button ng-if="addContentButton.isEmptyFolder()"\n              class="file-upload-button"\n              analytics-id="components.directives.add-content-button.course-outline.upload.button">\n        <div>\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n          <span bb-translate>components.directives.add-content-button.upload</span>\n        </div>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="true"\n      monitor-leave="true"\n      is-third-party-upload="true"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      cloud-upload-selected-content-id="addContentButton.positionForFiles.positionAfter"\n      primary-key="fileListViewId"\n      skip-zip-file-check="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      target-div="{{\'#\' + fileListViewId}}"\n      disable-drag="true"\n      ignored-states="[\'content-manage.import\']">\n      <button\n        class="doc-add-media clear ng-scope"\n        bb-cloud-storage-integration\n        primary-key="fileListViewId"\n        attach-handler="addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="true"\n        on-files-selected="addContentButton.onFilesSelectedHandler"\n        analytics-id="components.directives.add-content-button.course-outline.importContentFromCloudStorage.button">\n        <bb-svg-icon size="small" icon="upload-cloud"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-market"\n       href="javascript:void(0);"\n       ng-click="addContentButton.openContentMarket()"\n       analytics-id="components.directives.add-content-button.course-outline.openContentMarket.link">\n      <div>\n        <bb-ui-icon-small-content-market class="bb-ui-icon-folder"></bb-ui-icon-small-content-market>\n        <span bb-translate>components.directives.add-content-button.contentMarket</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-collection"\n       bb-peek-sref="content-collection(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.contentCollection.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-collection"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.contentCollection</span>\n      </div>\n    </a>\n  </li>\n</ul>\n'},"7UH7":function(e,t){e.exports='<div class="text-editor" tabindex="-1" bb-load-bundle="components/directives/text-editor" bb-cache-compilation="basic-text-editor">\n  <label ng-if="inputLabelKey" class="text-editor-label" for="{{::elementId}}" bb-translate>{{::inputLabelKey}}</label>\n  <textarea id="{{::elementId}}"\n         class="read-mode editor-element"\n         name="{{::elementId}}"\n         tabindex="0"\n         type="text"\n         bb-validate-maxlength="{{::getInputMaxLength()}}"\n         ng-model="ngModel"\n         maxlength="{{::(getInputMaxLength() || \'\')}}"\n         ng-model-options="{ getterSetter: true }"\n         ng-disabled="readonly()"\n         fng-blur="textEditor.onBlur()"\n         fng-focus="textEditor.onFocus()"\n         fng-keyup="textEditor.onChange($event)"\n         fng-keydown="textEditor.onKeydown($event)"\n         bb-translate-attrs="{ \'placeholder\': \'{{placeholderKey}}\' }"\n         aria-label="{{textEditor.getContentLabel()}}"\n         translate-attrs-values="{{::placeholderAttrsValues}}"\n         bb-focus-on="{{::focusOn}}"\n         ng-required="::fieldRequired()"\n         analytics-id="components.textEditor.basicEditor.textarea"></textarea>\n  <div bb-validation-messages\n       ng-if="::!noValidationMessage()"\n       for="{{::elementId}}" immediate="true">\n    <span ng-message="maxlengthImmediate">\n      <span bb-translate translate-values="{ diff: element.$errorImmediate.maxlengthImmediate.diff }">\n        components.directives.validation.messages.errors.maxlength.plural\n      </span>\n    </span>\n  </div>\n</div>\n'},"7XaY":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-export",use:"icon-small-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-export"><path d="M7 9l8-8M12 1h3v3M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"8+lX":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-replies",use:"icon-small-replies-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-replies"><path d="M1 5h14v10H1v-4" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3L1 5l2 2" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"82Nl":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-location",use:"icon-medium-location-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-location"><path d="M20 9c0 4.4183-8 14-8 14S4 13.4183 4 9s3.5817-8 8-8 8 3.5817 8 8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="12" cy="9" r="4" stroke-width="2" /></symbol>'});s.add(o);e.exports=o},"85nY":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-conversation",use:"icon-small-conversation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-conversation"><path d="M15 4.5C15 6.433 13.433 8 11.5 8c-.4457 0-.872-.0833-1.264-.2352L8 8l.25-2.1985A3.4905 3.4905 0 018 4.5C8 2.567 9.567 1 11.5 1S15 2.567 15 4.5zM7 15c0-2-2-4-4-4M3 11c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"9Ss5":function(e,t){e.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="avatarsClasses"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default--\x3e\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!first.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="all-members" ng-if="::(first.isAllMembers)">\n        <bb-ui-icon-large-users></bb-ui-icon-large-users>\n      </div>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default --\x3e\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!second.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="all-members" ng-if="::(second.isAllMembers)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!first.isAllMembers" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="all-members" ng-if="first.isAllMembers">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!second.isAllMembers" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="all-members" ng-if="second.isAllMembers">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar : null">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n</div>\n'},"9hp7":function(e,t){e.exports='<div bb-load-bundle="components/directives/add-content-button">\n  <div class="add-element no-select js-add-content-button {{::contextArea + \'-add-button\'}}"\n       ng-class="{\n         \'force-show-add-button\': addContentButton.isForceShowAddButton && addContentButton.isForceShowAddButton(),\n         \'is-active\': addContentButton.isMenuVisible,\n         \'button-visible\': addContentButton.isButtonVisible,\n         hide: hideDividerLines() && !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)\n       }"\n       ng-keydown="addContentButton.onKeydown($event)">\n    <template></template>\n  </div>\n  <div id="{{::fileListViewId}}">\n    <bb-progress display-results="false" primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId" target-div="{{::\'#\' + fileListViewId}}"></bb-progress>\n  </div>\n</div>'},"Aw+3":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-feedback",use:"icon-small-feedback-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-feedback"><path d="M1 1h14v12h-4l-3 2-3-2H1V1zM4 4h8M4 7h8M4 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},BLb8:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o}));const i=(e,t)=>{e.$on("refresh-items",t)},s=(e,t)=>{e.$on("close-scorm-launch-frame",t)},o=(e,t)=>{e.content.$fetch().$asPromise().then(n=>{n===e.content?((e,t)=>{t?e.$broadcast("refresh-items",t):e.$broadcast("refresh-items")})(e,t):e.content=n})}},BMpZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),s=n("aHpC"),o=n("yC9S"),a=(n("DlnX"),n("IgL1"));const r="ultra.components.directives.buttonComplexTooltip";let c=class{constructor(e,t){this.$scope=e,this.$rootScope=t}$onInit(){this.$scope.buttonComplexTooltip=this}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}};c=Object(i.__decorate)([Object(o.a)({moduleName:r,componentName:"bbButtonComplexTooltip",template:a}),Object(i.__param)(0,Object(s.b)("$scope")),Object(i.__param)(1,Object(s.b)("$rootScope"))],c)},BXQP:function(e,t){e.exports='<div class="timestamp" bb-load-bundle="components/directives/duration" ng-cloak bb-cache-compilation="duration-directive">\n  <div ng-if="!duration.needAgo()">\n    <div class="js-split-datetime" ng-if="duration.separateDatetime()">\n      <span class="date" ng-bind="duration.date"></span>\n      <span class="time" ng-bind="duration.time"></span>\n    </div>\n    <bb-datetime ng-if="!duration.separateDatetime()" ng-class="{\'date\':duration.date}" value="date" format="Short"></bb-datetime>\n  </div>\n  <div ng-if="duration.needAgo()"\n       class="js-duration-ago"\n       bb-translate="components.directives.duration.agoText"\n       translate-values="{durationDate: duration.date, durationTime: duration.time}"></div>\n</div>'},Bfy5:function(e,t,n){"use strict";n.r(t);n("h3DF"),n("zAxy"),n("KCTV");var i=n("Llzl"),s=n("LsET"),o=n("D57K"),a=n("nsO7"),r=n("d8yC"),c=n("Fvsw"),l=n("ap1t"),d=n("o5Lu"),u=n("0JpG"),p=n("pjml"),h=n("zByx"),m=n("IbyE"),b=n("IWgv"),g=n("J0Qq"),v=n("8jzW"),f=n("BnBg"),y=n("nmzr");const C="ultra.directives.grade.studentColumn";class w{constructor(e,t){this.scope=e,this.scoreProviderHelper=t,this.preventAction=!1,this.viewSref=this.getGradableItemStudentViewSref(),this.scope.gradeDetail.column.isAttendance()&&this.scope.baseGradesStudent.course.isToolAvailable("bb-attendance").then(e=>{this.preventAction=!e,this.scope.$emit("click-to-invoke-child-directive-init")})}getGradableItemStudentViewSref(){const e=this.scope.baseGradesStudent,t=e.course,n=this.scope.gradeDetail;if(t.isUltra()){if(n.column.isOffline())return"grade-and-feedback("+i.toJson({courseId:n.column.courseId,columnId:n.column.id,userId:e.userId})+")";const t={courseId:n.column.courseId,contentId:n.column.contentId,linkRef:n.column.linkId};return n.column.isCollectExternalSubmissions()&&(t.state=y.AssessmentRoutes.ASSESSMENT_EXTERNAL_OVERVIEW),this.scoreProviderHelper.studentViewStateRef(n.column.scoreProviderHandle,t,v.a.GenerateStateRef)}return"course.outline("+i.toJson({courseId:t.id,legacyUrl:e.getLegacyUrl()})+")"}isActionable(e){return!e.column.restricted&&this.viewSref&&!this.preventAction}}w.$inject=["scope",v.c];class S{constructor(e,t){this.$injector=e,this.$parse=t,this.scope=!0,this.restrict="E",this.template=f,this.link=(e,t,n)=>{e.studentColumn=this.$injector.instantiate(w,{scope:e}),n.displayFtue&&(e.displayFtue=this.$parse(n.displayFtue)(e)),n.previousTerm&&(e.previousTerm=this.$parse(n.previousTerm)(e))}}}S.$inject=["$injector","$parse"],i.module(C,[b.a,g.a,v.b]).directive("bbStudentColumn",["$injector",e=>e.instantiate(S)]);var I=n("TnpK"),k=n("fYJU"),D=n("O2ux"),T=n("zGdY"),x=n("2lxm"),O=n("aHpC");let A=class e{constructor(e,t,n,i,s,o,a,r){this.scope=e,this.course=t,this.context=n,this.grade=i,this.bbLocalize=s,this.ultraState=o,this.contextUser=a,this.gradableItemUserOptionService=r,this.grades=Object.create(null),this.showAllGrades=!1,this.bbLocalize.loadBundle("components/directives/grade/base-grades-student"),this.scope.membership.courseIsOpen()&&t.canAccess()&&(this.loadGrade(t,n,i,this.contextUser),this.scope.$on("bb-assessment-attempt-save",()=>{this.loadGrade(t,n,i,this.contextUser)}))}getLegacyUrl(){return"/webapps/gradebook/do/student/viewGrades?course_id="+this.course.id+"&callback=course"}getViewAllCourseworkPeekRef(){return this.course.isUltra()?"course.grades({courseId: course.id})":"course.outline({courseId: course.id, legacyUrl: baseGradesStudent.getLegacyUrl()})"}navigateToGradePanel(){return this.course.isUltra()?"overall-grade-student({courseId: course.id, courseName: course.displayName})":"course.outline({courseId: course.id, legacyUrl: baseGradesStudent.getLegacyUrl()})"}filterOutExternalGrade(e){return a.reject(e,e=>e.column.externalGrade)}allGradeItemsComplete(){if(this.grades.all.length){const e=this.filterOutExternalGrade(this.grades.all).length;let t=0;return this.grades.all.forEach(e=>{(e.isSubmitted()||e.isGraded())&&t++}),e===t}return!1}displayGrade(e){return T.CalculationType.NonCalculated!==e.column.calculationType||(e.isSubmitted()||e.isGraded())}getDueDateExceptions(e){const t=e[0].column.courseId,n=this.scope.membership.id,i=e.map(e=>e.column.id);return this.gradableItemUserOptionService.getGradableItemUserOptionExceptions(t,n,i).then(t=>e.map(e=>(t.byColumnId[e.column.id]&&(e.column.dueDate=t.byColumnId[e.column.id].effectiveDueDate),e)))}loadGrade(t,n,i,s){this.course.$then(()=>{this.course.schedule.$resolve(),this.userId=s.userId,i.loadColumnsAndGrades({courseId:t.id,userId:this.userId,includeExternal:!0,attachContentsByScoreProviderHandle:m.ScoreProviderHandle.Scorm}).then(t=>{var i;const s=t.filter(e=>!1!==e.column.visibleInBook);this.externalGrade=a.remove(s,e=>e.column.externalGrade)[0];const o=null===(i=this.externalGrade)||void 0===i?void 0:i.displayGrade;void 0!==(null==o?void 0:o.score)&&(o.perfCode||o.grade||o.requiresSchemaKnowledgeToDisplay?(this.externalGrade.manualScore=r.b(this.externalGrade.displayGrade.score,2),this.externalGrade.displayGrade.score=this.externalGrade.manualScore):(this.externalGrade.manualScore=parseFloat(this.externalGrade.displayGrade.score.toFixed(2)),this.externalGrade.displayGrade.score=this.externalGrade.manualScore)),this.grades.all=s,this.totalNumberOfGradeItems=this.grades.all.length,this.hasGradeItems=!!this.grades.all.length,this.gradeItemsComplete=this.allGradeItemsComplete(),this.getDueDateExceptions(this.grades.all).then(t=>{if(this.hasGradeItems){const i=new E(t,n.getServerTime());this.grades.recent=i.getRecentGrades(),this.grades.upcoming=i.getWhatsNext(),this.grades.all=i.getAllGrades();const s=this.grades.recent.length;let o=this.grades.upcoming.length;s+o>e.MAX_DEFAULT_COLUMNS_LENGTH&&(s>e.MAX_DEFAULT_COLUMNS_LENGTH?(o>0&&(this.grades.upcoming=this.grades.upcoming.slice(0,e.MAX_UPCOMING_COLUMNS_LENGTH),o=this.grades.upcoming.length),this.grades.recent=this.grades.recent.slice(0,e.MAX_DEFAULT_COLUMNS_LENGTH-o)):this.grades.upcoming=this.grades.upcoming.slice(0,e.MAX_DEFAULT_COLUMNS_LENGTH-s))}})})})}};A.MAX_DEFAULT_COLUMNS_LENGTH=5,A.MAX_UPCOMING_COLUMNS_LENGTH=2,A=Object(o.__decorate)([Object(o.__param)(0,Object(O.b)("scope")),Object(o.__param)(1,Object(O.b)("course")),Object(o.__param)(2,Object(O.b)(c.b)),Object(o.__param)(3,Object(O.b)(d.i)),Object(o.__param)(4,Object(O.b)(u.serviceName)),Object(o.__param)(5,Object(O.b)(I.d)),Object(o.__param)(6,Object(O.b)(k.b)),Object(o.__param)(7,Object(O.b)(x.b))],A);class E{constructor(e,t){this.grades=e,this.now=t,this.recentGradeLimit=new Date,this.upcomingDateLimit=new Date,this.recentGradeLimit.setDate(this.now.getDate()-7),this.upcomingDateLimit.setDate(this.now.getDate()+7)}getAllGraded(){const e=a.sortBy(this.grades.filter(e=>e.ui.attempt&&e.isGraded()),e=>e.ui.attempt&&e.ui.attempt.attemptLastGradedDate),t=this.grades.filter(e=>!e.ui.attempt&&e.isGraded());return e.concat(t)}getRecentGrades(){const e=this.grades.filter(e=>e.isSubmitted()&&e.ui.attempt&&e.ui.attempt.attemptDate&&e.ui.attempt.attemptDate>=this.recentGradeLimit&&e.ui.attempt.attemptDate<this.now||e.isGraded()&&e.manualGrade&&e.lastOverrideDate>=this.recentGradeLimit&&e.lastOverrideDate<this.now||e.ui.attempt&&e.ui.attempt.attemptLastGradedDate&&e.ui.attempt.attemptLastGradedDate>=this.recentGradeLimit&&e.ui.attempt.attemptLastGradedDate<this.now||e.isCalculatedColumnGrade&&null!=e.manualGrade);return a.sortBy(e.filter(e=>e.isGraded()||e.isCalculatedColumnGrade,e=>e.ui.attempt&&e.ui.attempt.attemptLastGradedDate))}getWhatsNext(){return a.sortBy(this.grades.filter(e=>!e.isGraded()&&!e.isSubmitted()&&e.column.dueDate&&e.column.dueDate>=this.now&&e.column.dueDate<=this.upcomingDateLimit),e=>e.column.dueDate)}getAllGrades(){const e=a.sortBy(this.grades.filter(e=>e.isMissing()),e=>e.column.dueDate),t=a.sortBy(this.grades.filter(e=>e.isSubmitted()),e=>e.ui.attempt?e.ui.attempt.attemptLastGradedDate:null),n=a.sortBy(this.grades.filter(e=>!e.isGraded()&&!e.isSubmitted()&&!e.column.dueDate),e=>e.column.columnName),i=a.sortBy(this.grades.filter(t=>t.isUpcoming()&&t.column.dueDate&&!a.includes(e,t)),e=>e.column.dueDate);return e.concat(t,this.getAllGraded(),i,n)}}class M{constructor(e){this.$injector=e,this.restrict="E",this.template=D,this.scope={course:"=",courseColorClass:"=",displayFtue:"=",membership:"=",previousTerm:"="},this.link=e=>{e.baseGradesStudent=this.$injector.instantiate(A,{course:e.course,scope:e})}}}M.$inject=["$injector"],i.module("ultra.components.directives.grade.baseGradesStudent",[c.a,l.c,d.h,u.moduleName,p.N,h.a,C,I.b,x.a]).directive("bbBaseGradesStudent",["$injector",e=>e.instantiate(M)]);var L=n("fzAu"),P=n("zEHu"),$=n("lr7J"),B=n("HdfQ"),j=n("r6lH"),G=n("BjFu"),R=n("lEL+"),N=n("4HBD"),_=n("CHTf");n.d(t,"moduleName",(function(){return F})),n.d(t,"controllerName",(function(){return z})),n.d(t,"template",(function(){return _}));const F="ultra.base.grades",z=s.b;i.module(F,["ultra.components.directives.grade.baseGradesStudent",L.a,P.a,$.b,B.a,j.a,G.b,R.a,I.b,N.a]).controller(s.b,s.a)},BiyI:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-add-plus",use:"icon-small-add-plus-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add-plus"><path d="M8 5v6M11 8H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},BjFu:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return y}));var i=n("D57K"),s=n("nsO7"),o=n("Llzl"),a=n("yC9S"),r=n("Fvsw"),c=n("go4a"),l=n("pjml"),d=n("zdqs"),u=n("SoDU"),p=n("fYJU"),h=n("VdDF"),m=n("aHpC"),b=n("zGdY"),g=n("KiLF");const v="ultra.service.termMembership",f="termMembership";function y(e,t=new Date){let n=e.startDate,i=e.endDate;return b.CourseDuration.UseTerm===e.durationType&&e.term&&(n=e.term.startDate,i=e.term.endDate),h.a.isWithinDateRange(t,{start:n,end:i})}let C=class{constructor(e,t,n,i,s,o,r,c,l){this.$q=e,this.context=n,this.CourseModel=i,this.CourseMembershipModel=s,this.TermModel=o,this.UserModel=r,this.ExternalCourseModel=c,this.contextUser=l,a.b.OnRootScope(t,"courseUltraStatusChanged",(e,t,n)=>{this.updateCourseUltraStatus(t,n)})}clear(){this.termsAndMemberships=void 0,this.loadPromise=void 0}getTermsAndMemberships(){return this.loadPromise?this.loadPromise:this.reloadTermsAndMemberships()}filterMemberships(e,t,n){return e&&Array.isArray(e)?e.filter(e=>!e.course.isOrganization===t||!!e.course.isOrganization===n):[]}getCourseMembershipsFromArray(e){return this.filterMemberships(e,!0,!1)}getOrganizationMembershipsFromArray(e){return this.filterMemberships(e,!1,!0)}parseMembershipFromExternalCourse(e){const t=this.CourseMembershipModel.$new();return t.course=this.CourseModel.$new(),t.course.id=e.id,t.course.name=e.title,t.course.description=e.description,t.course.displayName=e.title,t.course.startDate=e.startDate,t.course.endDate=e.endDate,t.course.isAvailable=!0,t.course.durationType=b.CourseDuration.DateRange,t.userId=e.userId,t.isAvailable=!0,t.userHasHidden=e.isHidden,t.courseCardColorIndex=parseInt((e.id||"0").replace(/_1$/,"").replace(/[^\d]/g,""),10),t.course.ui={courseColorClass:c.a(t),isExternal:!0,description:e.description,externalUrl:e.url},t}parseExternalCourseFromMembership(e){const t=this.ExternalCourseModel.$new(e.course.id);return t.id=e.course.id,t.title=e.course.name,t.startDate=e.course.startDate,t.endDate=e.course.endDate,t.userId=e.userId,t.description=e.course.ui.description,t.url=e.course.ui.externalUrl,t.isHidden=e.userHasHidden,t}reloadTermsAndMemberships(){const e=this.$q.defer();this.loadPromise=e.promise,this.termsAndMemberships={terms:[],termsByTermId:{},memberships:[],membershipsByTermId:{}};const t=this.context.getServerTime();return this.$q.all([this.getInternalMembership(),this.getExternalCoursesMembership(),this.updateTermsAndMemberships()]).then(([n,i])=>{this.termsAndMemberships.membershipsByTermId=Object.create(null),this.termsAndMemberships.memberships.splice(0,this.termsAndMemberships.memberships.length),(n=n.filter((e,t,n)=>n.findIndex(t=>e.$pk===t.$pk)===t)).forEach(e=>{this.termsAndMemberships.memberships.push(e)}),i.forEach(e=>{this.termsAndMemberships.memberships.push(e)}),this.associateTermsWithCourses();const o=new u.a(this.TermModel,this.termsAndMemberships.terms);let a=new d.a(o).map(this.termsAndMemberships.memberships,t);(a=this.applyStudentAvailabilityRules(a)).forEach(e=>{const t=t=>{let n=this.termsAndMemberships.membershipsByTermId[t.id];n||(n=this.termsAndMemberships.membershipsByTermId[t.id]={memberships:[]}),n.memberships.push(e.membership)};t(e.term);const n=e.membership.course.term;!n||e.term!==o.currentTerm&&e.term!==o.upcomingTerm||t(n),this.buildTermRelationships(e)}),Object.keys(this.termsAndMemberships.membershipsByTermId).forEach(e=>{const t=this.termsAndMemberships.membershipsByTermId[e];t.memberships=s.sortBy(t.memberships,e=>e.course.name)}),e.resolve(this.termsAndMemberships)}),this.loadPromise}getInternalMembership(){return this.contextUser.getMemberships().then(e=>(e.forEach(e=>{e.course&&(e.course.term&&(e.course.term.id=e.course.term.$pk),e.course.ui={courseColorClass:c.a(e)})}),this.getActiveMemberships(e)))}getActiveMemberships(e){return e.filter(e=>e.course&&e.isAvailable)}getExternalCoursesMembership(){return this.ExternalCourseModel.$search({limit:1e4}).$asPromise().then(e=>e.map(e=>this.parseMembershipFromExternalCourse(e)))}updateTermsAndMemberships(){return this.TermModel.$search().$asPromise().then(e=>{this.termsAndMemberships.terms=s.orderBy(e,["startDate","durationType"],["asc","desc"]);const t=u.a.decorateTerm(new this.TermModel,l.Gb.ConstantTermId.CurrentTerm.toString()),n=u.a.decorateTerm(new this.TermModel,l.Gb.ConstantTermId.UpcomingTerm.toString());this.termsAndMemberships.terms.push(t,n)})}associateTermsWithCourses(){this.termsAndMemberships.memberships.forEach(e=>{e.course.term&&(e.course.term=this.termsAndMemberships.terms.find(t=>t.id===e.course.term.id))})}buildTermRelationships(e){const t=this.termsAndMemberships.termsByTermId[e.term.id];if(e.membership.course.term){if(e.term.id!==e.membership.course.term.id){if(!t)return void(this.termsAndMemberships.termsByTermId[e.term.id]=[e.membership.course.term]);t.indexOf(e.membership.course.term)<0&&t.push(e.membership.course.term)}}else;this.termsAndMemberships.termsByTermId[e.term.id]=s.orderBy(t,["startDate","name"],["desc","asc"])}applyStudentAvailabilityRules(e){return e.filter(e=>(e.membership.isStudentOrGuestMembership()&&e.membership.course.isUndecided()&&(e.membership.course.isAvailable=!1),!0))}getCourseMembership(e){const t=this.findCourseMembership(e,this.termsAndMemberships.memberships);if(-1!==t)return this.termsAndMemberships.memberships[t]}findCourseMembership(e,t){return t.findIndex(t=>t.course.id===e)}updateCourseUltraStatus(e,t){let n=this.findCourseMembership(e,this.termsAndMemberships.memberships);-1!==n&&(this.termsAndMemberships.memberships[n].course.ultraStatus=t),Object.keys(this.termsAndMemberships.membershipsByTermId).forEach(i=>{-1!==(n=this.findCourseMembership(e,this.termsAndMemberships.membershipsByTermId[i].memberships))&&(this.termsAndMemberships.membershipsByTermId[i].memberships[n].course.ultraStatus=t)})}filterAssociatedWithTermCourseMembershipsByTerm(e,t){return this.filterAssociatedWithTermCourseMemberships(e).filter(e=>e.course.term.id===t.id)}filterAssociatedWithTermCourseMemberships(e){return e.filter(e=>e.course.term&&!g.a.Continuous.isEqualTo(e.course.term.durationType))}filterAssortedDatesCourseMemberships(e){return e.filter(e=>null==e.course.term||e.course.term&&g.a.Continuous.isEqualTo(e.course.term.durationType))}};C=Object(i.__decorate)([Object(i.__param)(0,Object(m.b)("$q")),Object(i.__param)(1,Object(m.b)("$rootScope")),Object(i.__param)(2,Object(m.b)(r.b)),Object(i.__param)(3,Object(m.b)(l.m.serviceName)),Object(i.__param)(4,Object(m.b)(l.t.serviceName)),Object(i.__param)(5,Object(m.b)(l.Gb.serviceName)),Object(i.__param)(6,Object(m.b)(l.Jb.serviceName)),Object(i.__param)(7,Object(m.b)(l.z.serviceName)),Object(i.__param)(8,Object(m.b)(p.b))],C);class w extends C{}o.module(v,[r.a,l.N]).service(f,C)},BnBg:function(e,t){e.exports='<div class="row tabular-row js-row element-list-row"\n     ng-class="{\'is-restricted-without-slash restricted-for-students\': gradeDetail.column.restricted}"\n     bb-click-to-invoke-child="a.bb-click-target">\n  <div class="columns">\n    <div ng-class="{\'has-ellipse\': !graderColumn.isCourseView}">\n      <div class="element-card">\n        <div bb-content-item-icon content-column="gradeDetail.column" show-alert-icon="gradeDetail.isMissing()" class="element-image"></div>\n        <div class="element-details">\n          <span class="js-gradable-item-link name ellipse">\n            <a class="bb-click-target"\n               ng-if="studentColumn.isActionable(gradeDetail) && !previousTerm"\n               bb-peek-sref="{{studentColumn.viewSref}}"\n               bb-translate bb-key-hide-ftue="base.grades.student.column.item.detail"\n               tabindex="0"\n               analytics-id="{{gradeDetail.column.localizedColumnName.languageKey}}" >\n              {{gradeDetail.column.localizedColumnName.languageKey}}\n            </a>\n            <span ng-if="!studentColumn.isActionable(gradeDetail) || previousTerm"\n               bb-key-hide-ftue="base.grades.student.column.item.detail">\n              <span bb-translate>\n                {{gradeDetail.column.localizedColumnName.languageKey}}\n              </span>\n              <span bb-translate>\n                components.directives.grade.base-grades-student.disabledContent\n              </span>\n            </span>\n          </span>\n          <span class="secondary-text" ng-show="gradeDetail.ui.attempt.isSubmitted() && !gradeDetail.column.isAttendance()">\n            <span bb-translate>components.directives.grade.base-grades-student.column.submitted</span>\n            <bb-date format="Short">gradeDetail.ui.attempt.attemptDate</bb-date>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- FTUE guidance moment --\x3e\n  <div ng-if="displayFtue" aria-describedby="guidance-moment-grade-detail">\n    \x3c!-- set keep-guidance-when-focusout to be true then add bb-key-hide-ftue="base.grades.student.column.item.detail" on the a that has class "bb-click-target" --\x3e\n    <bb-guidance id="guidance-moment-grade-detail" ng-if="displayFtue" component-key="base.grades.student.column.item.detail" class="guidance-element-overlay base-student-ftue" role="tooltip">\n      <bb-translate>components.directives.grade.base-grades-student.ftue.itemDetail</bb-translate>\n    </bb-guidance>\n  </div>\n  <div class="columns grade-status text-right">\n    \x3c!--Due date--\x3e\n    <span class="secondary-text date right" ng-class="{late: gradeDetail.isMissing()}" ng-if="!gradeDetail.isSubmitted() && !gradeDetail.isGraded()">\n      <span bb-translate ng-if="gradeDetail.column.dueDate">components.directives.grade.base-grades-student.column.due</span>\n      <bb-date format="Short">gradeDetail.column.dueDate</bb-date>\n    </span>\n      \x3c!--Grading status--\x3e\n    <span class="right" ng-if="::baseGradesStudent.displayGrade(gradeDetail)">\n      <bb-display-grade-pill ng-if="gradeDetail.isGraded() || gradeDetail.column.isCalculated()" grade="gradeDetail" column="gradeDetail.column" cursor="default"></bb-display-grade-pill>\n    </span>\n  </div>\n</div>\n'},CHTf:function(e,t){e.exports='<div bb-first-time-container bb-cache-compilation="base-grades" bb-offcanvas-pausal-scope>\n  <bb-base-header page-title-key="base.grades.pageTitle"></bb-base-header>\n\n  <div id="body-content" class="base-grades-wrapper">\n    <div ng-style="{ visibility: baseGrades.termCarouselReady ? \'\' : \'hidden\' }" class="base-grades" bb-foundation>\n      <div class="guidance-wrapper">\n        <button bb-guidance-target component-key="base.grades.ftue.term"\n                class="semester-nav-button prev button button--icon super-clear icon-arrow-left" tabindex="-1"\n                bb-translate-attrs="{\'aria-label\': \'base.grades.previousTerm\', \'title\': \'base.grades.previousTerm\'}" aria-describedby="guidance-moment-grade-term"\n                analytics-id="base.grades.previousTerm.button"></button>\n        <bb-guidance id="guidance-moment-grade-term" ng-if="baseGrades.hasPreviousMemberships" component-key="base.grades.ftue.term" class="guidance-moment-base-grades guidance-element-overlay stacked" role="tooltip">\n          <bb-translate>base.grades.ftue.term</bb-translate>\n        </bb-guidance>\n      </div>\n\n      <button class="semester-nav-button next button button--icon super-clear icon-arrow-right" tabindex="-1"\n              bb-translate-attrs="{\'aria-label\': \'base.grades.nextTerm\', \'title\': \'base.grades.nextTerm\'}"\n              analytics-id="base.grades.nextTerm.button"></button>\n\n      <div class="slick-header"></div>\n\n      <div bb-slick manual-init="true" infinite="false" slick-handle="baseGrades.termCarousel" initial-slide="baseGrades.initialIndex"\n           slides-to-show="1" prev-arrow=".base-grades .prev" next-arrow=".base-grades .next" accessibility="false"\n           hide-off-screen-slides="true">\n\n        \x3c!--Terms--\x3e\n        <div ng-repeat="term in baseGrades.termsToDisplay track by $index"\n             id="container-term-{{term.id}}"\n             data-term-id="{{term.id}}">\n          <div class="grades-list" ng-class="{\'current-term\': term.id === baseGrades.currentTerm.id}"\n               ng-init="firstSlideCreated($index)"\n               bb-infinite-scroll="baseGrades.loadMoreCoursesIntoView(term.id)"\n               infinite-scroll-container="\'#main-content-inner\'"\n               infinite-scroll-disabled="term.id !== baseGrades.currentTermInView || baseGrades.coursesNoMore[term.id] === true"\n               infinite-scroll-immediate-check="term.id !== baseGrades.currentTermInView"\n               infinite-scroll-current-count="baseGrades.getCoursesByTerm(term.id).length"\n               infinite-scroll-total-count="baseGrades.studentMemberships[term.id].length + baseGrades.graderMemberships[term.id].length"\n               infinite-scroll-load-limit="baseGrades.coursesPrLoad"\n               infinite-scroll-tray-id="base-grades-{{::term.id}}"\n               infinite-scroll-focusable-children-selector=".element-card .grades-header a"\n               infinite-scroll-localization-keys-prefix="base.grades.infiniteScroll"\n               infinite-scroll-localization-values="{term: term.name || term.id}">\n\n            <h2 class="semester active-term wide-slide" id="grades-list-term-{{term.id}}">\n              <ng-switch on="term.ui.type">\n                <span ng-switch-when="current" bb-translate-attrs="{\'title\': \'base.grades.term.current\'}" bb-translate>base.grades.term.current</span>\n                <span ng-switch-when="upcoming" bb-translate-attrs="{\'title\': \'base.grades.term.upcoming\'}" bb-translate>base.grades.term.upcoming</span>\n                <span ng-switch-when="year" bb-translate-attrs="{\'title\': \'base.grades.term.year\'}" translate-attrs-values="{year: term.ui.year}"\n                      bb-translate translate-values="{ year: term.ui.year }">base.grades.term.year</span>\n                <span ng-switch-default title="{{term.name}}">{{term.name}}</span>\n              </ng-switch>\n            </h2>\n            <div class="base-grades-term-wrapper">\n\n              <div ng-repeat="membership in baseGrades.getCoursesByTerm(term.id) track by (membership.id + membership.course.id)">\n                <div ng-if="!membership.isStudentMembership()">\n                  <bb-base-grades-grader\n                    id="card_{{membership.course.id}}"\n                    course="membership.course"  bb-course-entitlement="course.gradebook-metadata.VIEW"\n                    course-id="membership.course.id" course-color-class="membership.getCourseColorClass()"\n                    has-telemetry-data="baseGrades.hasTelemetryData(membership)"\n                    previous-term="baseGrades.isPreviousTerm(term.id)">\n                  </bb-base-grades-grader>\n                </div>\n                <div ng-if="membership.isStudentMembership()">\n                  <bb-base-grades-student\n                    id="card_{{membership.course.id}}"\n                    bb-course-entitlement="course.gradebook-metadata.VIEW"\n                    course="membership.course"\n                    course-color-class="membership.getCourseColorClass()"\n                    course-id="membership.course.id"\n                    display-ftue="$first"\n                    entitlement-action="hide"\n                    has-telemetry-data="baseGrades.hasTelemetryData(membership)"\n                    membership="membership"\n                    previous-term="membership.courseIsPrivate() && baseGrades.isPreviousTerm(term.id)">\n                  </bb-base-grades-student>\n                </div>\n              </div>\n\n              \x3c!--Not Enrolled Message Current Term--\x3e\n              <div ng-if="!baseGrades.termHasCourses(term) && term.id === baseGrades.currentTerm.id"\n                   class="empty not-enrolled is-empty-page">\n                <div class="is-empty-wrapper">\n                  <div class="is-empty-explanation">\n                    <img src="./static/images/ftue/zero-state-gradebook.svg" alt="">\n                    <h1 bb-translate class="is-empty-heading">base.grades.noCourse</h1>\n                    <p bb-translate>base.grades.checkLater</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n              \x3c!--upcoming courses should eventually be listed here. they are currently hidden from all users in base grades (LRN-89565)--\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ui-view></div>\n  <div class="spinner bb-secondary-color-2 relatively-centered" ng-if="baseGrades.isLoading" role="status">\n    <span class="sr-only" bb-translate>base.courses.loadingCourses</span>\n  </div>\n</div>\n'},CuGX:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-class-pulse-future",use:"icon-small-class-pulse-future-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-class-pulse-future"><path d="M9 14c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1zM11 6.5a.5.5 0 11-1 0 .5.5 0 011 0zM5.5 9.5a.5.5 0 11-1 0 .5.5 0 011 0z" fill="#262626" stroke="#262626" stroke-width="2" /><path d="M15 11l-4.5-4.5-5.5 3-4-2.357" stroke="#262626" stroke-width="2" /><path d="M9 2c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1z" fill="#262626" stroke="#262626" stroke-width="2" /><path d="M15 2H1v12h14V2z" stroke="#262626" stroke-width="2" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"D8d/":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var i=n("Llzl"),s=n("0JpG"),o=n("A+IJ"),a=n("2a+M"),r=n("pjml"),c=n("lEL+"),l=n("GbAM"),d=n("W6wm");const u="ultra.components.directives.bbDropHandler";class p{constructor(e,t,n,i,s,o,r,c){this.scope=e,this.element=t,this.$rootScope=i,this.$q=s,this.timeout=o,this.dragDropService=r,this.bbLocalizeService=c,this.isDraggingOverFolder=!1,this.isEmptyTarget="emptyTarget"in n,this.dropTargetElement=t.closest(this.dragDropService.dragElementSelector),e.$on("bb-drag-move",()=>{if(this.isEnabledForReordering()&&this.isNotSameDropTarget()&&this.isOnSamePanel()){const e=t.offset(),n=t.height()+e.top,i=t.width()+e.left;this.dragDropService.pointerPosition.left>=e.left&&this.dragDropService.pointerPosition.left<=i&&this.dragDropService.pointerPosition.top>=e.top&&this.dragDropService.pointerPosition.top<=n?this.dragOverFunc(this.dragDropService.pointerPosition.top):this.dragLeaveFunc()}}),e.$on("bb-drag-end",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&this.dropHandlerFunc()}),t.on("drop",t=>{t.originalEvent.dataTransfer.files&&t.originalEvent.dataTransfer.files.length>0&&e.onFileDropHandler&&e.onFileDropHandler()(t.originalEvent.dataTransfer.files,e.content())}),e.$on("bb-drag-cancel",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&(e.content().id===this.dragDropService.currentDragId&&(this.dragDropService.positionBefore=e.content().id),this.dropHandlerFunc())}),e.$on("keyboard-drag-start",()=>{this.isEnabledForReordering()&&e.content().id===this.dragDropService.currentDragId&&(this.dragPosition=a.b.SELF,this.dragDropService.originalElement=t.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass),this.dragDropService.originalElement.addClass(this.dragDropService.dragHoverClass),this.dragDropService.setDropTarget(e.content().id))}),e.$on("keyboard-drag-end",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&this.timeout(()=>{this.dragDropService.originalElement&&this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),a.b.FOLDER.isEqualTo(this.dragPosition)?this.dragDropService.positionAfter=e.content().id:a.b.TOP.isEqualTo(this.dragPosition)?(this.dragDropService.positionBefore=e.content().id,this.dragDropService.positionAfter=null):(this.dragDropService.positionAfter=e.content().id,this.dragDropService.positionBefore=null),this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove(),this.isDropPreventedByContentDepthRules().then(t=>{if(!this.isDnDPreventedInDiscussionContext()&&!t&&!this._isDroppingInSamePlace()){const t={dragContentId:this.dragDropService.currentDragId,dragElement:this.dragDropService.currentDragElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};e.onMoveHandler()(t)}this._keyboardEndDragAndClearValues()})},e)}),e.$on("keyboard-drag-cancel",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._keyboardEndDragAndClearValues(),this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.remove())}),e.$on("keyboard-drag-up",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._removeKeyboardPlaceholderAndStyling(),this.isEmptyTarget&&(this.dragPosition=a.b.TOP),a.b.SELF.isEqualTo(this.dragPosition)||a.b.TOP.isEqualTo(this.dragPosition)?e.previousContentId&&e.previousContentId()?this.keyboardMoveUpToItem(e.previousContentId()):e.content().depth>1?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),this.keyboardMoveOntoFolder(e.content().parentId)):(this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):a.b.FOLDER.isEqualTo(this.dragPosition)?this._keyboardMoveAboveThisItem():a.b.BOTTOM.isEqualTo(this.dragPosition)&&this.isDropPreventedByContentDepthRules().then(t=>{this.isAFolder()?!0!==e.isFolderOpen()||!this.isNotSameDropTarget()||this.isDnDPreventedInDiscussionContext()||t?!1!==e.isFolderOpen()||!this.isNotSameDropTarget()||this.isDnDPreventedInDiscussionContext()||t||this.keyboardMoveOntoFolder(this.scope.content().id):(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),this.keyboardMoveIntoFolderAsLastItem()):this._keyboardMoveAboveThisItem()}))}),e.$on("keyboard-drag-down",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._removeKeyboardPlaceholderAndStyling(),this.isEmptyTarget&&(this.dragPosition=a.b.BOTTOM),a.b.SELF.isEqualTo(this.dragPosition)||a.b.BOTTOM.isEqualTo(this.dragPosition)?e.nextContentId&&e.nextContentId()?this.keyboardMoveDownToItem(e.nextContentId()):e.content().depth>1?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),this.keyboardMoveBelowItem(e.content().parentId)):(this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):a.b.FOLDER.isEqualTo(this.dragPosition)?this.isDropPreventedByContentDepthRules().then(t=>{e.isFolderOpen&&!0===e.isFolderOpen()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!t?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),this.keyboardMoveIntoFolderAsFirstItem()):this._keyboardMoveBelowThisItem()}):a.b.TOP.isEqualTo(this.dragPosition)&&this.isDropPreventedByContentDepthRules().then(e=>{this.isAFolder()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!e?this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveBelowThisItem()}))}),e.$on("keyboard-drag-right",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&a.b.FOLDER.isEqualTo(this.dragPosition)&&e.isFolderOpen&&!1===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)}),e.$on("keyboard-drag-left",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&a.b.FOLDER.isEqualTo(this.dragPosition)&&e.isFolderOpen&&!0===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)}),e.$on("keyboard-move-up-to-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),e.content().id===this.dragDropService.currentDragId?(this.dragPosition=a.b.SELF,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this.isAFolder()?this.scope.isFolderOpen&&!0===this.scope.isFolderOpen()?this.keyboardMoveIntoFolderAsLastItem():(this.dragPosition=a.b.FOLDER,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this._keyboardMoveAboveThisItem())}),e.$on("keyboard-move-down-to-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),e.content().id===this.dragDropService.currentDragId?(this.dragPosition=a.b.SELF,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this.isAFolder()?this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveBelowThisItem())}),e.$on("keyboard-move-above-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this._keyboardMoveAboveThisItem())}),e.$on("keyboard-move-below-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this._keyboardMoveBelowThisItem())}),e.$on("keyboard-move-onto-folder",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this.dragPosition=a.b.FOLDER,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}),e.$on("remove-placeholder",()=>{this.isEnabledForReordering()&&this.dragDropService.dropPlaceholderElement&&this.dragDropService.dropPlaceholderElement.remove(),this.isEmptyTarget&&this.element.children("bb-add-content-button").show()})}_keyboardMoveBelowThisItem(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.content().id):this.scope.nextContentId&&this.scope.nextContentId()===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.nextContentId()):(this.dragPosition=a.b.BOTTOM,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}_keyboardMoveAboveThisItem(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.content().id):this.scope.previousContentId&&this.scope.previousContentId()===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.previousContentId()):(this.dragPosition=a.b.TOP,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}_informScreenReaderOfNewLocation(){const e=this.element.find("[bb-drag-handle]").eq(0).attr("drag-item-name");let t="";if(""!==this.dragDropService.queuedScreenReaderMessages&&(t+=this.dragDropService.queuedScreenReaderMessages,t+=" "),-1!==this.dragDropService.currentDropTargetId.indexOf("blank"))return t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-only-item-in-folder",noWrap:!0}),this.$rootScope.$broadcast(l.a,t),void(this.dragDropService.queuedScreenReaderMessages="");this.scope.previousContentId&&this.scope.previousContentId()||!a.b.TOP.isEqualTo(this.dragPosition)&&!a.b.SELF.isEqualTo(this.dragPosition)?this.scope.nextContentId&&this.scope.nextContentId()||!a.b.BOTTOM.isEqualTo(this.dragPosition)&&!a.b.SELF.isEqualTo(this.dragPosition)||(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-end-of-list",noWrap:!0}),t+=" "):(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-top-of-list",noWrap:!0}),t+=" "),a.b.SELF.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-self",noWrap:!0}):a.b.FOLDER.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-folder",params:{itemName:e},noWrap:!0}):a.b.TOP.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-above",params:{itemName:e},noWrap:!0}):a.b.BOTTOM.isEqualTo(this.dragPosition)&&(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-below",params:{itemName:e},noWrap:!0})),this.$rootScope.$broadcast(l.a,t),this.dragDropService.queuedScreenReaderMessages=""}_applyKeyboardPlaceholderAndStyling(){let e=this.dropTargetElement;a.b.SELF.isEqualTo(this.dragPosition)?this.dropTargetElement.addClass(this.dragDropService.dragHoverClass):a.b.FOLDER.isEqualTo(this.dragPosition)?(this.dropTargetElement.before(this.dragDropService.currentDragElement),this.dragDropService.currentDragElement&&(1===this.scope.content().depth?this.dragDropService.currentDragElement.addClass(this.dragDropService.onFolderClass):2===this.scope.content().depth&&this.dragDropService.currentDragElement.addClass(this.dragDropService.onNestedFolderClass))):a.b.BOTTOM.isEqualTo(this.dragPosition)?(e=this.dragDropService.currentDragElement,this.dropTargetElement.after(this.dragDropService.currentDragElement)):a.b.TOP.isEqualTo(this.dragPosition)&&(e=this.dragDropService.currentDragElement,this.dropTargetElement.before(this.dragDropService.currentDragElement)),this._scrollContainer(e)}_removeKeyboardPlaceholderAndStyling(){this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&(this.dragDropService.currentDragElement.removeClass(this.dragDropService.onFolderClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.onNestedFolderClass),this.dragDropService.currentDragElement.remove())}_scrollContainer(e){this.dragDropService.scrollDragDropItemsContainer(e.offset().top,a.a.SCROLLING_CONSTANTS.keyboardInteractionDistanceToScroll)}_keyboardEndDragAndClearValues(){this.timeout(()=>{e('[bb-drag-handle][drag-item-id="'+this.dragDropService.currentDragId+'"]').focus(),this.dragDropService.clearDropTarget(),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dragDropService.isKeyboardDragging=!1},this.scope,0,!1)}isDropPreventedByContentDepthRules(){const e=()=>r.p.ContentHandler.Folder.isEqualTo(this.dragDropService.currentDragType);if(void 0!==this.dragDropService.currentDragHasFolderChild)return this.dragDropService.currentDragHasFolderChild.then(t=>e()&&(this.isDraggingOverFolder&&this.scope.content().depth===o.l||this.scope.content().depth>o.l||this.isDraggingOverFolder&&t));const t=this.$q.defer();return t.resolve(!1),t.promise}isDnDPreventedInDiscussionContext(){return(()=>d.a.Discussions===this.dragDropService.currentDragContext)()&&(()=>r.p.ContentHandler.Folder.isEqualTo(this.dragDropService.currentDragType))()&&(this.isDraggingOverFolder&&this.scope.content().depth===o.k||this.scope.content().depth>o.k)}dragOverFunc(e){if(this.dragDropService.currentDragId&&this.dragDropService.currentDragId!==this.scope.content().id){this.dragDropService.setDropTarget(this.scope.content().id),!this.folderHoverTimeout&&this.scope.isFolderOpen&&!1===this.scope.isFolderOpen()&&(this.dropTargetElement.addClass(this.dragDropService.dragHoverClass),this.folderHoverTimeout=this.timeout(()=>{this.isDropPreventedByContentDepthRules().then(e=>{e||this.isDnDPreventedInDiscussionContext()?(this.dragDropService.isShowingDepthMessage=!0,this.$rootScope.$broadcast("show-override-message",this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:this.dragDropService.folderDepthMessageKey}),this.scope.content().id)):(this.scope.$emit("toggle-folder-by-id",this.scope.content().id),this.wasFolderOpened=!0)})},this.scope,1500)),this.dragDropService.isShowingDepthMessage&&this.dragDropService.isNotSameDropTarget()&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());const t=e,n=this.element.offset().top+this.element.height()/2,i=this.dragPosition;this.isAFolder()&&(this.isDraggingOverFolder=!0),this.scope.content().id.indexOf("placeholder")>-1?(this.dragDropService.positionAfter=this.scope.content().parentId,this.dragDropService.positionBefore=void 0,this.dragPosition=a.b.BOTTOM):t<=n?(this.dragDropService.positionBefore=this.scope.content().id,this.dragDropService.positionAfter=void 0,this.dragPosition=a.b.TOP):(this.dragDropService.positionAfter=this.scope.content().id,this.dragDropService.positionBefore=void 0,this.dragPosition=a.b.BOTTOM),(this.dragDropService.isNotSameDropTarget()||this.dragPosition!==i)&&(this._moveDropPlaceholderElement(),this.isEmptyTarget&&this.element.children().hide())}}_moveDropPlaceholderElement(){if(this.$rootScope.$broadcast("remove-placeholder"),this.dragDropService.currentDragId===this.dragDropService.currentDropTargetId)return;(()=>this.dragDropService.positionBefore&&this.dragDropService.currentDropTargetId!==this.dragDropService.idOfNextItem)()?this.dropTargetElement.before(this.dragDropService.dropPlaceholderElement):(()=>!(this.dragDropService.currentDropTargetId.indexOf("placeholder")>-1&&this.dragDropService.idOfNextItem===this.dragDropService.currentDropTargetId)&&(this.dragDropService.positionAfter&&this.dragDropService.currentDropTargetId!==this.dragDropService.idOfPreviousItem))()&&this.dropTargetElement.after(this.dragDropService.dropPlaceholderElement)}_isDroppingInSamePlace(){if(null!=this.dragDropService.positionAfter&&this.scope.previousContentId&&this.dragDropService.positionAfter===this.scope.previousContentId()||this.dragDropService.positionAfter===this.dragDropService.currentDragId||null!=this.dragDropService.positionBefore&&this.scope.nextContentId&&this.dragDropService.positionBefore===this.scope.nextContentId()||this.dragDropService.positionBefore===this.dragDropService.currentDragId)return!0}dropHandlerFunc(){this.timeout.cancel(this.folderHoverTimeout),this.dropTargetElement.parents("[data-parent-id]").last().removeAttr("style"),this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("remove-placeholder"),this.$rootScope.$broadcast("file-drag-restore"),this.dragDropService.isShowingDepthMessage&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());const e={dragContentId:this.dragDropService.currentDragId,originalElement:this.dragDropService.originalElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};this.isDropPreventedByContentDepthRules().then(t=>{this._isDroppingInSamePlace()||this.isDnDPreventedInDiscussionContext()?this.dropCleanupFunc():!t&&this.isDraggingOverFolder?this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.scope.onMoveIntoFolderHandler()(e),this.dropCleanupFunc()):this.scope.$apply(()=>{this.scope.onMoveIntoFolderHandler()(e),this.dropCleanupFunc()}):t?this.dropCleanupFunc():this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.scope.onMoveHandler()(e),this.dropCleanupFunc()):this.scope.$apply(()=>{this.scope.onMoveHandler()(e),this.dropCleanupFunc()}),this.isDraggingOverFolder=!1})}dropCleanupFunc(){this.wasFolderOpened&&(this.wasFolderOpened=!1,this.scope.$emit("toggle-folder-by-id",this.scope.content().id)),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove()}dragLeaveFunc(){this.isDraggingOverFolder=!1,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.timeout.cancel(this.folderHoverTimeout),this.folderHoverTimeout=void 0,this.isDropPreventedByContentDepthRules().then(e=>{e&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage())})}broadcastShowOverrideMessage(){this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id):this.scope.$apply(()=>this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id))}keyboardMoveUpToItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-up-to-item",e)},this.scope)}keyboardMoveDownToItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-down-to-item",e)},this.scope)}keyboardMoveBelowItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-below-item",e)},this.scope)}keyboardMoveAboveItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-above-item",e)},this.scope)}keyboardMoveOntoFolder(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-onto-folder",e)},this.scope)}keyboardMoveIntoFolderAsLastItem(){const e=this.scope.content().children;e.length>0?this.keyboardMoveBelowItem(e[e.length-1].id):this.keyboardMoveBelowItem(this.scope.content().id+"blank")}keyboardMoveIntoFolderAsFirstItem(){const e=this.scope.content().children;e.length>0?this.keyboardMoveAboveItem(e[0].id):this.keyboardMoveAboveItem(this.scope.content().id+"blank")}isNotSameDropTarget(){return this.scope.content().id!==this.dragDropService.currentDragId}isOnSamePanel(){return this.element.closest(".panel-content").is(this.dragDropService.originalElement.closest(".panel-content"))}isEnabledForReordering(){return!(this.scope.disableForReordering&&this.scope.disableForReordering())}isAFolder(){return null!=this.scope.isFolderOpen}}p.$inject=["scope","element","attrs","$rootScope","$q",c.b,a.d,s.serviceName];class h{constructor(e){this.$injector=e,this.scope={onMoveIntoFolderHandler:"&?",onMoveHandler:"&",onFileDropHandler:"&",isFolderOpen:"&?",content:"&",previousContentId:"&?",nextContentId:"&?",disableForReordering:"&?"},this.restrict="A",this.link=(e,t,n)=>{e.dropHandlerDirective=this.$injector.instantiate(p,{scope:e,element:t,attrs:n})}}}h.$inject=["$injector"],i.module(u,[a.c,c.a]).directive("bbDropHandler",["$injector",e=>e.instantiate(h)])}).call(this,n("5iHu"))},DMV0:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.cloudStorageIntegration.modal.errorTitle"\n          analytics-id-tag-prefix="components.directives.cloudStorageIntegration">\n  <div name="modal-contents">\n    <p bb-translate>components.directives.cloudStorageIntegration.modal.errorFull</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.cloudStorageIntegration.modal.cancelUploadText">\n    <bb-translate>components.directives.cloudStorageIntegration.modal.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},DXZ4:function(e,t,n){},DnQR:function(e,t){e.exports='<div bb-load-bundle="components/directives/folder" class="folder" ng-class="{\'is-empty-folder\': content.children.length === 0 && folder.showEmptyMenu, \'learning-module\': content.isLearningModule()}" bb-cache-compilation="content-folder">\n  <div bb-drop-handler on-move-handler="onMoveHandler" on-move-into-folder-handler="onMoveIntoFolderHandler" on-file-drop-handler="onFileDropHandler" content="content" is-folder-open="folder.isOpen" next-content-id="nextContentId" previous-content-id="previousContentId">\n    <div ng-if="::(!content.isLearningModule())"\n         class="row collapse element-list-row folder-row-container js-parent js-course-skip-link-target"\n         can-create="canCreate"\n         bb-content-item-mouseover\n         ng-class="{open: folder.isOpen, \'is-conditional-release\': content.isConditionalReleaseLocked(), \'element-list-row-extra-icon\': folder.isProgressTrackingStateShown(content)}"\n         bb-click-to-invoke-child="button.content-title">\n      <bb-content-item-base contents="contents" content="content" context-area="folder.contextArea" can-move="canMove"></bb-content-item-base>\n      <div class="list-tree-toggle" ng-if="folder.canToggle()">\n        <button class="button super-clear"\n                ng-click="folder.toggleFolder()"\n                aria-controls="{{::\'folder-contents-\' + content.id}}"\n                aria-expanded="{{folder.isOpen}}"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.folder.aria-label.toggle-folder\'}"\n                translate-attrs-values="{folderName: content.title}"\n                analytics-id="course.content.folder.toggle.button">\n          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n        </button>\n      </div>\n    </div>\n\n    <div ng-if="::(content.isLearningModule())" ng-class="{open: folder.isOpen}">\n      <bb-learning-module-base-item content="content" contents="contents" context-area="folder.contextArea" can-toggle="::folder.canToggle()"\n        toggle-func="folder.toggleFolder()" can-move="canMove" is-open="folder.isOpen">\n      </bb-learning-module-base-item>\n    </div>\n  </div>\n  <div ng-attr-id="{{::(content.isLearningModule() ? \'learning-module-contents-\' : \'folder-contents-\') + content.id}}" class="folder-contents" aria-expanded="{{folder.isOpen}}" ng-class="{\'not-empty\': content.children && content.children.length > 0}">\n    <div ng-if="(content.children.length > 0 || folder.showOutlineOverride) && folder.isOpen">\n      <bb-content-outline hide-add-menu-override="folder.showOutlineOverride" on-file-drop-handler="onFileDropHandler" on-move-handler="onMoveHandler"\n                          on-move-into-folder-handler="onMoveIntoFolderHandler" load-more-children="loadMoreChildren" parent-folder="folder.content"\n                          contents="folder.content.children" can-create="canCreate" can-move="canMove" context-area="folder.contextArea"\n                          can-copy-import="canCopyImport"></bb-content-outline>\n    </div>\n    <div class=\'drag-element\'>\n      <div bb-drop-handler\n        ng-show="content.children.length === 0"\n        on-move-handler="onMoveHandler"\n        on-move-into-folder-handler="onMoveIntoFolderHandler"\n        on-file-drop-handler="onFileDropHandler"\n        content="{id: content.id + \'blank\', parentId: content.id, depth: content.depth + 1}"\n        empty-target\n      >\n        <span class="empty-message" ng-if="content.children.length === 0 && folder.showEmptyMenu && !canCreate"\n          ng-class="{\'foder-in-force-sequence-empty-message\': content.isForcedSequenceItem()}"\n          bb-translate="{{\n              content.isLearningModule() ?\n                \'components.directives.learning-module.empty\' :\n                \'components.directives.folder.empty\'\n          }}">\n        </span>\n        \x3c!-- (|| false) keep showMenuOverride in watch status in add-content-button directive --\x3e\n        \x3c!-- use ng-show instead of ng-if to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n        <ng-switch on="::content.isLearningModule()">\n          <bb-add-content-button ng-switch-when="false" show-menu-override="folder.showMenuOverride || false" depth="(content.depth + 1)" content="content"\n                                 root-content="rootContent()" parent-id="content.id" position-before="\'start\'"\n                                 ng-show="canCreate && folder.showEmptyMenu" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n          <bb-add-content-button ng-switch-when="true" show-menu-override="false" depth="(content.depth + 1)" content="content"\n                                 root-content="content" parent-id="content.id" position-before="\'start\'"\n                                 is-render-by-default="true"\n                                 class="empty-lm-add-content-btn"\n                                 ng-show="canCreate && folder.showEmptyMenu" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n        </ng-switch>\n      </div>\n    </div>\n  </div>\n</div>\n'},EGJL:function(e,t){e.exports='<div ng-class="{\'is-restricted\': graderColumn.column.isHidden() && !graderColumn.column.externalGrade, \'grader-column\': true}">\n  <div class="row tabular-row js-row grader-column-item" bb-click-to-invoke-child="a.bb-click-target" aria-describedby="guidance-moment-grade-click">\n    <div ng-class="{\'medium-5\': !graderColumn.isCourseView, \'medium-4\': graderColumn.isCourseView}" class="columns">\n      <div class="element-card">\n        <div bb-content-item-icon show-alert-icon="graderColumn.showAlertIcon()" content-column="graderColumn.column" class="element-image" ng-if="graderColumn.column"></div>\n        <div class="element-details">\n          <div ng-class="{\'gradebook-overall-grade-title\': graderColumn.column.externalGrade}">\n            <bb-svg-icon\n              id="{{graderColumn.column.id + \'grade-not-visible-icon\'}}"\n              size="small"\n              ng-if="graderColumn.column.externalGrade && !graderColumn.column.visible"\n              icon="invisible"\n              class="visibility-icon"\n              role="img"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n            ></bb-svg-icon>\n            <span class="name ellipse" ng-if="graderColumn.itemLinkIsClickable">\n              <a  class="bb-click-target"\n                  ng-click="graderColumn.handleColumnClick()"\n                  href="javascript:void(0);"\n                  bb-key-hide-ftue="grades.grader.base.column.clickItem"\n                  id="{{\'graderColumn_\' + graderColumn.course.courseId}}"\n                  analytics-id="components.directives.grade.graderColumn.name.link"\n                  aria-label="{{graderColumn.attendanceAriaLabel}}"\n                  ng-attr-aria-describedby="{{graderColumn.column.externalGrade && !graderColumn.column.visible ? graderColumn.column.id + \'grade-not-visible-icon\' : undefined}}">\n                  {{graderColumn.column.columnName}}\n              </a>\n            </span>\n          </div>\n          <span class="name ellipsis" ng-if="!graderColumn.itemLinkIsClickable">\n            <span id="{{ \'graderColumn_\' + graderColumn.course.courseId}}">{{graderColumn.column.columnName}}</span>\n          </span>\n          <div class="name-controls" ng-if="::!graderColumn.column.isOffline()">\n            <span class="secondary-text" ng-if="::graderColumn.column.seemsAttemptBased()">\n              <span ng-if="graderColumn.column.dueDate && graderColumn.numMissingStudents">\n                <span class="items-missing" bb-translate translate-values="{missingCount: graderColumn.numMissingStudents}">components.directives.grade.grader-column.studentsMissing.plural</span>\n                <span ng-if="!graderColumn.column.isOffline()">|</span>\n              </span>\n              <span ng-if="graderColumn.column.summary.numStudentSubmissions && graderColumn.column.summary.numEligibleToBeGraded">\n                <bb-translate ng-if="graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{participatedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsParticipated.plural</bb-translate>\n                <bb-translate ng-if="!graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{submittedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsSubmitted.plural</bb-translate>\n              </span>\n            </span>\n            <span class="secondary-text" ng-if="::graderColumn.column.isAttendance() && graderColumn.column.summary.averageGradeForStudents">\n                <span bb-translate translate-values="{percentage: graderColumn.column.summary.averageGradeForStudents}">components.directives.grade.grader-column.attendance.average</span>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="graderColumn.isCourseView" class="date columns medium-2 large-2 hide-for-small-only">\n      <bb-datetime ng-if="!graderColumn.column.isAttendance()" format="Short" value="graderColumn.column.dueDate">\n      </bb-datetime>\n      <span ng-if="graderColumn.column.isAttendance()" bb-translate>components.directives.grade.grader-column.attendance.ongoing</span>\n    </div>\n\n    <div ng-class="{\'grade-status-container columns medium-7\': !graderColumn.isCourseView, \'columns medium-5 course-only-grade-status-container\': graderColumn.isCourseView}">\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}" ng-if="!graderColumn.column.isAttendance()">\n        <div ng-switch="graderColumn.column.isCollectExternalSubmissions()">\n          \x3c!-- External submission statuses are calculated differently from others since the instructor is initiating the attempt\n          when they go to grade the user. Therefore, we want to include people who have no submission as ready to be graded //--\x3e\n          <div ng-switch-when="true">\n            <div ng-switch="graderColumn.column.summary.getStatus().toString()">\n              <div class="grade-count" ng-switch-when="NEEDS_GRADING">\n                <span bb-translate translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0">|</span>\n                <span class="grade-posted-count-before" ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0"\n                      bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">\n                  components.directives.grade.grader-column.statuses.numToPost.plural\n                </span>\n              </div>\n              <span ng-switch-when="NEEDS_POSTING">\n                <span bb-translate ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0"\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0">|</span>\n                <span bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">\n                  components.directives.grade.grader-column.statuses.numToPost.plural\n                </span>\n              </span>\n              <span ng-switch-when="ALL_GRADED">\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.allGraded\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                <span bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span ng-switch-when="NOTHING_TO_GRADE">\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.nothingToGrade\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </div>\n          </div>\n          <div ng-switch-default>\n            <div ng-switch="graderColumn.column.summary.getStatus().toString()" ng-if="::!graderColumn.column.isCalculated()">\n              <div class="grade-count js-grade-progress-needs-grading" ng-switch-when="NEEDS_GRADING">\n                <span ng-if="::graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.column.summary.numStudentsNeedsGrading}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="::!graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.getNumberOfSubmissionsNeedsGrading()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0">|</span>\n                <span class="grade-posted-count-before" ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0" bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">components.directives.grade.grader-column.statuses.numToPost.plural</span>\n              </div>\n              <span class="js-grade-progress-needs-posting" ng-switch-when="NEEDS_POSTING" bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">components.directives.grade.grader-column.statuses.numToPost.plural</span>\n              <span class="js-grade-progress-all-graded" ng-switch-when="ALL_GRADED" bb-translate>components.directives.grade.grader-column.statuses.allGraded</span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                <span bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span class="js-grade-progress-nothing-to-show" ng-switch-when="NOTHING_TO_GRADE" bb-translate>components.directives.grade.grader-column.statuses.nothingToGrade</span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </div>\n            <div ng-if="::graderColumn.column.isCalculated()">\x3c!-- Needed for spacing --\x3e</div>\n          </div>\n        </div>\n      </div>\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}"\n           ng-if="graderColumn.column.isAttendance()" bb-translate>\n        components.directives.grade.grader-column.attendance.markAttendance\n      </div>\n      <div class="grade-status" ng-class="{\'columns medium-5 course-only-grade-status\': graderColumn.isCourseView}">\n        <div ng-if="::!graderColumn.column.isCalculated()">\n          <div ng-if="!graderColumn.course.isComplete() && graderColumn.column.summary.hasGradesToPost() && graderColumn.canPostGrades" class="post">\n            <button class="button button--secondary send-grade" bb-confirmation-needed="{{graderColumn.grade.getPostAllGradeConfirmationNeededStringsKey(graderColumn.column)}}"\n                    modal-aria-type="alertdialog" show-type="always" ng-click="graderColumn.postGrades()"\n                    bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.postGrades\'}"\n                    translate-attrs-values="{courseName: graderColumn.course.name, columnName: graderColumn.column.columnName}"\n                    bb-translate="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGrades\' : \'components.directives.grade.grader-column.actions.basePostGrades\'}}"\n                    analytics-id="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGrades\' : \'components.directives.grade.grader-column.actions.basePostGrades\'}}" >\n            </button>\n          </div>\n        </div>\n        <div ng-if="::graderColumn.column.isCalculated()">\x3c!-- Needed for spacing --\x3e</div>\n      </div>\n    </div>\n    <div ng-if="(graderColumn.showOverflowMenu || graderColumn.showDragControls) && !graderColumn.isRestrictedGroupContent"\n        class="columns medium-1 large-1 last-row-item item-controls dots" bb-foundation-defer>\n\n      \x3c!-- disable if its a group and has user is not entitled --\x3e\n      <button bb-drag-handle ng-if="graderColumn.showDragControls"\n              drag-item-id="{{::graderColumn.column.id}}"\n              drag-item-name="{{graderColumn.column.columnName}}"\n              class="super-clear small button icon js-drag-handle drag-drop-button"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.reorder-grader-item\', \'title\': \'components.directives.grade.grader-column.aria-label.move-tip\'}"\n              translate-attrs-values="{columnName: graderColumn.column.columnName}"\n              analytics-id="components.directives.grade.graderColumn.reorderItem.button" >\n        <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n      </button>\n\n      \x3c!-- disable if its a group and has user is not entitled --\x3e\n      <div ng-if="graderColumn.showOverflowMenu" class="overflow-menu-container right">\n        <bb-overflow-menu element-id="{{graderColumn.overflowMenuId}}"\n                          element-name="{{graderColumn.column.columnName}}"\n                          menu-items="graderColumn.getOverflowMenuItems()"\n                          analytics-id-tag-prefix="components.directives.grade.grader-column.overflowMenu">\n        </bb-overflow-menu>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="graderColumn.showConversionMessage">\n    <bb-course-access-alert course="course"\n                            alert-type="graderColumn.getAlertType()"\n                            confirm-callback="graderColumn.closeConversionTooltip()"\n                            timeout-callback="graderColumn.closeConversionTooltip()">\n    </bb-course-access-alert>\n  </div>\n</div>\n<bb-add-content-button\n                      position-after="graderColumn.column.id" item-name="graderColumn.column.columnName"\n                      context-area="graderColumn.contextArea"\n                      ng-if="graderColumn.isCourseView && !graderColumn.course.isComplete() && graderColumn.canModify"\n                      show-add-attendance="attendanceIsAvailable() && !attendanceColumnExists()">\n</bb-add-content-button>\n'},ELoy:function(e,t,n){"use strict";n("px9Z"),n("GkCm");var i=n("Llzl"),s=n("lEL+"),o=n("6sUD");n.d(t,"a",(function(){return a}));const a="ultra.directives.telemetry.panel.header";class r{constructor(e,t){this.scope=e,this.timeout=t,this.showSpinner=!1,this.spinnerTimeout=this.timeout(()=>{this.showSpinner=!0},this.scope,r.WAIT_TIME_TO_SHOW_SPINNER),this.scope.$watch("::panelDataLoaded()",e=>{e&&this.dataLoaded()})}dataLoaded(){this.timeout.cancel(this.spinnerTimeout),this.showSpinner=!1}}r.$inject=["scope",s.b],r.WAIT_TIME_TO_SHOW_SPINNER=1e3;class c{constructor(e){this.$injector=e,this.restrict="E",this.template=o,this.transclude=!0,this.scope={course:"&",panelDataLoaded:"&",titleKey:"@?",title:"@?",buttonOneIcon:"@",buttonOneCallback:"&",buttonOneAriaLabel:"@",buttonOneTitle:"@",buttonTwoIcon:"@",buttonTwoCallback:"&",buttonTwoAriaLabel:"@",buttonTwoTitle:"@"},this.link=e=>{e.telemetryPanelHeader=this.$injector.instantiate(r,{scope:e})}}}c.$inject=["$injector"],i.module(a,[]).directive("bbTelemetryPanelHeader",["$injector",e=>e.instantiate(c)])},Et3n:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),s=n("0JpG"),o=n("yC9S"),a=n("dL5/");const r="ultra.directives.group.group-count";let c=class{$onInit(){}isSelfEnrollment(){return!!(this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0)&&this.content.selfEnrollmentGroups.some(e=>e.group&&!e.group.groupSetId)}};c=Object(i.__decorate)([Object(o.a)({moduleName:r,componentName:"bbGroupCount",template:a,bindings:{content:"<"},requireModules:[s.moduleName]})],c)},GkCm:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-main-menu",use:"icon-small-main-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-main-menu"><path d="M1 3h14M15 8H1M1 13h14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"H/mg":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("Llzl"),s=n("ERkP"),o=n("1ZbL"),a=n("Dz4E");const r="ultra.components.directives.react-toolkit.contextual-menu";class c extends s.Component{render(){return this.props.show?s.createElement(a.ContextualMenu,{items:this.props.items,directionalHint:this.props.directionalHint,target:document.getElementById(this.props.targetId),onDismiss:this.props.dismiss,labelElementId:this.props.ariaLabelledby,analyticsId:this.props.analyticsId}):null}}const l={Class:c,bindingNames:["items","targetId","show","dismiss","directionalHint"],attributes:["ariaLabelledby","analyticsId"]};i.module(r,[]).component("bbUiContextualMenu",Object(o.a)(l))},HE6t:function(e,t){e.exports='<div ng-if="$ctrl.isInitialized && $ctrl.isPeerGrading" class="content-item-peer-assessment">\n  <div ng-if="$ctrl.isPeerGradingConfigured" class="peer-review-due-date">\n    <bb-svg-icon size="small" icon="peer-review"></bb-svg-icon>\n    <span bb-translate class="content-peer-review-due-date-label"\n          translate-values="{ peerReviewsNumber: $ctrl.peerReviewsPerStudent, datetime: $ctrl.peerReviewDueDate }">\n        components.directives.content-item-base.peer-review-due-date\n      </span>\n    <div ng-if="::$ctrl.contextCourseMembership.isStudentMembership()" class="tooltip-container">\n      <bb-ui-content-item-peer-assessment-tooltip tooltip-title="::$ctrl.getTooltipMessage()">\n      </bb-ui-content-item-peer-assessment-tooltip>\n    </div>\n  </div>\n</div>\n'},HdfQ:function(e,t,n){"use strict";n("i1PZ"),n("ja1T");var i=n("5iHu"),s=n("Llzl"),o=n("7/CN"),a=n("H8CZ"),r=n("lEL+"),c=n("0JpG"),l=n("nsO7"),d=n("yC9S");n.d(t,"a",(function(){return u}));const u="bbSlick";class p{constructor(e,t){this.timeout=e,this.localize=t,this.restrict="AE",this.scope={initOnload:"@",data:"=",currentIndex:"=?",accessibility:"@",arrows:"@",asNavFor:"@",autoplay:"@",autoplaySpeed:"@",centerMode:"@",centerPadding:"@",cssEase:"@",dots:"@",draggable:"@",easing:"@",fade:"@",focusOnSelect:"@",disableOffScreenSlides:"&?",hideOffScreenSlides:"&?",infinite:"@",init:"&",initialSlide:"=?",lazyLoad:"@",manualInit:"=",nextArrow:"@",onBeforeChange:"&?",onAfterChange:"&?",onInit:"&?",onReInit:"&?",onUpdate:"&",pauseOnHover:"@",prevArrow:"@",responsive:"=",slickHandle:"=",slide:"@",slidesToShow:"=?",slidesToScroll:"@",speed:"@",swipe:"@",touchMove:"@",touchThreshold:"@",toUpdateSlide:"=",vertical:"@",useCss:"@"},this.link=(e,t,n)=>{let s=!1,r=!1;const c=i(t),u=this.localize;e.$on("slickRefresh",()=>{c.slick("unslick"),c.init=b()}),e.$on("$destroy",()=>{r&&this.timeout(()=>{c.slick("unslick")},e,500)});const p=i(e.prevArrow),h=i(e.nextArrow);function m(e){e.slideCount<=e.options.slidesToShow&&(e.slideCount-1===e.currentSlide&&h.addClass("slick-disabled"),0===e.currentSlide&&p.addClass("slick-disabled")),p.hasClass("slick-disabled")?p.attr("disabled","disabled"):p.removeAttr("disabled"),h.hasClass("slick-disabled")?h.attr("disabled","disabled"):h.removeAttr("disabled")}function b(){t.on("beforeChange",(function(n,i,s,a){e.onBeforeChange&&(e.onBeforeChange({$event:n,$sl:i,$oldIndex:s,$newIndex:a}),e.$apply()),e.hideOffScreenSlides&&e.hideOffScreenSlides()?t.find(".slick-slide").children().show():e.disableOffScreenSlides&&e.disableOffScreenSlides()&&o.i(t.find(".slick-slide"))})),t.on("afterChange",(function(n,i,s){m(i),e.onAfterChange&&e.onAfterChange({$event:n,$sl:i,$newIndex:s});const a=t.find(".slick-slide");if(a.removeAttr("aria-hidden"),e.hideOffScreenSlides&&e.hideOffScreenSlides()?a.not(".slick-active, .slick-current").children().hide():e.disableOffScreenSlides&&e.disableOffScreenSlides()&&o.f(a.not(".slick-active, .slick-current")),!e.$$phase&&!e.$root.$$phase)return e.$apply((function(){return e.currentIndex=s}));e.currentIndex=s})),t.on("init",(function(n,s){e.onInit&&e.onInit(),m(s);const a=t.find(".slick-slide");if(a.removeAttr("aria-hidden"),e.hideOffScreenSlides&&e.hideOffScreenSlides()?a.not(".slick-active, .slick-current").children().hide():e.disableOffScreenSlides&&e.disableOffScreenSlides()&&o.f(a.not(".slick-active, .slick-current")),i(window).trigger("resize"),r=!0,e.toUpdateSlide)return e.toUpdateSlide=!1,s.slideHandler(e.currentIndex,!1,!0)})),e.onReInit&&t.on("reInit",(function(t,n){e.onReInit()})),c.slick({accessibility:"false"!==e.accessibility,arrows:"false"!==e.arrows,asNavFor:e.asNavFor,autoplay:"true"===e.autoplay,autoplaySpeed:null!=e.autoplaySpeed?parseInt(e.autoplaySpeed,10):3e3,centerMode:"true"===e.centerMode,centerPadding:e.centerPadding||"50px",cssEase:e.cssEase||"ease",dots:"true"===e.dots,draggable:"true"===e.draggable,easing:e.easing||"linear",fade:"true"===e.fade,focusOnSelect:"true"===e.focusOnSelect,infinite:"false"!==e.infinite,initialSlide:null!=e.initialSlide?parseInt(e.initialSlide,10):0,lazyLoad:e.lazyLoad||"ondemand",nextArrow:i(e.nextArrow),pauseOnHover:"false"!==e.pauseOnHover,prevArrow:i(e.prevArrow),responsive:e.responsive,rtl:u.isRTL(e),slide:e.slide||"div",slidesToShow:e.slidesToShow,slidesToScroll:null!=e.slidesToScroll?parseInt(e.slidesToScroll,10):1,speed:null!=e.speed?parseInt(e.speed,10):300,swipe:"false"!==e.swipe,touchMove:"false"!==e.touchMove,touchThreshold:e.touchThreshold?parseInt(e.touchThreshold,10):5,useCSS:"false"!==e.useCss,vertical:"true"===e.vertical}),t.find(".slick-list").removeAttr("aria-live");d.b.OnWindow("resize",()=>{c.get(0).slick&&i(window).width()===c.get(0).slick.windowWidth&&c.get(0).slick.setPosition()},e)}const g=()=>{c.get(0).slick&&c.get(0).slick.reinit(),c.slick("unslick"),c.find(".slick-list").remove(),e.onUpdate(),this.timeout(()=>{b(),e.$emit("update-slick-refresh")},e,0,!1)};if(e.slickHandle&&(e.slickHandle=c),e.manualInit)c.init=b,c.refresh=g;else{if(!e.initOnload)return b();s=!1,e.$watch("data",(e,t)=>{null!=e&&(s?g():(b(),s=!0))})}d.b.OnWindow("bb-offcanvas-breakpoint-large bb-offcanvas-breakpoint-medium bb-offcanvas-breakpoint-small",()=>{a.b(i(window),e=>{var t;const n=e.target,i=Object(l.isString)(null==n?void 0:n.className)?null==n?void 0:n.className:(null===(t=null==n?void 0:n.classList)||void 0===t?void 0:t.value)||"";if(!e.data.noTransitions&&-1===i.indexOf("bb-offcanvas-panel"))return!1;c.get(0).slick&&c.get(0).slick.setPosition()})},e)}}}p.$inject=[r.b,c.serviceName],s.module(u,[r.a]).directive("bbSlick",["$injector",e=>e.instantiate(p)])},IgL1:function(e,t){e.exports='<button bb-complex-tooltip=""\n  enhanced-tooltip="true"\n  tooltip-position="top-center"\n  tooltip-disable-on-mouse-over="false"\n  tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n  tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n  tooltip-scope="buttonComplexTooltip.$scope"\n  tooltip-template="{{ buttonComplexTooltip.getToolTipTemplate() }}"\n  tooltip-open-on-activation="true"\n  tooltip-auto-update="true"\n  tooltip-always-underline="false"\n  analytics-id="components.directives.content-item-base.conditionalRelease.date.link"\n  tooltip-center-content="true"\n  title="components.directives.grade.grader-column.statuses.restricted">\n  <bb-svg-icon size="small" icon="information" status="default"></bb-svg-icon>\n</button>\n'},J3aO:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n("D57K"),s=n("VAMW"),o=n("aHpC");const a="menuCloserService",r="ultra.services.menuCloser";class c{constructor(e){this.service=e,this.key=s.TransitService.AngularMenuCloserService}closeAnyOpenAngularMenus(){this.service.closeAnyOpenAngularMenus()}}let l=class{constructor(e){this.$rootScope=e,Object(s.registerService)(new c(this))}closeAnyOpenAngularMenus(){const t=e(".f-open-dropdown");t.length>0&&window.Foundation.libs.dropdown.close(t),this.$rootScope.$broadcast("foundation-offcanvas-close-panel")}};l=Object(i.__decorate)([Object(i.__param)(0,Object(o.b)("$rootScope"))],l);class d extends l{}angular.module(r,[]).service(a,l)}).call(this,n("5iHu"))},J8YL:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options" data-show-add-options ng-click="addContentButton.toggleMenu()"\n     ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n     aria-expanded="{{addContentButton.isMenuVisible}}" aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n     aria-label="{{addContentButton.addButtonAriaLabel}}"\n     ng-focus="addContentButton.showButton()" ng-blur="addContentButton.hideButton()"\n     analytics-id="components.directives.add-content-button.assignment.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        allow-multiple="true"\n        monitor-leave="true"\n        disable-drag="disableDrag && disableDrag()"\n        target-div="{{\'#\' + fileListViewId}}"\n        hide-transclude-during-upload="false"\n        is-third-party-upload="false"\n        disallow-folder-uploads="true"\n        skip-zip-file-check="true"\n        ignored-states="::ignoredStates()"\n        position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.fileUpload.link" >\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon><span bb-translate analytics-id="course.content.buildContentArea.addFiles">course.content.buildContentArea.addFiles</span>\n        </a>\n      </bb-file-upload>\n    </li>\n    <li ng-if="!addContentButton.isMobile">\n      \x3c!-- Skip zip file check, assignment does not support unzip file(LRN-101238) --\x3e\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}"\n                      position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           primary-key="fileListViewId"\n           is-flatten="false"\n           attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n           ignored-states="::ignoredStates()"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.oneDrive.link">\n          <div>\n            <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n          </div>\n        </a>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},Jwnl:function(e,t){e.exports='\x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n<button ng-if="!contentItemBase.isEngagementOutline()"\n        class="content-title" ng-class="{\'name-middle\': contentItemFolder.shouldAlignMiddle()}"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-expanded="{{content.ui.isOpen}}"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        bb-translate-attrs="{\'aria-label\':\'components.directives.content-item-base.aria-label.toggle-folder\'}"\n        translate-attrs-values="{folderName: content.title}"\n        analytics-id="content.item.folder.toggleFolder.button"\n        aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n        tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></button>\n<button ng-if="contentItemBase.isEngagementOutline()"\n        class="content-title name"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        aria-expanded="{{content.ui.isOpen}}"\n        analytics-id="content.item.folder.engagementOutline.toggleFolder.button"><span>{{ content.title }}</span></button>\n'},Jygx:function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var s,o,a=0,r=0,c="";o=t.charAt(r++);~o&&(s=a%4?64*s+o:o,a++%4)?c+=String.fromCharCode(255&s>>(-2*a&6)):0)o=n.indexOf(o);return c}},KXuk:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-complete",use:"icon-small-complete-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-complete"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8l2 3 4-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"L+81":function(e,t,n){"use strict";var i=n("D57K"),s=(n("zhNR"),n("XPgl"),n("lx16")),o=n("Llzl"),a=n("kC07"),r=n("D8d/"),c=n("lEL+"),l=n("DnQR"),d=(n("lwNT"),n("vcLy"),n("KXuk"),n("CuGX"),n("9OUN")),u=n("Sa5G"),p=n("0JpG"),h=n("MKP7"),m=n("JNtI"),b=n("Ocaa"),g=n("pIXs"),v=n("aTRN"),f=n("nYZ0"),y=n("Qbdf"),C=n("w9Zy"),w=n("TnpK"),S=n("X455"),I=n("oi1r"),k=n("jhBu"),D=n("1ZbL");const T="ultra.features.course.content.banners.bbForcedSequenceWarningBanner",x={Class:n("AuQm").ForcedSequenceWarningBanner,withThemeProvider:!0,renderLocalized:!0};o.module(T,[]).component("bbForcedSequenceWarningBanner",Object(D.a)(x));var O=n("VUvS"),A=n("aHpC"),E=n("e6jQ"),M=n("BLb8"),L=n("nmzr"),P=n("/5AG"),$=n("Htol"),B=n("Y+9S"),j=n("IbyE"),G=n("m5Qz"),R=n("tBL6");let N=class{constructor(e,t,n,i,s,o,a,r,c,l,d,p,h,m,b){var g;this.scope=e,this.$rootScope=t,this.element=n,this.attrs=i,this.localizeService=s,this.$q=o,this.contentService=a,this.offcanvasService=r,this.timeout=c,this.ultraState=l,this.contextCourseMembership=d,this.entitlementService=h,this.$ngRedux=m,this.contextCourse=b,this.lmTitlePlaceholder=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.learning-module.base-item.title-placeholder"}),this.description="",this.controlId=Object(E.a)(),this.childrenRefresher=new R.a(this.$q),this.conditionalRelease=p.instantiate(v.a,{scope:e}),e.content.title||(e.content.title=this.lmTitlePlaceholder),e.content.description=null!==(g=e.content.description)&&void 0!==g?g:"",this.scope.$on("refresh-conditional-release-rules",(e,t)=>{this.scope.content.id===t.id&&this.conditionalRelease.getConditions(t)}),this.scope.$on("bb-update-CR-tooltip",(e,t,n,i)=>{t&&(this.rulesCriteria&&this.rulesCriteria.gradeColumnId)===t.id&&this.conditionalRelease.getConditions(this.scope.content,n,i)}),(e.content.isConditionalReleaseLocked()||e.content.isConditionalRelease()||e.content.isForcedSequenceModule())&&this.conditionalRelease.getConditions(e.content),this.entitlementService.hasCourseEntitlement(u.e.ModifyContent,this.scope.content.courseId).then(e=>{this.entitledToModifyContent=e}),this.scope.$on($.b,(t,n)=>{this.childrenRefresher.refreshChildren(n,e.content,this.contextCourseMembership.isStudentMembership())}),this.courseId=this.scope.content.courseId||this.ultraState.params.courseId,this.subscribeToReduxChanges(),!this.courseProgressConfiguration&&this.retrieveCourseProgressConfiguration&&this.retrieveCourseProgressConfiguration({courseId:this.courseId}),Object(M.b)(this.scope,(e,t)=>{this.scope.content.isConditionalReleaseLocked()&&this.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(M.c)(this.scope,t)}),Object(M.a)(this.scope,e=>{this.scope.content.isConditionalReleaseLocked()&&Object(M.c)(this.scope)})}deleteContent(){this.scope.$emit("deleteContent",this.scope.content)}getOverflowMenu(){return[{icon:"draw",labelKey:"global.edit",show:()=>this.scope.content.canEdit(),onClick:this.edit.bind(this)},{icon:"class-pulse-future",uniqueId:"content-progress",labelKey:this.contextCourse.course.isOrganization?"components.directives.content-item-base.overflow-menu.content-progress-org":"components.directives.content-item-base.overflow-menu.content-progress",show:()=>this.canViewProgress(),onClick:()=>{this.ultraState.goPeekState(L.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,{id:this.scope.content.id,courseId:this.courseId})}},{icon:"trash",labelKey:"global.delete",show:()=>this.scope.content.canDelete(),onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>this.getDeleteConfirmationKeyAndShowType().then(e=>{const t=e.confirmationKey.replace(/^resource\//,"");return this.$q.when(m.a(t))})}}]}edit(){this.ultraState.goPeekState(L.ContentRoutes.EDIT_LEARNING_MODULE_PEEK_PANEL,{id:this.scope.content.id})}getDeleteConfirmationKeyAndShowType(){return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then(e=>({confirmationKey:this.scope.content.ui.deleteConfirmationKey,showType:this.scope.content.ui.modalShowType}))}canViewProgress(){var e;return!!(null===(e=this.courseProgressConfiguration)||void 0===e?void 0:e.progressTrackingEnabled)&&this.entitlementService.isEntitled(P.CourseProgressEntitlements.ViewProgressInformation,this.courseId)}subscribeToReduxChanges(){const e=this.$ngRedux.connect(e=>({courseProgressConfiguration:j.select.courseProgress.getCourseProgressConfiguration(e,this.courseId)}),e=>Object(d.bindActionCreators)({retrieveCourseProgressConfiguration:j.actions.courseProgress.loadCourseProgressConfiguration},e))(this);this.scope.$on("$destroy",e)}toggleLM(){var e,t;null===(t=(e=this.scope).toggleFunc)||void 0===t||t.call(e),this.scope.content.ui.isOpen&&this.fetchProgress().then(()=>{const e={type:B.MessageType.LearningModuleOpened,status:B.MessageStatus.Success,contentId:this.scope.content.id};Object(B.sendMessageToMobile)(e)})}isCourseCompletedAndInInstructorView(){return!this.scope.content.canEdit()&&this.entitledToModifyContent}get canOpenConditionalRelease(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)}openConditionalRelease(){this.ultraState.goPeekState(L.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,{contentId:this.scope.content.id})}getNeighborReviewState(){return P.NeighborContentReviewState.None}shouldShowReviewStateIcon(){var e;return null===(e=this.scope.content.permissions)||void 0===e?void 0:e.canViewReviewState}onChangeVisibility(){this.scope.content.visibility=this.contentService.determineVisibility(this.scope.content.isAvailable);this.scope.content.withParams({fields:"id"}).$save(["isAvailable","isPartiallyVisible","adaptiveReleaseRules"]).$asPromise().then(()=>{this.$rootScope.$broadcast("content-update",this.scope.content)})}fetchProgress(){return this.scope.content.$fetch({expand:"hasProgressed"}).$asPromise().then(e=>{this.scope.content=e})}shouldShowForcedSequenceWarningBanner(){return this.scope.content.canEdit()&&this.scope.content.isForcedSequenceModule()&&this.scope.isOpen&&!this.scope.content.isHiddenFromStudents()&&this.scope.content.hasProgressed}};N=Object(i.__decorate)([Object(i.__param)(0,Object(A.b)("scope")),Object(i.__param)(1,Object(A.b)("$rootScope")),Object(i.__param)(2,Object(A.b)("element")),Object(i.__param)(3,Object(A.b)("attrs")),Object(i.__param)(4,Object(A.b)(p.serviceName)),Object(i.__param)(5,Object(A.b)("$q")),Object(i.__param)(6,Object(A.b)(f.f)),Object(i.__param)(7,Object(A.b)(C.e)),Object(i.__param)(8,Object(A.b)(c.b)),Object(i.__param)(9,Object(A.b)(w.d)),Object(i.__param)(10,Object(A.b)(S.d)),Object(i.__param)(11,Object(A.b)("$injector")),Object(i.__param)(12,Object(A.b)(k.b)),Object(i.__param)(13,Object(A.b)("$ngRedux")),Object(i.__param)(14,Object(A.b)(y.e))],N);class _{constructor(e){this.$injector=e,this.restrict="E",this.template=O,this.scope={content:"=",canToggle:"&",toggleFunc:"&",canMove:"=",contextArea:"=",isOpen:"="},this.link=(e,t,n)=>{e.baseItem=this.$injector.instantiate(N,{scope:e,element:t,attrs:n})}}}_.$inject=["$injector"],o.module("ultraUi.components.directives.content.learningModule.learningModuleBaseItem",[h.a,g.a,f.d,b.a,C.d,c.a,w.b,I.a,k.a,T,G.a]).directive("bbLearningModuleBaseItem",["$injector",e=>e.instantiate(_)]);var F=n("zGdY");n.d(t,"a",(function(){return z}));const z="ultra.directives.folder";let H=class{constructor(e,t,n,i){this.scope=e,this.element=t,this.timeout=n,this.contextCourseMembership=i,this.showEmptyMenu=!0,this.showMenuOverride=!1,this.showOutlineOverride=!1,this.isOpen=!1,this.toggleLabelKey="components.directives.folder.aria-label.open",this.initialChildrenLength=0,this.FOLDER_CONTENTS_SELECTOR=".folder-contents",this.contextArea=e.contextArea,this.loadMoreChildren=e.loadMoreChildren,this.contents=e.contents,this.content.ui?this.content.ui.isOpen=!1:this.content.ui={isOpen:!1},e.$on("toggle-folder",(e,t)=>{this.canToggle()&&t===this.content&&this.toggleFolder()}),e.$on("toggle-folder-by-id",(t,n)=>{this.canToggle()&&n===this.content.id&&(this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.toggleFolder():e.$apply(()=>{this.toggleFolder()}))}),e.$on("close-folder-immediately-by-id",(e,t)=>{this.isOpen&&this.canToggle()&&t===this.content.id&&this._closeFolderImmediately()}),e.$on("bb-drag-start",()=>{this.isOpen&&this.canToggle()&&(null==this.content.children||0===this.content.children.length)&&this._closeFolderImmediately()}),e.$on("close-all-add-menus",(e,t)=>{if(this.isOpen&&(null==this.content.children||0===this.content.children.length)&&this.content.id!==t){if(this.content.isLearningModule())return;this.toggleFolder()}}),e.$on("showContentImportProgress",(t,n,i)=>{this.content.id!==i||0!==this.content.children.length||this.showOutlineOverride||(this.showOutlineOverride=!0,this.timeout(()=>{this.scope.$broadcast("showContentImportProgress",n,i)},e))}),e.$on("keyboard-drag-move",(e,t)=>{this.content.id+"blank"===t?this.showEmptyMenu=!1:this.showEmptyMenu=!0}),e.$on("keyboard-drag-lost-focus",()=>{this.showEmptyMenu=!0}),e.$on("keyboard-drag-end",()=>{this.showEmptyMenu=!0})}_closeFolderImmediately(){this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).hide(),this.isOpen=!1,this.content.ui.isOpen=!1):this.scope.$apply(()=>{this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).hide(),this.isOpen=!1,this.content.ui.isOpen=!1})}toggleFolder(){this.isOpen||null!=this.content.children&&0!==this.content.children.length||this.loadMoreChildren(this.content).$then(()=>{var e;this.content.children&&0===this.content.children.length&&(null===(e=this.scope.content.permissions)||void 0===e?void 0:e.canHaveReviewState)&&this.scope.content.state!==F.ContentReviewState.Completed&&this.scope.content.updateState(F.ContentReviewState.Completed,!0)}),this.content.children&&(this.isOpen=this.content.ui.isOpen=!this.content.ui.isOpen,this.content.children.$then(()=>{this.initialChildrenLength=this.content.children.length,0===this.content.children.length?(this._calculateDurationAndToggle(),this.showMenuOverride=!0,(this.isOpen||this.isOpen&&this.content.isLearningModule())&&this.scope.$root.$broadcast("close-all-add-menus",this.content.id)):this.timeout(()=>{this._calculateDurationAndToggle(),this.showMenuOverride=!1},this.scope),this.clearWatcher&&this.clearWatcher(),this.clearWatcher=this.scope.$watch(()=>this.content.children&&this.content.children.length,(e,t)=>{this.showMenuOverride=0===e,0===e&&e!==t&&this.isOpen&&this.scope.$root.$broadcast("close-all-add-menus",this.content.id),null==e&&this.isOpen&&(this._closeFolderImmediately(),this.toggleFolder())})}),this.toggleLabelKey=this.isOpen?"components.directives.folder.aria-label.close":"components.directives.folder.aria-label.open")}_calculateDurationAndToggle(){const e=this.isOpen?1e3:2e3,t=this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).outerHeight(),n=Math.round(1.17*t),i=Math.min(e,n);this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).slideToggle(i)}canToggle(){return this.content.canEdit()||!this.content.isRestricted()}get content(){return this.scope.content}isProgressTrackingStateShown(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canViewReviewState}};H=Object(i.__decorate)([Object(i.__param)(0,Object(A.b)("scope")),Object(i.__param)(1,Object(A.b)("element")),Object(i.__param)(2,Object(A.b)(c.b)),Object(i.__param)(3,Object(A.b)(S.d))],H);class V{constructor(e){this.$injector=e,this.restrict="E",this.scope={content:"=",contextArea:"=",canCreate:"=",contents:"=",canMove:"=",loadMoreChildren:"=",nextContentId:"=?",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=",previousContentId:"=?",canCopyImport:"=?",rootContent:"&?"},this.compile=e=>({pre:(e,t)=>{e.folder=this.$injector.instantiate(H,{scope:e,element:t})}}),this.template=l}}V.$inject=["$injector"],o.module(z,[a.b,r.a,s.a,c.a,"ultraUi.components.directives.content.learningModule.learningModuleBaseItem"]).directive("bbFolder",["$injector",e=>e.instantiate(V)])},LFd7:function(e,t,n){"use strict";var i=n("D57K"),s=n("X455"),o=n("Sa5G"),a=n("aHpC"),r=n("yC9S"),c=n("9hUw"),l=n("0JpG"),d=n("Llzl"),u=n("ERkP"),p=n("1ZbL"),h=n("/n7R"),m=n("0x+l");const b="ultra.components.directives.content.contentItem.contentItemType.contentItemPeerAssessment.tooltip";class g extends u.Component{render(){return u.createElement(h.AnalyticsTooltip,{placement:"top",title:this.props.tooltipTitle,"aria-label":this.props.tooltipTitle,analyticsId:"components.directives.content-item-base.content-item-peer-assessment.tooltip.button"},u.createElement("button",{className:"peer-review-info-tooltip"},u.createElement(m.Information,null)))}}const v={Class:g,bindingNames:["tooltipTitle"]};d.module(b,[]).component("bbUiContentItemPeerAssessmentTooltip",Object(p.a)(v));var f=n("HE6t");n.d(t,"a",(function(){return y}));const y="ultra.components.directives.content.contentItem.contentItemType.contentItemPeerAssessment";let C=class{constructor(e,t,n,i){this.$scope=e,this.contextCourseMembership=t,this.peerReviewService=n,this.localize=i}$onInit(){var e;this.$scope.contentItemPeerAssessment=this,o.f.TestLink.isEqualTo(null===(e=this.content)||void 0===e?void 0:e.contentHandler)?this.peerReviewService.getOrCreatePeerContentFromContent(this.content).then(e=>{this.peerReviewContentObject=e,this.isInitialized=!0}):this.isInitialized=!0}getTooltipMessage(){return this.localize.translateSync({key:"components.directives.content-item-base.content-item-peer-assessment.peer-review-information-tooltip",locale:this.localize.getLocale(this.$scope)})}get peerReviewsPerStudent(){var e,t;return null!==(t=null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.numOfPeerReviewsToComplete)&&void 0!==t?t:0}get peerReviewDueDate(){var e;return null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.peerReviewDueDate}get isPeerGrading(){var e,t;return null!==(t=null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.peerGrading)&&void 0!==t&&t}get isPeerGradingConfigured(){var e,t;return null!==(t=null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.isPeerGradingConfigured)&&void 0!==t&&t}};C=Object(i.__decorate)([Object(r.a)({moduleName:y,componentName:"bbContentItemPeerAssessment",bindings:{content:"<"},template:f,requireModules:[l.moduleName,c.a,b]}),Object(i.__param)(0,Object(a.b)("$scope")),Object(i.__param)(1,Object(a.b)(s.d)),Object(i.__param)(2,Object(a.b)(c.b)),Object(i.__param)(3,Object(a.b)(l.serviceName))],C)},LecS:function(e,t,n){"use strict";var i=n("Llzl"),s=n("pjml"),o=n("/hmo");n.d(t,"a",(function(){return a}));const a="ultra.directives.lti";class r{constructor(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=o,this.link=(e,t)=>{const n=e.$watch("targetContent.contentHandler",t=>{null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())});!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then(()=>{e.content.description=e.targetContent.description}))}}}r.$inject=[s.m.serviceName],i.module(a,[]).directive("bbLtiLinkItem",["$injector",e=>e.instantiate(r)])},LsET:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return m}));var i=n("nsO7"),s=n("Fvsw"),o=n("lr7J"),a=n("pjml"),r=n("BjFu"),c=n("SoDU"),l=n("lEL+"),d=n("zGdY");const u="ultra.base.grades.controller";class p{constructor(e,t,n,s,o,a){this.$scope=e,this.$q=t,this.context=n,this.timeout=a,this.courses=[],this.graderMemberships={},this.studentMemberships={},this.hasPreviousMemberships=!1,this.upcomingMemberships=[],this.initialIndex=0,this.termCarouselReady=!1,this.termCarousel=Object.create(null),this.coursesInView={},this.coursesNoMore={},this.coursesPrLoad=6,this.isLoading=!0,e.baseGrades=this,this.isLoading=!0;const r=s.getTermsAndMemberships().then(e=>{const t=function(e){return!e.course.ui.isExternal};this.termsAndMemberships={terms:e.terms,memberships:i.filter(e.memberships,t),membershipsByTermId:function(){const n={};return i.each(e.membershipsByTermId,(e,s)=>{n[s]={memberships:i.filter(e.memberships,t)}}),n}()};const n=new c.a(o,this.termsAndMemberships.terms);this.currentTerm=n.currentTerm,this.upcomingTerm=n.upcomingTerm,this.orderMemberships(),this.studentMemberships[this.currentTerm.id]&&(this.studentMemberships[this.currentTerm.id]=this.studentMemberships[this.currentTerm.id].filter(e=>!e.courseIsPrivate())),this.termsToDisplay=this.termsAndMemberships.terms.filter(e=>e.id===this.currentTerm.id||this.termHasCourses(e)&&e.id!==this.upcomingTerm.id),this.initialIndex=this.termsToDisplay.indexOf(this.currentTerm)}),l=t.defer();e.firstSlideCreated=i.once(()=>{l.resolve()}),t.all([r,l.promise]).then(()=>{this.setupTermCarousel(),this.isLoading=!1})}termHasCourses(e){const t=this.termsAndMemberships.membershipsByTermId[e.id];return t&&t.memberships&&t.memberships.length>0}isPreviousTerm(e){return a.Gb.ConstantTermId.CurrentTerm.toString()!==e&&a.Gb.ConstantTermId.UpcomingTerm.toString()!==e}orderMemberships(){this.termsAndMemberships.terms.forEach(e=>{const t=this.termsAndMemberships.membershipsByTermId[e.id];if(t){const n=new h(t.memberships);this.graderMemberships[e.id]=n.teachingMemberships.concat(n.supportingMemberships),this.studentMemberships[e.id]=n.takingMemberships,this.isPreviousTerm(e.id)&&(this.hasPreviousMemberships=!0),this.coursesInView[e.id]=this.coursesPrLoad}})}get currentTermInView(){return e("#body-content .slick-slide.slick-current").attr("data-term-id")}getCoursesByTerm(e){let t=i.take(this.graderMemberships[e]||[],this.coursesInView[e]||0);return this.coursesInView[e]-t.length>0&&(t=t.concat(i.take(this.studentMemberships[e],this.coursesInView[e]-t.length))),t.length<this.coursesInView[e]&&(this.coursesInView[e]=t.length,this.coursesNoMore[e]=!0),t}loadMoreCoursesIntoView(e){if(this.currentTermInView===e&&!0!==this.coursesNoMore[e]){const t=this.$q.defer();this.$scope.$root.$broadcast(o.a,"base-grades-"+e,t.promise),this.timeout(()=>{this.coursesInView[e]+=this.coursesPrLoad,t.resolve(),this.$scope.$digest()},this.$scope,0)}}orderUpcomingMemberships(){if(this.termsAndMemberships.membershipsByTermId[this.upcomingTerm.id]){const e=new h(this.termsAndMemberships.membershipsByTermId[this.upcomingTerm.id].memberships,e=>!e.isStudentMembership());this.upcomingMemberships=e.teachingMemberships.concat(e.supportingMemberships)}}setupTermCarousel(){this.termCarousel.init(),this.termCarouselReady=!0}}p.$inject=["$scope","$q",s.b,r.c,a.Gb.serviceName,l.b];class h{constructor(e,t){this.teachingMemberships=[],this.supportingMemberships=[],this.takingMemberships=[],this.visitingMemberships=[],e.forEach(e=>{t?t(e)&&this.pushMembershipsByCourseRole(e):this.pushMembershipsByCourseRole(e)}),this.teachingMemberships=i.sortBy(this.teachingMemberships,e=>e.course.name),this.takingMemberships=i.sortBy(this.takingMemberships,e=>e.course.name),this.supportingMemberships=i.sortBy(this.supportingMemberships,e=>e.course.name),this.visitingMemberships=i.sortBy(this.visitingMemberships,e=>e.course.name)}pushMembershipsByCourseRole(e){e.courseRole.roleBucket===d.CourseRoleBucket.Teaching?this.teachingMemberships.push(e):e.courseRole.roleBucket===d.CourseRoleBucket.Taking?this.takingMemberships.push(e):e.courseRole.roleBucket===d.CourseRoleBucket.Visiting?this.visitingMemberships.push(e):this.supportingMemberships.push(e)}}class m extends p{}}).call(this,n("5iHu"))},MKP7:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),s=n("7UH7"),o=n("Llzl"),a=n("/KQw"),r=n("0JpG"),c=n("TnpK"),l=n("+4Px"),d=n("e6jQ"),u=n("tecA"),p=n("aHpC");const h="ultra.directives.basicTextEditor";let m=class extends u.a{constructor(e,t,n,i,s,o){super(t,n,i,s,o),this.shouldPreventLineBreaking=!0,t.$on(u.b,()=>{this.updateOriginalValues(),this.isTextTouched=!1}),t.shouldPreventLineBreaking&&(this.shouldPreventLineBreaking=t.shouldPreventLineBreaking())}onKeydown(e){this.shouldPreventLineBreaking&&e.keyCode===l.f&&(e.stopPropagation(),e.preventDefault())}};m.$inject=[],m=Object(i.__decorate)([Object(i.__param)(0,Object(p.b)("$q")),Object(i.__param)(1,Object(p.b)("scope")),Object(i.__param)(2,Object(p.b)("element")),Object(i.__param)(3,Object(p.b)("ctrl")),Object(i.__param)(4,Object(p.b)(r.serviceName)),Object(i.__param)(5,Object(p.b)(c.d))],m);class b{constructor(e){this.$injector=e,this.require=["ngModel"],this.replace=!0,this.restrict="E",this.scope={placeholderKey:"@",placeholderAttrsValues:"@",elementId:"@",readonly:"&",getInputMaxLength:"&?inputMaxLength",onchangeFunc:"&?",onblurFunc:"&?",onFocusFunc:"&",ngModel:"=",fieldRequired:"&?",plainText:"=?",validationMessage:"@?",focusOn:"@?",noValidationMessage:"&?",direction:"&?",shouldPreventLineBreaking:"&?"},this.link=(e,t,n,i)=>{const s=i[0];e.textEditor=this.$injector.instantiate(m,{scope:e,element:t,ctrl:s}),e.elementId||(e.elementId="text-editor-"+d.a())},this.template=s}}b.$inject=["$injector"],o.module(h,[a.a,r.moduleName,c.b]).directive("bbBasicTextEditor",["$injector",e=>e.instantiate(b)])},Mnbc:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-groups",use:"icon-small-groups-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-groups"><path d="M12 15s-1-2-4-2M4 15s1-2 4-2M8 13c1.6569 0 3-1.3431 3-3S9.6569 7 8 7s-3 1.3431-3 3 1.3431 3 3 3zM12 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM1 7s1-2 3-2 3 2 3 2M9 7s1-2 3-2 3 2 3 2M4 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},NEyJ:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},NMEb:function(e,t,n){"use strict";var i=n("Llzl");var s=class{static convertToGrayscale(e){const t=document.createElement("canvas"),n=t.getContext("2d"),i=e.naturalWidth,s=e.naturalHeight;t.width=i,t.height=s,n.drawImage(e,0,0);const o=n.getImageData(0,0,i,s);let a;const r=o.data.length;for(let e=0;e<r;e+=4)a=(o.data[e]+o.data[e+1]+o.data[e+2])/3,o.data[e]=a,o.data[e+1]=a,o.data[e+2]=a;return n.putImageData(o,0,0,0,0,o.width,o.height),t.toDataURL()}};n.d(t,"a",(function(){return o}));const o="ultra.components.directives.imageGrayscale";class a{constructor(e,t,n){this.scope=e,this.element=t,this.attributes=n,"true"===this.attributes.bbImageGrayscale&&c()&&t.one("load",this.onLoadCallback())}onLoadCallback(){return()=>{const e=s.convertToGrayscale(this.element[0]);this.element[0].src=e}}}class r{constructor(){this.restrict="A",this.link=(e,t,n)=>new a(e,t,n)}}function c(){const e=document.documentMode;return 10===e||11===e}const l=i.module(o,[]);c()&&l.directive("bbImageGrayscale",["$injector",e=>e.instantiate(r)])},Ne7M:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-discussion",use:"icon-medium-discussion-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-discussion"><path d="M8 21.4025a10.4446 10.4446 0 01-1.75-.8072L1 22l1.4318-5.2034C1.5217 15.2417 1 13.4318 1 11.5 1 5.701 5.701 1 11.5 1c4.5718 0 8.4611 2.9218 9.9025 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M9 16c0 3.866 3.134 7 7 7 1.3878 0 2.6812-.3803 3.7692-1.0769L23 23l-1.0769-3.2308C22.6197 18.6812 23 17.3878 23 16c0-3.866-3.134-7-7-7s-7 3.134-7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="13" cy="16" r=".5" /><circle cx="16" cy="16" r=".5" /><circle cx="19" cy="16" r=".5" /></symbol>'});s.add(o);e.exports=o},Nyb7:function(e,t){e.exports='<div class="complex-statistic-contents"></div>'},O2ux:function(e,t){e.exports='<div class="element-card tile {{courseColorClass}} base-grades-course-tile" ng-class="{\'base-grades-only-card\': ($parent.$last && $parent.$first), \'active-course\': !previousTerm}">\n  <div class="element-details clearfix">\n    <div class="row grades-header">\n      <div class="columns small-8"  bb-click-to-invoke-child="a.bb-click-target">\n        <span class="course-number">{{course.displayId}}</span>\n\n        <h3 class="subheader">\n          <span ng-if="::previousTerm" title="{{course.displayName}}">{{course.displayName}}</span>\n          <a class="bb-click-target" bb-peek-sref="course.grades({courseId: course.id})"\n             ng-if="::course.isUltra() && !previousTerm" title="{{course.displayName}}"\n             analytics-id="components.directives.grades.studentGrades.ultraCourse.name.link" >{{course.displayName}}</a>\n          <a class="bb-click-target" bb-peek-sref="course.outline({courseId: course.id, legacyUrl: baseGradesStudent.getLegacyUrl()})"\n             ng-if="::!course.isUltra() && !previousTerm" title="{{course.displayName}}"\n             analytics-id="components.directives.grades.studentGrades.legacyCourse.name.link">{{course.displayName}}</a>\n        </h3>\n        <bb-schedule-outline class="schedule" schedule-outline-collection="course.schedule"></bb-schedule-outline>\n      </div>\n      <div class="columns small-4 current-grade overall-grade-ftue-target">\n        <bb-telemetry-link ng-if="::course.canAccess()" course-id="course.id" context-type="\'baseGrades\'"></bb-telemetry-link>\n        \x3c!--Current Grade--\x3e\n        <div bb-guidance-target component-key="{{\'components.directives.grade.base-grades-student.grade.ftue\'+ course.id}}">\n          <a bb-peek-sref="::baseGradesStudent.navigateToGradePanel()"\n             bb-translate-attrs="{title: \'components.directives.grade.base-grades-student.grade.current\'}"\n             ng-if="!!baseGradesStudent.externalGrade"\n             class="no-underline"\n             analytics-id="components.directives.grades.studentGrades.grade.link">\n            <bb-display-grade-pill grade="baseGradesStudent.externalGrade"\n                                   column="baseGradesStudent.externalGrade.column"></bb-display-grade-pill>\n          </a>\n          <bb-guidance ng-if="!!baseGradesStudent.externalGrade && displayFtue"\n                       alwaysShow="true" component-key="{{\'components.directives.grade.base-grades-student.grade.ftue\'+ course.id}}"\n                       class="guidance-element-overlay push-right overall-grade-ftue">\n            <span bb-translate>components.directives.grade.base-grades-student.grade.ftue</span>\n          </bb-guidance>\n        </div>\n      </div>\n    </div>\n\n    \x3c!--empty state when nothing has been graded or even assigned--\x3e\n    <div class="row" ng-if="!baseGradesStudent.hasGradeItems">\n      <div class="columns small-12 base-grades-empty-element">\n        <div class="no-grades base-grades-empty-state text-center">\n          <p class="main" bb-translate>\n            components.directives.grade.base-grades-student.emptyTextHeader\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="baseGradesStudent.hasGradeItems">\n      <div class="recent-upcoming" ng-hide="baseGradesStudent.showAllGrades">\n        \x3c!--Student Recent Grades--\x3e\n        <h4 class="section-title" ng-if="baseGradesStudent.grades.recent.length" bb-translate>components.directives.grade.base-grades-student.grade.recent</h4>\n\n        <bb-student-column ng-class="{\'last-tabular-row-container\':$last}"\n                           ng-repeat="gradeDetail in baseGradesStudent.grades.recent"\n                           display-ftue="{{$first && displayFtue}}" previous-term="{{previousTerm}}"></bb-student-column>\n\n        \x3c!--Recent Empty Text--\x3e\n        <div class="row" ng-if="!baseGradesStudent.grades.recent.length">\n          <div class="columns small-12 base-grades-empty-element">\n            <div class="base-grades-empty-state text-center">\n              <p class="main" bb-translate>\n                components.directives.grade.base-grades-student.grade.recentEmptyHeader</p>\n            </div>\n          </div>\n        </div>\n\n        \x3c!--Whats Next--\x3e\n        <h4 class="section-title" ng-if="baseGradesStudent.grades.upcoming.length" bb-translate>components.directives.grade.base-grades-student.grade.upcoming</h4>\n\n        <bb-student-column ng-class="{\'last-tabular-row-container\':$last}"\n                           ng-repeat="gradeDetail in baseGradesStudent.grades.upcoming"\n                           display-ftue="{{displayFtue && $first}}" previous-term="{{previousTerm}}"></bb-student-column>\n      </div>\n\n      \x3c!--All Grades--\x3e\n      <div class="all-grades" ng-if="baseGradesStudent.showAllGrades">\n        <bb-student-column ng-class="{\'last-tabular-row-container\':$last}"\n                           ng-repeat="gradeDetail in baseGradesStudent.grades.all"\n                           display-ftue="{{displayFtue && $first}}" previous-term="{{previousTerm}}"></bb-student-column>\n      </div>\n\n      <div class="row">\n        <div class="columns small-12 grades-toggle-wrapper">\n          \x3c!--View all link--\x3e\n          <a ng-if="!previousTerm"\n             bb-peek-sref="::baseGradesStudent.getViewAllCourseworkPeekRef()"\n             class="grades-toggle right"\n             aria-expanded="{{!baseGradesStudent.showAllGrades ? false : true}}"\n             bb-translate-attrs="{\'aria-label\': \'components.directives.grade.base-grades-student.aria-label.viewAll\'}"\n             translate-attrs-values="{courseName: course.displayName, count: baseGradesStudent.totalNumberOfGradeItems}"\n             analytics-id="components.directives.grades.studentGrades.viewAll.link">\n            \x3c!--View all coursework--\x3e\n            <span ng-hide="baseGradesStudent.showAllGrades" bb-translate\n                  translate-values="{ count: baseGradesStudent.totalNumberOfGradeItems }">\n                components.directives.grade.base-grades-student.viewAll\n            </span>\n            \x3c!--Hide--\x3e\n            <span ng-show="baseGradesStudent.showAllGrades" bb-translate>components.directives.grade.base-grades-student.hide</span>\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},Ocaa:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));n("0lMW"),n("gORw");var i=n("Llzl"),s=n("nbDY"),o=n.n(s),a=n("0JpG"),r=n("2a+M"),c=n("+4Px"),l=n("pjml"),d=n("lEL+"),u=n("GbAM"),p=n("Qbdf"),h=n("nYZ0"),m=n("W6wm"),b=n("J3aO");const g="ultra.components.directives.bbDragHandle";class v extends o.a{}v.Vertical=new v("vertical"),v.Horizontal=new v("horizontal"),v.Omnidirectional=new v("omnidirectional");class f{constructor(t,n,i,s,o,a,r){this.$rootScope=t,this.bbLocalizeService=n,this.dragDropService=i,this.timeout=s,this.currentCourseService=o,this.contentService=a,this.menuCloserService=r,this.bbDragMoveTimeoutId=null,this.scope={dragItemId:"@",dragItemName:"@",dragItemType:"@",dragDirection:"@?",dragItemContext:"@?"},this.restrict="A",this.link=(t,n,i)=>{this.dragDirection=v.parse(t.dragDirection)||v.Vertical,this.dragDropService.currentDragContext=t.dragItemContext,e(n).parent().attr("role","application"),n.on("mousedown",i=>{function s(e){e.stopImmediatePropagation()}i.preventDefault(),document.addEventListener("click",s,!0),this.dragStart(i,n,t),e(document).on("mousemove.reorder",e=>{this.dragMove(e,t)}),e(document).on("mouseup.reorder",i=>{this.dragEnd(i,n),e(document).off("mousemove.reorder"),e(document).off("mouseup.reorder"),n.on("$destroy",()=>{document.removeEventListener("click",s,!0)}),this.timeout(()=>{document.removeEventListener("click",s,!0)},t,0,!1)})}),n.on("keydown",n=>{if(n.stopPropagation(),n.keyCode===c.f||n.keyCode===c.t)if(n.preventDefault(),this.dragDropService.isKeyboardDragging){const n=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-stopped",noWrap:!0});this.$rootScope.$broadcast(u.a,n),e(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-end")}else{this.dragDropService.isKeyboardDragging=!0,this.dragDropService.currentDragId=t.dragItemId,this.dragDropService.currentDragType=t.dragItemType,this.contentHasFolderChild(t),this.dragDropService.currentDropTargetId=t.dragItemId,this.dragDropService.positionBefore=t.dragItemId,e(document.body).addClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-start");const n=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-started",params:{itemName:t.dragItemName},noWrap:!0});this.$rootScope.$broadcast(u.a,n)}else if(n.keyCode===c.v)n.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-up");else if(n.keyCode===c.d)n.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-down");else if(n.keyCode===c.s)n.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-right");else if(n.keyCode===c.j)n.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-left");else if(n.keyCode===c.g&&(n.preventDefault(),this.dragDropService.isKeyboardDragging)){const n=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-canceled"});this.$rootScope.$broadcast(u.a,n),e(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-cancel")}}),n.on("blur",()=>{this.dragDropService.isKeyboardDragging&&(e(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-cancel"))});const s=e=>{this.dragStart(e,n,t)},o=e=>{this.dragMove(e,t)},a=e=>{this.dragEnd(e,n)},r=()=>{this.dragCancel()};n[0].addEventListener("touchstart",s,!1),n[0].addEventListener("touchmove",o,!1),n[0].addEventListener("touchend",a,!1),n[0].addEventListener("touchcancel",r,!1),t.$on("$destroy",()=>{n[0].removeEventListener("touchstart",s,!1),n[0].removeEventListener("touchmove",o,!1),n[0].removeEventListener("touchend",a,!1),n[0].removeEventListener("touchcancel",r,!1)})}}contentHasFolderChild(e){if(l.p.ContentHandler.Folder.isEqualTo(e.dragItemType)&&!(()=>m.a.Discussions===this.dragDropService.currentDragContext)()){const e=l.p.ContentRootNode.ROOT,t=this.currentCourseService.course,n=this.contentService.findRootNode(t,e);this.contentService.getContentInContentTree(n,t.courseId,this.dragDropService.currentDragId).then(e=>{e.content&&(this.dragDropService.currentDragHasFolderChild=e.content.getChildren().$asPromise().then(e=>e.some(e=>e.isUiFolder())))})}}dragStart(t,n,i){if(this.dragDropService.currentDragElement){const t=e(".f-open-dropdown");t.length>0&&window.Foundation.libs.dropdown.close(t),this.dragDropService.currentDragElement.remove()}if(this.$rootScope.$broadcast("bb-drag-start"),e(document.body).addClass("bb-is-dragging"),this.dragDropService.originalElement=n.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.idOfPreviousItem=this.dragDropService.originalElement.prev(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.dragDropService.idOfNextItem=this.dragDropService.originalElement.next(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.menuCloserService.closeAnyOpenAngularMenus(),l.p.ContentHandler.Folder.isEqualTo(i.dragItemType)){this.$rootScope.$broadcast("close-folder-immediately-by-id",i.dragItemId),this.dragDropService.currentDragElement.find(".img-icon-folder-open").removeClass("img-icon-folder-open").addClass("img-icon-folder")}this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass).addClass("mouse-touch-drag"),this.dragDropService.originalElement.after(this.dragDropService.currentDragElement),this.dragDropService.currentDragId=i.dragItemId,this.dragDropService.currentDragType=i.dragItemType,this.contentHasFolderChild(i),this.dragDropService.currentDropTargetId=i.dragItemId,this.dragDropService.positionBefore=i.dragItemId,this.dragDropService.createDropPlaceholderElement(this.dragDropService.currentDragElement),this.dragMove(t,i)}dragEnd(t,n){e(document.body).removeClass("bb-is-dragging"),t.preventDefault(),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.movableElementClass),this.dragDropService.currentDragElement.removeAttr("style"),this.$rootScope.$broadcast("bb-drag-end")}dragCancel(){this.$rootScope.$broadcast("bb-drag-cancel"),e(document.body).removeClass("bb-is-dragging")}dragMove(e,t){e.preventDefault();const n=this.dragDropService.currentDragElement.find("[bb-drag-handle]"),i=this.dragDropService.originalElement.find("[bb-drag-handle]").offset(),s=n.offset(),o=this.dragDropService.currentDragElement.offset(),a=s.left-o.left,c=s.top-o.top,l=a+n.width()/2,d=c+n.height()/2,u=v.Horizontal.isEqualTo(this.dragDirection)||v.Omnidirectional.isEqualTo(this.dragDirection),p=v.Vertical.isEqualTo(this.dragDirection)||v.Omnidirectional.isEqualTo(this.dragDirection);let h,m,b,g;e.touches?(h=u?e.touches[0].pageX-l:o.left,m=p?e.touches[0].pageY-d:o.top,b=u?e.touches[0].pageX:i.left,g=p?e.touches[0].pageY:i.top):(h=u?e.pageX-l:o.left,m=p?e.pageY-d:o.top,b=u?e.pageX:i.left,g=p?e.pageY:i.top),this.dragDropService.currentDragElement.offset({left:h,top:m}),this.dragDropService.pointerPosition={left:b,top:g},this.dragDropService.scrollDragDropItemsContainer(this.dragDropService.pointerPosition.top,r.a.SCROLLING_CONSTANTS.mouseInteractionDistanceToScroll),this.timeout.cancel(this.bbDragMoveTimeoutId),this.bbDragMoveTimeoutId=this.timeout(()=>{this.$rootScope.$broadcast("bb-drag-move")},t,150,!1)}}f.$inject=["$rootScope",a.serviceName,r.d,d.b,p.e,h.f,b.b],i.module(g,[a.moduleName,r.c,d.a,p.b,h.d,b.a]).directive("bbDragHandle",["$injector",e=>e.instantiate(f)])}).call(this,n("5iHu"))},SE1T:function(e,t){e.exports='<button class="button-add-content js-show-add-options"\n        data-show-add-options\n        ng-click="addContentButton.addGroup()"\n        ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n        aria-label="{{addContentButton.addButtonAriaLabel}}"\n        ng-focus="addContentButton.showButton()"\n        ng-blur="addContentButton.hideButton()"\n        analytics-id="components.directives.add-content-button.course-group.button">\n</button>\n'},SSV0:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},SY8P:function(e,t,n){var i=n("Llzl");i.module("dibari.angular-ellipsis",[]).directive("ellipsis",["$timeout","$window","$sce",function(e,t,n){var s=function(t){var n=null,i=[];this.remove=function(t){-1!==i.indexOf(t)&&(i.splice(i.indexOf(t),1),0===i.length&&(e.cancel(n),n=null))},this.add=function(s){-1===i.indexOf(s)&&i.push(s),n||(n=e((function(){var e=i.slice();n=null,i.length=0,e.forEach((function(e){e()}))}),t))}},o=new s(0),a=new s(75);return{restrict:"A",scope:{ngShow:"=",ngBind:"=",ngBindHtml:"=",ellipsisAppend:"@",ellipsisAppendClick:"&",ellipsisSymbol:"@",ellipsisSeparator:"@",useParent:"@",ellipsisSeparatorReg:"=",ellipsisFallbackFontSize:"@"},compile:function(e,s,r){return function(e,s,r){function c(){var t=e.ngBind||e.ngBindHtml,o=!1;if(n.isEnabled()&&i.isObject(t)&&n.getTrustedHtml(t)&&(o=!0,t=n.getTrustedHtml(t)),t){var a=!e.ngBind&&!!e.ngBindHtml,c=0,d=void 0!==r.ellipsisSymbol?r.ellipsisSymbol:"&hellip;",u=void 0!==e.ellipsisSeparator?r.ellipsisSeparator:" ",p=void 0!==e.ellipsisSeparatorReg&&e.ellipsisSeparatorReg,h=void 0!==e.ellipsisAppend&&""!==e.ellipsisAppend?d+"<span class='angular-ellipsis-append'>"+e.ellipsisAppend+"</span>":d,m=p?t.match(p):t.split(u);if(r.isTruncated=!1,a?s.html(t):s.text(t),void 0!==r.ellipsisFallbackFontSize&&l(s)&&s.css("font-size",r.ellipsisFallbackFontSize),l(s,e.useParent)){var b=m.length,g=e.useParent?function(e){var t=0;return i.forEach(e.parent().children(),(function(n){n!=e[0]&&(t+=n.clientHeight)})),e.parent()[0].clientHeight-t}(s):s[0].clientHeight;for(a?s.html(t+h):s.text(t).html(s.html()+h),s.attr("data-overflowed","true");c<b;c++){var v=m.pop();if(0===m.length&&(m[0]=v.substring(0,Math.min(v.length,5))),a?s.html(m.join(u)+h):s.text(m.join(u)).html(s.html()+h),(e.useParent?s.parent()[0]:s[0]).scrollHeight<g||!1===l(s,e.useParent)){r.isTruncated=!0;break}}d!=h&&void 0!==e.ellipsisAppendClick&&""!==e.ellipsisAppendClick&&s.find("span.angular-ellipsis-append").bind("click",(function(t){e.$apply((function(){e.ellipsisAppendClick.call(e,{event:t})}))})),!o&&n.isEnabled()&&n.trustAsHtml(t)}else s.attr("data-overflowed","false")}}function l(e,t){return(e=t?e.parent():e)[0].scrollHeight>e[0].clientHeight}function d(){r.lastWindowResizeWidth==window.innerWidth&&r.lastWindowResizeHeight==window.innerHeight||c(),r.lastWindowResizeWidth=window.innerWidth,r.lastWindowResizeHeight=window.innerHeight}r.lastWindowResizeTime=0,r.lastWindowResizeWidth=0,r.lastWindowResizeHeight=0,r.lastWindowTimeoutEvent=null,r.isTruncated=!1,e.$watch("ngShow",(function(){o.add(c)})),e.$watch("ngBind",(function(){o.add(c)})),e.$watch("ngBindHtml",(function(){o.add(c)})),e.$watch("ellipsisAppend",(function(){c()})),e.$watch((function(){return 0!=s[0].offsetWidth&&0!=s[0].offsetHeight}),(function(){a.add(c)}));var u=e.$on("dibari:refresh-ellipsis",(function(){o.add(c)}));function p(){a.add(d)}var h=i.element(t);h.bind("resize",p),e.$on("$destroy",(function(){h.unbind("resize",p),o.remove(c),a.remove(d),u&&(u(),u=null)}))}}}}])},SoDU:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("VdDF"),s=n("pjml");class o{constructor(e,t){this.TermModel=e,this.terms=t,this.currentTerm=this.getTerm(s.Gb.ConstantTermId.CurrentTerm.toString()),this.upcomingTerm=this.getTerm(s.Gb.ConstantTermId.UpcomingTerm.toString())}getTerm(e){return this.terms.filter(t=>t.id===e)[0]}static decorateTerm(e,t){return e.id=t,e.ui={type:t},e}createYearTerm(e){const t=e.getFullYear(),n="year-"+t;let i=this.getTerm(n);return i||((i=new this.TermModel).id=n,i.ui={type:"year",year:t},i.startDate=new Date(t,0),this.addTerm(i)),i}addTerm(e){if(e)for(let t=0;t<this.terms.length;t++)if(this.terms[t].startDate>=e.startDate||this.terms[t]===this.currentTerm)return void this.terms.splice(t,0,e)}filterTerm(e){return this.terms.filter(t=>!!s.Gb.TermDuration.DateRange.isEqualTo(t.durationType)&&i.a.isWithinDateRange(e,{start:t.startDate,end:t.endDate}))}}},Sq3Z:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-activity-indicator",use:"icon-small-activity-indicator-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-activity-indicator"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="2" stroke-width="4" /></symbol>'});s.add(o);e.exports=o},TOu5:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},Tn43:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k}));n("367g"),n("Aw+3"),n("8+lX"),n("aAQ7"),n("UyCM");var i=n("Llzl"),s=n("nsO7"),o=n("en1n"),a=n("0JpG"),r=n("suMx"),c=n("jciN"),l=n("+e2k"),d=n("+g6d"),u=n("TnpK"),p=n("g7Mf"),h=n("r6lH"),m=n("ELoy"),b=n("pjml"),g=n("f4B+"),v=n("nmzr"),f=n("fvgg"),y=n("yC9S"),C=n("Wqh6"),w=n("Y+9S"),S=n("IbyE"),I=n("50Q+");const k="ultra.components.directives.discussion";class D{constructor(e,t,n,i,o,a,r,c,l,d,u){this.$window=e,this.$sce=t,this.scope=n,this.element=i,this.$stateParams=o,this.$ngRedux=a,this.bbLocalize=r,this.telemetry=c,this.discussion=l,this.ultraState=d,this.courseModel=u,n.isLoaded=!1,n.courseId=n.content().courseId,n.contentId=n.content().id,n.isGroupDiscussion=n.content().isGroupContent,this.subscribeToReduxChanges(),this.loadOtherNameAsDisplayNameSystemPreference({key:I.OTHERNAME_AS_DISPLAY_NAME_OPTION}),this.createDfiReport(n.courseId,n.contentId),y.b.OnWindow("resize",s.debounce(()=>{(this.scope.displayNonParticipants||this.scope.displayNonParticipantGroup)&&(this.updateNonParticipantView(),this.scope.$apply())},150),n),this.notifyMobileApp()}notifyMobileApp(){var e;const t={type:w.MessageType.DiscussionTelemetryOpened,status:w.MessageStatus.Success,contentId:this.scope.contentId,contentTitle:this.scope.content().title,prevState:Object(w.fetchState)(null===(e=this.ultraState.prev)||void 0===e?void 0:e.name)};Object(w.sendMessageToMobile)(t)}createDfiReport(e,t,n){(n?this.telemetry.loadDiscussionActivityData(e,t,n):this.telemetry.loadDiscussionActivityData(e,t)).then(e=>{this.scope.discussionData=e,this.scope.header=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.header",params:{title:this.scope.content().title},noEscape:!0,noWrap:!0}),this.scope.course=this.courseModel.$find(this.scope.courseId),this.scope.isSingleGroup=!!n,this.scope.groups=this.scope.discussionData.groups,this.scope.isGradable=!!this.scope.discussionData.gradeColumnId,this.scope.gradingColumn=this.scope.discussionData.gradeColumnId,this.scope.viewedOnlyCount=this.scope.discussionData.viewedOnlyCount,this.scope.avgCommentsPerStudent=this.scope.discussionData.avgCommentsPerStudent?this.scope.discussionData.avgCommentsPerStudent:0,this.scope.avgWordCountPerComment=this.scope.discussionData.avgWordCountPerComment?this.scope.discussionData.avgWordCountPerComment:0,this.scope.avgGradeOfDiscussion=this.scope.discussionData.avgGrade?this.scope.discussionData.avgGrade/100:0,this.scope.numberOfCommentsToDisplay=1,this.scope.topComments=[],this.scope.displayTopComments=!1,this.scope.topParticipants=[],this.scope.displayTopParticipants=!1,this.scope.nonParticipants=[],this.scope.showNonparticipant=[],this.scope.showLargeNonparticipantPanel=!0,this.scope.minHeightForTopBoxes="auto",this.scope.nonParticipants=this.getNonParticipants(),this.scope.displayNonParticipants=!!this.scope.nonParticipants.length&&!this.scope.isGroupDiscussion,this.scope.displayNonParticipantGroups=!!this.scope.nonParticipants.length&&this.scope.isGroupDiscussion&&!this.scope.isSingleGroup,this.scope.displayNonParticipantGroup=!!this.scope.nonParticipants.length&&this.scope.isGroupDiscussion&&this.scope.isSingleGroup,this.scope.nonParticipantGroups=this.scope.displayNonParticipantGroups?this.getNonParticipantGroups():[],this.scope.totalNonParticipants=this.scope.nonParticipants.length,this.scope.totalParticipants=this.scope.discussionData.totalParticipants+this.scope.totalNonParticipants,this.scope.displayedNonParticipants=24,this.scope.additionalNonParticipants=this.scope.totalNonParticipants,this.scope.currentPanelWidth=0,this.scope.lastPanelWidth=-1,this.scope.isLoaded=!0;for(let e=0;e<this.scope.displayedNonParticipants;e++)this.scope.showNonparticipant[e]=!0;this.getTopComments(),this.getTopParticipants(),this.getParticipantBarChart(),this.updateNonParticipantView(),this.scope.statisticsConfig=this.getSummaryInsightNumbers(),this.scope.topCommentsColumns=this.scope.displayTopComments&&this.scope.displayTopParticipants?"small-12 medium-8 large-9":"small-12",this.scope.topParticipantColumns=this.scope.displayTopComments&&this.scope.displayTopParticipants?"small-12 medium-4 large-3":"small-12"})}getSummaryInsightNumbers(){const e=this.bbLocalize.getLocale(this.scope),t=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.numParticipants"}),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.formattedParticipation",params:{count:this.scope.totalParticipants-this.scope.totalNonParticipants,total:this.scope.totalParticipants},noWrap:!0}),i=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgComments"}),s=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgCount"}),o=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgGrade"}),a=this.scope.isGradable&&this.scope.avgGradeOfDiscussion>0?this.bbLocalize.formatPercentageSync(this.scope.avgGradeOfDiscussion,this.scope):this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.na"}),r=[];return r.push({title:t,data:n}),r.push({title:i,data:this.bbLocalize.formatNumberSync(this.scope.avgCommentsPerStudent,this.scope).toString()}),this.scope.avgWordCountPerComment&&this.scope.avgWordCountPerComment>0&&r.push({title:s,data:this.bbLocalize.formatNumberSync(this.scope.avgWordCountPerComment,this.scope).toString()}),this.scope.isGradable&&r.push({title:o,data:a}),r}getParticipantBarChart(){let t=0,n=0,i=100;const s=this.scope.totalParticipants-this.scope.totalNonParticipants;this.scope.totalParticipants>0?i=100-((t=Math.floor((this.scope.totalParticipants-this.scope.totalNonParticipants)/this.scope.totalParticipants*100))+(n=Math.floor(this.scope.viewedOnlyCount/this.scope.totalParticipants*100))):(t=0,n=0,i=100),e(".bar-chart .participated").attr("style","width: "+t+"%"),e(".bar-chart .opened").attr("style","width: "+n+"%"),e(".bar-chart .unopened").attr("style","width: "+i+"%");const o=this.scope.totalNonParticipants-this.scope.viewedOnlyCount;this.scope.barchartNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartNonParticipants",params:{count:o},noWrap:!0}),this.scope.barchartOpenedNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartOpenedNonParticipants",params:{count:this.scope.viewedOnlyCount},noWrap:!0}),this.scope.barchartParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartParticipants",params:{count:s},noWrap:!0}),this.scope.percentParticipatedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentParticipated",params:{percent:this.bbLocalize.formatPercentageSync(t/100,this.scope)},noWrap:!0}),this.scope.percentOpenedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentOpened",params:{percent:this.bbLocalize.formatPercentageSync((n+t)/100,this.scope)},noWrap:!0})}getNonParticipantGroups(){const e=[];return this.scope.nonParticipants.length>0&&i.forEach(this.scope.groups,t=>{const n={id:t.id,name:t.name,nonParticipants:[],total:0,hidden:0};i.forEach(this.scope.nonParticipants,e=>{(e=this.handlePreferredDisplayName(e)).group.id===t.id&&(e.localizedName=this.bbLocalize.formatUsernameSync(e,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.nonParticipants.push(e),n.total++)}),n.hidden=n.total>4?n.total-4:0,n.total>0&&e.push(n)}),e}getTopComments(){this.scope.numberOfCommentsToDisplay=o.k()?3:5,this.scope.discussionData.topComments.forEach(e=>{const t={user:this.handlePreferredDisplayName(e.user),message:g.a.text(e.message),messageId:e.messageId,numReplies:e.numReplies};t.user.localizedName=this.bbLocalize.formatUsernameSync(e.user,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.user.avatarData=e.user,this.scope.topComments.push(t),this.scope.displayTopComments=!0})}getTopParticipants(){this.scope.discussionData.topParticipants.forEach(e=>{const t={user:this.handlePreferredDisplayName(e.user),numComments:e.numComments,numReplies:e.numReplies};t.user.localizedName=this.bbLocalize.formatUsernameSync(e.user,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.user.avatarData=e.user,this.scope.topParticipants.push(t),this.scope.displayTopParticipants=!0})}getNonParticipants(){const e=[];return this.scope.discussionData.nonParticipants.forEach(t=>{t.avatarData=t,t.localizedName=this.bbLocalize.formatUsernameSync(this.handlePreferredDisplayName(t),a.ILocaleUsernameFormat.Short,null,{noWrap:!1,noEscape:!0}),t.localizedNameWithoutWrap=this.bbLocalize.formatUsernameSync(this.handlePreferredDisplayName(t),a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.preferredDisplayName===a.PreferredDisplayName.Both&&(t.otherName=this.bbLocalize.formatUsernameSync({...t,preferredDisplayName:a.PreferredDisplayName.Other},a.ILocaleUsernameFormat.Brief,null,{noWrap:!0,noEscape:!0}),t.fullName=this.bbLocalize.formatUsernameSync({...t,preferredDisplayName:a.PreferredDisplayName.Given},a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0})),e.push(t)}),e}toggleIndividualNonParticipantDisplay(){s.defer(()=>{let e=i.element("#discussion-insights").find(".non-participant-box").innerWidth()-30;e=e<1118?e:1118;const t=2*Math.ceil((e+20)/126);this.scope.displayedNonParticipants=0;for(let e=0;e<18;e++)e<t&&e<this.scope.totalNonParticipants?(this.scope.showNonparticipant[e]=!0,this.scope.displayedNonParticipants++):this.scope.showNonparticipant[e]=!1;this.scope.additionalNonParticipants=this.scope.totalNonParticipants>this.scope.displayedNonParticipants?this.scope.totalNonParticipants-this.scope.displayedNonParticipants:0,this.scope.nonParticipationSummary=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.nonParticipationSummary",params:{count:this.scope.displayedNonParticipants,total:this.scope.totalNonParticipants},noWrap:!0}),this.setNonParticipantMargin(e)})}setNonParticipantMargin(t){const n=e("li.non-participant"),i=Math.floor(t/126),s=126*i+106,o=i-1>0?20+(t-s-2)/i:20+t-s;e(n).css("margin-right",o),e(n[i]).css("margin-right","2px"),2*i+1<=n.length&&e(n[2*i+1]).css("margin-right","2px")}updateNonParticipantView(){const e=this.bbLocalize.getLocale(this.scope);this.scope.nonParticipantsOptions=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.nonparticipantsOptions"}),this.scope.numberOfCommentsToDisplay=o.k()?3:5,this.scope.currentPanelWidth=i.element("#discussion-insights").find(".non-participant-box").innerWidth(),this.scope.currentPanelWidth!==this.scope.lastPanelWidth&&(o.k()?this.scope.showLargeNonparticipantPanel=!1:(this.scope.showLargeNonparticipantPanel=!0,this.toggleIndividualNonParticipantDisplay())),this.scope.lastPanelWidth=this.scope.currentPanelWidth}getSafeHtml(e){return this.$sce.trustAsHtml(e)}hasNavScrollbar(){const e=i.element(".group-selector")[0];return!!(e&&e.scrollWidth>e.clientWidth)}goToDiscussion(e){e?(this.discussion.groupId=e,this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,disGroupId:e,courseId:this.scope.courseId})):this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,courseId:this.scope.courseId})}goToGrade(e){this.scope.isGradable&&!this.scope.isGroupDiscussion&&this.ultraState.goPeekState("submission-list",{columnId:this.scope.gradingColumn,participantId:e,contentId:this.scope.contentId})}goToMessage(e){this.ultraState.goPeekState(v.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e})}isFocusedNonparticipant(t){return e(document.activeElement).is(i.element(e("a#non-participant-link-"+t)))}sortNamesAlphabetically(e){let t="";return e.sort((e,t)=>e.givenName+e.familyName<t.givenName+t.familyName?-1:1).forEach(e=>{t+=e.id+","}),t.slice(0,-1)}goToMessageAll(){const e=this.sortNamesAlphabetically(this.scope.nonParticipants);this.ultraState.goPeekState(v.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e,conversationPerRecipient:!0})}updateDfiPanel(t,n,i){e(".group-selector .selected").removeClass("selected"),e(t.target).addClass("selected"),n?(this.discussion.groupId=n,this.scope.currentGroupId=n,this.scope.currentGroupName=i,this.createDfiReport(this.scope.courseId,this.scope.contentId,n),this.updateNonParticipantView()):(this.discussion.groupId=void 0,this.scope.currentGroupId=void 0,this.scope.currentGroupName=void 0,this.createDfiReport(this.scope.courseId,this.scope.contentId))}isPreferedNameBoth(e){return e.preferredDisplayName===a.PreferredDisplayName.Both}subscribeToReduxChanges(){const e=this.$ngRedux.connect(e=>({otherNameAsDisplayNameSystemPreference:S.select.systemPreference.getSystemPreferenceByKey(e,I.OTHERNAME_AS_DISPLAY_NAME_OPTION)}),e=>({loadOtherNameAsDisplayNameSystemPreference:t=>e(S.actions.systemPreference.loadSystemPreference(t))}))(this);this.scope.$on("$destroy",e)}handlePreferredDisplayName(e){var t;return e&&(null===(t=this.otherNameAsDisplayNameSystemPreference)||void 0===t?void 0:t.value)&&(e.preferredDisplayName="Y"===this.otherNameAsDisplayNameSystemPreference.value?e.preferredDisplayName:void 0),e}}D.$inject=["$window","$sce","scope","element","$stateParams","$ngRedux",a.serviceName,h.b,p.c,u.d,b.m.serviceName];class T{constructor(e){this.$injector=e,this.restrict="EA",this.template=C,this.scope={content:"&"},this.link=(e,t,n)=>{e.discussionInsights=this.$injector.instantiate(D,{scope:e,element:t,attrs:n})}}}T.$inject=["$injector"],i.module(k,[r.a,c.a,l.a,f.a,d.a,h.a,m.a,u.b]).directive("bbDiscussionInsights",["$injector",e=>e.instantiate(T)])}).call(this,n("5iHu"))},TuNX:function(e,t){e.exports='<bb-modal class="notification proctoring-modal" analytics-id-tag-prefix="components.services.proctoring">\n  <div name="modal-contents">\n    <p bb-translate>{{::requirementsText}}</p>\n    <p ng-bind-html="::downloadText"></p>\n    <p bb-translate>{{::browserText}}</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          role="button"\n          class="button js-primary-button proctoring-modal-button"\n          ng-click="$parent.$dismiss()"\n          bb-translate-attrs="{\'aria-label\':\'components.services.proctoring.modal.continue\'}"\n          analytics-id="components.services.proctoring.modal.continue.button"\n  >\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n    <bb-translate>components.services.proctoring.modal.continue</bb-translate>\n  </button>\n</bb-modal>\n'},UEFj:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-beast-analytics",use:"icon-small-beast-analytics-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-beast-analytics"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 8V1M8 8l5-4M8 8l4.5 4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},UODz:function(e,t){e.exports='<div class="submission-card" ng-class="{\'is-late\': isLate, \'inline\': inline}" bb-load-bundle="components/directives/submission-card">\n  <div class="panel" ng-class="{\'clickable-panel\': clickable}">\n    <bb-ui-icon-large-assignments class="submission-card__icon" ng-if="!inline" color="{{::submissionCard.showLateIcon ? \'error\' : \'inherit\'}}"></bb-ui-icon-large-assignments>\n    <div class="info" ng-class="{\'completed\': submissionCard.attempt.isCompleted(), \'rubric-icon-spacing\': submissionCard.shouldExpandForRubricIcon()}">\n      <span class="name ellipsis" bb-translate ng-if="!inline">{{title}}</span>\n      <span class="detail">\n        <span class="test-status ellipsis" ng-show="!!status">\n          <span class="inline-status" ng-if="inline && !hasAttempt && showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.late\n          </span>\n          <span class="inline-status" ng-if="inline && !hasAttempt && !showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.new\n          </span>\n          <span ng-if="inline && !hasAttempt"> - </span>\n          <span bb-translate class="status">{{status}}</span>\n          <ng-switch on="submissionCard.attempt.status" ng-if="submissionCard.attempt">\n            <bb-datetime class="date" format="Short" ng-switch-when="COMPLETED" value="::submissionCard.attempt.attemptLastGradedDate"></bb-datetime>\n            <bb-datetime class="date" format="Short" ng-switch-default value="::submissionCard.attempt.attemptDate"></bb-datetime>\n          </ng-switch>\n          <bb-datetime class="date" format="Short" ng-if="!submissionCard.attempt && gradingColumn.dueDate" value="::gradingColumn.dueDate"></bb-datetime>\n        </span>\n      </span>\n    </div>\n    <div class="grade-container">\n      <ng-switch on="gradeDetail.isPosted()">\n        <bb-display-grade ng-switch-when="true"\n                          grade-detail="gradeDetail"\n                          column="gradingColumn"\n                          display-type="GradeColor"\n                          show-rubric-button="showRubricButton()"\n                          show-rubric-div="showRubricDiv()"></bb-display-grade>\n        <bb-display-grade ng-switch-default\n                          attempt="submissionCard.attempt"\n                          display-type="AttemptStatus"></bb-display-grade>\n      </ng-switch>\n    </div>\n  </div>\n</div>\n'},UeHE:function(e,t){e.exports='<div ng-if="addContentButton.isCloudServiceAvailable">\n  <bb-file-upload\n    allow-multiple="true"\n    monitor-leave="true"\n    target-div="{{\'#\' + fileListViewId}}"\n    hide-transclude-during-upload="false"\n    click-enabled="false"\n    primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n    skip-zip-file-check="true"\n    disable-drag="true"\n    is-third-party-upload="true"\n    third-party-download-handler="addContentButton.downloadFile"\n    ignored-states="::ignoredStates()">\n    <button ng-click="addContentButton.assignPosition()"\n            class="doc-add-media clear ng-scope"\n            bb-cloud-storage-integration\n            primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n            attach-handler="addContentButton.cloudUploadAttachHandler"\n            web-location="{{webLocation}}"\n            file-location="{{fileLocation}}"\n            allow-multiple="true"\n            on-files-selected="addContentButton.onFilesSelectedHandler"\n            analytics-id="components.directives.add-content-button.cloud-upload.button">\n      <div class="import-action-header">\n        <i class="icon-cloud add-content-cloud-upload-icon"></i>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n        <div class="action-details" bb-translate="components.directives.add-content-button.importContentFromCloudStorage.description"></div>\n      </div>\n    </button>\n  </bb-file-upload>\n</div>\n'},UyCM:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-messages",use:"icon-small-messages-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-messages"><path d="M1 3h14v10H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 3l7 7 7-7M1 13l5-5M15 13l-5-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},VCKY:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},VUvS:function(e,t){e.exports='<div bb-load-bundle="components/directives/content/learning-module/learning-module-base-item" class="base-content-item bb-lm-base-item"\n  bb-cache-compilation="lm-base-item" role="region" aria-labelledby="::learning-module-title-{{content.id}}">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" ng-paste="$event.stopPropagation()">\n    <div ng-switch on="content.ui.importPlaceholder">\n      \x3c!-- Import placeholder  --\x3e\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n\n      \x3c!-- Non-imported content --\x3e\n      <div ng-switch-default class="drag-element-row" ng-class="{\'is-restricted\': content.canEdit() && content.isHiddenFromStudents(), \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canEdit()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n\n              <ng-switch on="content.ui.isUploading">\n                \x3c!-- Uploading section begin --\x3e\n\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n                \x3c!-- Uploading section end --\x3e\n\n                <div class="outline-item-inner" ng-switch-default>\n\n                  <div class="lm-header-section">\n                    \x3c!-- Learning Module title --\x3e\n                    <div class="lm-header-row"\n                         ng-class="{\'lm-header-row-with-icon\': baseItem.shouldShowReviewStateIcon()}"\n                         bb-click-to-invoke-child=".list-tree-toggle button">\n                      \x3c!-- Header row section --\x3e\n                      <div class="lm-title-container">\n                        <div class="title-container">\n                          \x3c!-- Conditional release section begin --\x3e\n                          <bb-review-state-icon\n                            ng-if="::baseItem.shouldShowReviewStateIcon()"\n                            content-id="content.id"\n                            course-id="content.courseId"\n                            has-automatic-review-state-transition="!content.canUpdateReviewState()"\n                            before-item-state="baseItem.getNeighborReviewState()"\n                            after-item-state="baseItem.getNeighborReviewState()"\n                          ></bb-review-state-icon>\n                          \x3c!-- Conditional release section end --\x3e\n\n                          \x3c!-- Attach event only at Instructor View --\x3e\n                          <div ng-if="::content.canEdit()" class="lm-title-instructor">\n                            <button class="lm-title secondary-title ellipse"\n                              tabindex="0"\n                              bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\'}"\n                              translate-attrs-values="{learningModuleName: content.title}"\n                              aria-expanded="{{isOpen}}"\n                              id="{{::\'learning-module-title-\' + content.id}}"\n                              ng-click="baseItem.toggleLM()"\n                              analytics-id="course.learning.module.base.item.toggleLm.button"\n                              aria-controls="{{::\'learning-module-contents-\' + content.id}}">\n                              {{content.title}}\n                            </button>\n                          </div>\n\n                          \x3c!-- Just display title at Student View --\x3e\n                          <div class="lm-title-student" ng-if="::(!content.canEdit())">\n                            <button class="lm-title secondary-title ellipse"\n                                tabindex="0"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                aria-expanded="{{isOpen}}"\n                                ng-click="!content.isConditionalReleaseLocked() && baseItem.toggleLM()"\n                                id="{{::\'learning-module-title-\' + content.id}}"\n                                analytics-id="course.learning.module.base.item.toggleLm.button"\n                                aria-controls="{{::\'learning-module-contents-\' + content.id}}">\n                              {{::content.title}}\n                            </button>\n                            <div ng-if="content.isConditionalReleaseLocked()"\n                              role="tooltip"\n                              tabindex="0"\n                              class="lock-info"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-open-on-activation="true"\n                              tooltip-disable-on-mouse-over="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.lock-info</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        \x3c!-- Learning Module visibility selector  --\x3e\n                        <div class="lm-visibility-selector" ng-if="content.canEdit() || (baseItem.isCourseCompletedAndInInstructorView() && content.isConditionalRelease())">\n                          <bb-content-visibility-selector\n                            ng-if="::content.canEdit()"\n                            content="content"\n                            is-visibility-selector-enabled="true"\n                            onchange-func="baseItem.onChangeVisibility()"\n                            open-panel-on-restricted="true"\n                            disable-restricted="false"\n                            enable-conditional-release="true">\n                          </bb-content-visibility-selector>\n                          <div class="rules" ng-if="(content.canEdit() || baseItem.isCourseCompletedAndInInstructorView()) && content.isConditionalRelease()">\n                            <a href="javascript:void(0);"\n                              ng-click="baseItem.canOpenConditionalRelease && baseItem.openConditionalRelease()"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n                              tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n                              tooltip-auto-update="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n                              analytics-id="components.directives.content-item-base.conditionalRelease.link">\n                              <span>{{baseItem.conditionalRelease.getConditionDescription()}}</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </a>\n                          </div>\n                        </div>\n                        <div ng-if="content.isForcedSequenceModule() && content.canEdit()"\n                          class="lm-instructor-note"\n                          bb-translate\n                        >\n                          components.directives.learning-module.base-item.forced-sequence.instructor-note\n                        </div>\n                        \x3c!-- Learning Module control section begin --\x3e\n\n                        \x3c!-- for student --\x3e\n                        \x3c!-- <div ng-if="::(!content.canEdit())">\n                          <span class="lm-counting">{{baseItem.completed}} / {{baseItem.count}}</span>\n                        </div> --\x3e\n\n                        \x3c!-- for instructor --\x3e\n                        <div ng-if="::(content.canEdit() && canMove)" class="lm-drag-button">\n                          <button bb-drag-handle drag-item-id="{{content.id}}"\n                                  drag-item-name="{{content.title}}"\n                                  drag-item-type="{{content.contentHandler}}"\n                                  drag-item-context="{{contextArea}}"\n                                  class="super-clear small button icon js-drag-handle"\n                                  translate-attrs-values="{contentTitle: content.title}"\n                                  bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                                  analytics-id="course.learning.module.base.item.move.button">\n                            <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n                          </button>\n                        </div>\n                        <div bb-foundation-defer>\n                          <bb-overflow-menu ng-if="::(content.canDelete() || content.canEdit() || content.hasConversation() && !content.isConditionalReleaseLocked())"\n                                            element-id="{{::(\'learning-module\' + baseItem.controlId)}}"\n                                            element-name="{{content.title}}"\n                                            menu-items="baseItem.getOverflowMenu()"\n                                            analytics-id-tag-prefix="components.directives.learning-module.base-item.overflowMenu">\n                          </bb-overflow-menu>\n                        </div>\n                      </div>\n\n                      <div class="lm-description" ng-if="content.description">\n                        <bb-course-content-item-description class="description-show-text-container description-show-text"\n                          description="content.description"\n                        ></bb-course-content-item-description>\n                      </div>\n\n                      \x3c!-- Learning Module control section end --\x3e\n                      <div class="list-tree-toggle" ng-if="::(content.canEdit() || !content.isRestricted())">\n                        <button class="button super-clear" ng-click="baseItem.toggleLM()" aria-controls="{{::\'learning-module-contents-\' + content.id}}"\n                          aria-expanded="{{isOpen}}"\n                          bb-translate-attrs="{title: isOpen ? \'components.directives.learning-module.base-item.collapse\' : \'components.directives.learning-module.base-item.expand\'}"\n                          translate-attrs-values="{learningModuleName: content.title}"\n                          analytics-id="course.learning.module.base.item.toggleLm.button"\n                          >\n                          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n\n                    <bb-forced-sequence-warning-banner ng-if="baseItem.shouldShowForcedSequenceWarningBanner()"></bb-forced-sequence-warning-banner>\n\n                    \x3c!-- Learning Module title section end --\x3e\n                  </div>\n                </div>\n              </ng-switch>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},WSu0:function(e,t,n){"use strict";var i=n("aY38");function s(e){this.message=e}s.prototype=new Error,s.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new s("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(i(e.split(".")[n]))}catch(e){throw new s("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=s},Wqh6:function(e,t){e.exports='<div class="panel-wrap telemetry-panel">\n  <bb-telemetry-panel-header title="{{header}}"\n                           course="course"\n                           panel-data-loaded="true">\n  </bb-telemetry-panel-header>\n\n  <nav class="group-selector" ng-class="{\'horizontal-scroll\': discussionInsights.hasNavScrollbar()}" ng-if="isGroupDiscussion">\n    <ul class="group-list">\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.overall-link"\n          tabindex="0">\n        <a href="javascript:void(0);"\n           class="overall-link selected"\n           ng-click="discussionInsights.updateDfiPanel($event)"\n           bb-translate="components.directives.discussion.insights.overall"\n           analytics-id="components.directives.discussion.insights.overall">\n        </a>\n      </li>\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.group-menu-link"\n          tabindex="0"\n          ng-repeat="group in ::groups">\n        <a href="javascript:void(0);"\n           class="group-menu-link"\n           ng-click="discussionInsights.updateDfiPanel($event, group.id, group.name)"\n           analytics-id="components.directives.discussion.insights.group.link">\n          {{group.name}}\n        </a>\n      </li>\n    </ul>\n  </nav>\n\n  <section id="discussion-insights" class="panel-content discussion-insights" bb-foundation-defer>\n    <div class="insights">\n      <div class="insight-summary row collapse summary-box">\n        <div class="column small-12">\n          <bb-statistics\n            config="statisticsConfig"\n            ng-if="isLoaded"\n            small-per-row="1"\n            large-per-row="4"></bb-statistics>\n        </div>\n      </div>\n\n      <div class="participation-chart-container">\n        <div class="bar-chart">\n          <span class="participated"\n                aria-label="{{barchartParticipants}}"\n                title="{{barchartParticipants}}"></span>\n          <span class="opened"\n                aria-label="{{barchartOpenedNonParticipants}}"\n                title="{{barchartOpenedNonParticipants}}"></span>\n          <span class="unopened"\n                aria-label="{{barchartNonParticipants}}"\n                title="{{barchartNonParticipants}}"></span>\n        </div>\n        <div class="legend">\n          <div class="participatedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentParticipatedCaption)"></div>\n          <div class="openedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentOpenedCaption)"></div>\n        </div>\n      </div>\n\n      <div class="non-participant-groups row" ng-if="displayNonParticipantGroups">\n        <div class="column small-12 non-participant-box clearfix" bb-foundation-defer>\n          <h3 class="stat-title large-non-participants-title"\n              bb-translate="components.directives.discussion.insights.groupNonParticipants"\n              translate-values="{count: totalNonParticipants}"></h3>\n          <div class="float-right">\n            <button class="button super-clear message-all-non-participants-button"\n                type="button"\n                ng-click="discussionInsights.goToMessageAll()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageNonParticipants\'}"\n                translate-attrs-values="{count: totalNonParticipants}"\n                analytics-id="components.directives.discussion.insights.messageNonParticipants.button">\n              <bb-ui-icon-medium-messages></bb-ui-icon-medium-messages>\n            </button>\n          </div>\n\n          <div class="group-nonparticipants" ng-repeat="nonParticipantGroup in nonParticipantGroups track by nonParticipantGroup.id">\n            <div class="group-heading child-is-invokable" bb-click-to-invoke-child="a.group-link">\n              <a class="group-link"\n                 href="javascript:void(0);"\n                 ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 analytics-id="components.directives.discussion.insights.nonParticipantGroup.link">\n                {{nonParticipantGroup.name}}\n              </a>\n            </div>\n            <div class="nonparticipant-in-group-container"\n                 ng-class="nonParticipantGroup.total > 3 ? \'space-evenly\' : \'set-margin\' ">\n              <div class="nonparticipant-in-group child-is-invokable"\n                   bb-click-to-invoke-child="a.group-non-participant-link"\n                   ng-repeat="nonParticipant in nonParticipantGroup.nonParticipants | limitTo: 4 track by nonParticipant.id">\n                <bb-avatar user="nonParticipant"></bb-avatar>\n                <a class="group-non-participant-link"\n                   href="javascript:void(0);"\n                   aria-label="{{nonParticipant.localizedName}}"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipant.link">\n                  {{nonParticipant.localizedName}}\n                </a>\n              </div>\n            </div>\n            <div class="count-link">\n              <a ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 ng-show="nonParticipantGroup.hidden > 0"\n                 href="javascript:void(0);"\n                 bb-translate="components.directives.discussion.insights.moreLink"\n                 translate-values="{count: nonParticipantGroup.hidden}"\n                 analytics-id="components.directives.discussion.insights.moreLink">\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="non-participants row" ng-show="(displayNonParticipants || displayNonParticipantGroup)">\n        <div class="column small-12 non-participant-box clearfix" ng-if="showLargeNonparticipantPanel" bb-foundation-defer>\n          <h3 class="stat-title large-non-participants-title" bb-translate="components.directives.discussion.insights.nonParticipants"></h3>\n          <div class="float-right">\n            <button class="button super-clear message-all-non-participants-button"\n                type="button"\n                ng-click="discussionInsights.goToMessageAll()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageNonParticipants\'}"\n                translate-attrs-values="{count: totalNonParticipants}"\n                analytics-id="components.directives.discussion.insights.messageNonParticipants.button">\n              <bb-ui-icon-medium-messages></bb-ui-icon-medium-messages>\n            </button>\n          </div>\n          <ul class="non-participant-list clearfix">\n            <li class="non-participant child-is-invokable"\n                bb-click-to-invoke-child="a.non-participant-link"\n                tabindex="-1"\n                ng-show="showNonparticipant[$index]"\n                ng-repeat="nonParticipant in nonParticipants | limitTo: 18 track by nonParticipant.id">\n              <div class="non-participant-cell"\n                   ng-class="{\'show-focus-outline\': discussionInsights.isFocusedNonparticipant(nonParticipant.id)}">\n                <a class="non-participant-link hide-focus-outline"\n                   bb-translate-attrs="{\'aria-label\':\'{{nonParticipant.localizedNameWithoutWrap}}\'}"\n                   id="non-participant-link-{{nonParticipant.id}}"\n                   tabindex="0"\n                   href="javascript:void(0);"\n                   ng-focus="true"\n                   ng-blur="true"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipantLink.link">\n                  <bb-avatar class="non-participant-avatar" user="nonParticipant.avatarData"></bb-avatar>\n                </a>\n                <span ng-if="!discussionInsights.isPreferedNameBoth(nonParticipant)" class="byline stacked" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.localizedName)"></span>\n\n                <div ng-if="discussionInsights.isPreferedNameBoth(nonParticipant)">\n                  <span class="byline stacked stacked-other-name" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.otherName)"></span>\n                  <span class="byline stacked stacked-other-name" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.fullName)"></span>\n                </div>\n              </div>\n            </li>\n          </ul>\n          <label class="summary-line">{{nonParticipationSummary}}</label>\n        </div>\n        <div class="column small-12 non-participant-box clearfix" ng-if="!showLargeNonparticipantPanel">\n          <h3 class="stat-title subheader">{{barchartNonParticipants}}</h3>\n          <button class="messageAllButton button"\n                  bb-translate="components.directives.discussion.insights.messageAll"\n                  bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageAll\'}"\n                  ng-click="discussionInsights.goToMessageAll()"\n                  analytics-id="components.directives.discussion.insights.messageAll">\n          </button>\n        </div>\n      </div>\n\n      <div class="row equal-height" ng-if="displayTopComments || displayTopParticipants">\n        <div class="top-comments column {{topCommentsColumns}} student-list-box" ng-if="displayTopComments">\n          <h3 class="stat-title subheader"\n              id="most-replies-heading"\n              bb-translate="components.directives.discussion.insights.mostReplies"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-comment-row child-is-invokable"\n                 bb-click-to-invoke-child="a.discussion-link"\n                 ng-class="{\'last\':$last}"\n                 ng-repeat="comment in topComments | limitTo: numberOfCommentsToDisplay | orderBy: \'-numReplies\'">\n              <a href="javascript:void(0);"\n                 class="discussion-link"\n                 ng-click="discussionInsights.goToDiscussion(comment.user.group.id)"\n                 aria-labelledby="comment-user-{{comment.user.id}} most-replies-heading"\n                 aria-describedby="comment-message-{{comment.user.id}}\n                 comment-replies-{{comment.user.id}}"\n                 analytics-id="components.directives.discussion.insights.goToDiscussion.link">\n                <bb-avatar class="top-participant-avatar" user="comment.user.avatarData"></bb-avatar>\n                <div class="comment-info">\n                  <div class="comment-message ellipsis" id="comment-message-{{comment.user.id}}">{{comment.message}}</div>\n                  <div class="byline ellipsis">\n                    <span id="comment-user-{{comment.user.id}}">\n                      <bb-translate>components.directives.discussion.insights.by</bb-translate> {{comment.user.localizedName}}\n                      <span ng-show="isGroupDiscussion"><bb-translate>components.directives.discussion.insights.inGroup</bb-translate> {{comment.user.group.name}}</span>\n                    </span> |\n                    <span id="comment-replies-{{comment.user.id}}"> {{comment.numReplies}} <bb-translate>components.directives.discussion.insights.replies</bb-translate></span>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class="top-participants column {{topParticipantColumns}} student-list-box" ng-if="displayTopParticipants">\n          <h3 id="top-heading" class="stat-title subheader" bb-translate="components.directives.discussion.insights.topParticipants"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-participants-row child-is-invokable"\n                 bb-click-to-invoke-child="a.grading-panel-link"\n                 ng-class="{\'last\':$last, \'not-graded\': (!isGradable || isGroupDiscussion), \'group-row\':isGroupDiscussion}"\n                 ng-repeat="participant in topParticipants | limitTo: numberOfCommentsToDisplay | orderBy: \'-numComments\'">\n              <a href="javascript:void(0);"\n                 class="grading-panel-link"\n                 aria-labelledby="user-{{participant.user.id}} top-heading"\n                 aria-describedby="span-replies-{{participant.user.id}} span-feedback-{{participant.user.id}}"\n                 ng-class="{\'not-graded\': (!isGradable || isGroupDiscussion)}"\n                 ng-click="discussionInsights.goToGrade(participant.user.id)"\n                 analytics-id="components.directives.discussion.insights.goToGrade.link">\n                <bb-avatar class="comment-avatar" user="participant.user.avatarData"></bb-avatar>\n                <div class="top-participant-info ellipsis" ng-class="{\'not-graded\': !isGradable}">\n                  <span class="discussion-insights-heading" id="user-{{participant.user.id}}">{{participant.user.localizedName}}</span><br>\n                  <span class="ellipsis" ng-show="isGroupDiscussion">{{participant.user.group.name}}</span><br ng-show="isGroupDiscussion">\n                  <span class="byline" id="span-feedback-{{participant.user.id}}">\n                    <bb-svg-icon class="top-participant-icon" size="small" icon="feedback" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.feedback\'}"></bb-svg-icon>\n                    {{participant.numComments}}\n                  </span>\n                  <span class="byline" id="span-replies-{{participant.user.id}}">\n                  <bb-svg-icon class="top-participant-icon" size="small" icon="replies" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.replies\'}"></bb-svg-icon>\n                    {{participant.numReplies}}\n                  </span>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ui-view="telemetry-discussion-forum-insights-base@"></div>\n  </section>\n</div>\n'},XPgl:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-arrow-down",use:"icon-small-arrow-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-down"><path d="M1 4l7 7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},YHe3:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return w}));var i=n("D57K"),s=n("Llzl"),o=n("pjml"),a=n("TnpK"),r=n("Q/M7"),c=n("12mu"),l=n("0JpG"),d=n("nYZ0"),u=n("Qbdf"),p=n("vhkR"),h=n("zJP2"),m=n("IbyE"),b=n("zGdY"),g=n("CY5M"),v=n("nmzr"),f=n("DU7P"),y=n("aHpC");n("TuNX");const C="ultra.components.services.proctoring",w="proctoring",S={Respondus:"respondus"};let I=class{constructor(e,t,n,i,s,o,a,r,c,l,d,u,p){this.$q=e,this.$rootScope=t,this.$sce=n,this.$window=i,this.CourseModel=s,this.CourseContentModel=o,this.ProctoringServicesModel=a,this.modal=r,this.contentService=c,this.contextCourse=l,this.localize=d,this.ultraState=u,this.ltiService=p}getBooksAndToolsDescription(e){return"components.services.proctoring.booksAndTools."+S[e.vendor]+".description"}getProctoringServices(){const e=this.$q.defer();return this.ProctoringServicesModel.$search({"availability.available":"Yes"}).$allow(["400-599"]).$asPromise().then(t=>{t.$response&&t.$response.status>=400?e.resolve([]):e.resolve(t)},()=>e.resolve([])),e.promise}getProctoringAssessmentSettingsText(e){return"components.services.proctoring.settings."+S[e]+".toolLink"}getProctoringAssessmentSettingsRequirementsText(e){const t="components.services.proctoring.settings.";return e.getProctoringServiceHandle()&&e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+S[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+S[e.getProctoringServiceVendor()]+".secureBrowserRequired":null}getProctoringOverviewBrowserText(e){return e.isSecureBrowserRequiredToTake()?"components.services.proctoring.overview."+S[e.getProctoringServiceVendor()]+".browser":null}getProctoringOverviewRequirementsText(e){const t="components.services.proctoring.overview.";return e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+S[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+S[e.getProctoringServiceVendor()]+".secureBrowserRequired":null}getProctoringOverviewDownloadText(e){return e.getProctoringDownloadUrl()?"components.services.proctoring.overview."+S[e.getProctoringServiceVendor()]+".downloadBrowser":null}openProctoringLTITool(e,t){let n="/webapps/assessment/controller/proctoring/launchProctoringSettings?proctoring_svc_id="+e.id+"&course_id="+this.contextCourse.courseId;t&&(n+="&content_id="+t.id);const i={toolHref:r.c(n)};t&&t.title&&t.title.length>0&&(i.toolSubtitle=t.title),this.ultraState.goPeekState("proctoring-lti-tool",i)}getProctoringReviewButtonText(e){return"components.services.proctoring.delivery.review."+S[e]+".reviewResults"}getProctoringReviewDownloadText(e){return"components.services.proctoring.delivery.review."+S[e]+".download"}getProctoringPageRequirementsText(e){return"components.services.proctoring.page."+S[e]+".requirements"}getProctoringPageDownloadText(e){return"components.services.proctoring.page."+S[e]+".download"}getProctoringPageBrowserText(e){return"components.services.proctoring.page."+S[e]+".browser"}getSecureBbEditorOptions(e){return this.ultraState.current.name===v.BaseRoutes.BASE_PROCTORING_ATTEMPT&&(e.attachment=!1,e.image=!1,e.youtubeVideo=!1,e.video=!1,e.contentMarket=!1),e}handleProctoredAssessmentClose(e,t){if("Respondus"===e.getProctoringServiceVendor())r.p(r.c("/ultra/proctoring/close?rldbsm=1&rldbxb=1"));else if(t){const t={handle:e.getProctoringServiceHandle(),linkType:m.ContentHandler.LtiPlacement};let n=Object(g.getLaunchLinkFromLinkRef)(t);n=r.a(n,"custom_proctoring_end_assessment_return","true"),n=r.a(n,"course_id",e.courseId),n=r.a(n,"content_id",e.id),n=r.a(n,"from_ultra","true"),this.ultraState.leavePeekState().then(()=>{this.ltiService.launch(n)})}else this.ultraState.goPeekState(v.AssessmentRoutes.ASSESSMENT_OVERVIEW,{contentId:e.id})}getProctoringServiceByHandle(e){return this.$q.resolve(h.a.loadProctoringService(e))}fetchProctoringServices(){return this.$q.resolve(h.a.loadAvailableProctoringServices())}fetchProctoringServiceIntegrations(){return this.$q.resolve(h.a.loadAvailableProctoringServicesWithIntegration())}getCurrentProctoringProviderType(e){return e?e===f.b?f.a.Respondus:f.a.IMS:f.a.None}isRespondusProctoringServiceProvider(e){return this.getCurrentProctoringProviderType(e.handle)===f.a.Respondus}isIMSProctoringServiceProvider(e){return this.getCurrentProctoringProviderType(e.handle)===f.a.IMS}isProctoringServiceUnavailable(e,t){return this.isProctoringPlacementUnavailable(e,t)||this.isProctoringUEFUnavailable(e,t)}isProctoringPlacementUnavailable(e,t){return!!e&&(null==t||t.availability.available===b.PublicAvailability.No)}isProctoringUEFUnavailable(e,t){if(!!e){return!this.isRespondusProctoringServiceProvider(t)&&!this.getProctoringServiceIntegrationId(t)}return!1}getProctoringServiceIntegrationId(e){var t;if(e)return null===(t=h.a.getProctoringIntegration(e.handle))||void 0===t?void 0:t.integrationId}promptIntegrationToSave(e,t,n,i){return this.$q.resolve(h.a.promptIntegrationToSaveSettings(e,t,n,i))}openRespondusProctoringLaunchLink(t){if(e("#respondus-iframe").remove(),t.startsWith("data:text/plain,")){const e=`<iframe src="data://text/plain,${t.substring("data:text/plain,".length)}" id="respondus-iframe" style="display:none"></iframe>`;this.createRespondusIFrameAndSetLocation(e)}else this.setRespondusWindowLocation(t)}createRespondusIFrameAndSetLocation(t){document.body.appendChild(e(t)[0])}setRespondusWindowLocation(e){this.$window.location.assign(e)}};I=Object(i.__decorate)([Object(i.__param)(0,Object(y.b)("$q")),Object(i.__param)(1,Object(y.b)("$rootScope")),Object(i.__param)(2,Object(y.b)("$sce")),Object(i.__param)(3,Object(y.b)("$window")),Object(i.__param)(4,Object(y.b)(o.m.serviceName)),Object(i.__param)(5,Object(y.b)(o.p.serviceName)),Object(i.__param)(6,Object(y.b)(o.kb.serviceName)),Object(i.__param)(7,Object(y.b)(c.b)),Object(i.__param)(8,Object(y.b)(d.f)),Object(i.__param)(9,Object(y.b)(u.e)),Object(i.__param)(10,Object(y.b)(l.serviceName)),Object(i.__param)(11,Object(y.b)(a.d)),Object(i.__param)(12,Object(y.b)(p.b))],I);class k extends I{}s.module(C,["ngSanitize",d.d,l.moduleName,c.a,a.b,u.b,p.a]).service(w,I)}).call(this,n("5iHu"))},Ybms:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-duplicate",use:"icon-small-duplicate-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-duplicate"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 4h11v11H1z" /><path d="M12 12h3V1H4v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},Youf:function(e,t){e.exports='<a class="content-title"\n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n   ng-click="contentItemLtiLaunch.ltiLaunch()"\n   href="javascript:void(0);"\n   analytics-id="content.item.ltilaunch.link"><span>{{ content.title }}</span></a>\n<div ng-if="contentItemBase.isExcludedOrDeletedLtiToolProvider() && !contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()">\n      <span class="broken-lti-link" ng-if="!contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.excluded-lti-provider.instructor</span>\n      <span class="broken-lti-link" ng-if="contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.excluded-lti-provider.admin</span>\n</div>\n<div ng-if="contentItemBase.isUnlaunchableLtiLink() && !contentItemBase.isExcludedOrDeletedLtiToolProvider() && !contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()">\n      <span class="broken-lti-link" ng-if="!contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.deleted-placement.instructor</span>\n      <span class="broken-lti-link" ng-if="contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.deleted-placement.admin</span>\n</div>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.approval-required</span>\n'},a2qY:function(e,t){e.exports='<div bb-load-bundle="components/directives/content-item-base" ng-class="::contentItemBase.getRootClassName()" bb-cache-compilation="content-item-base">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" bb-click-to-invoke-child=".content-title">\n    <div ng-switch on="content.ui.importPlaceholder" class="content-item-row-container">\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n      <bb-review-state-icon\n        ng-if="contentItemBase.shouldShowReviewStateIcon()"\n        content-id="content.id"\n        course-id="contentItemBase.courseId"\n        on-review-state-icon-click="contentItemBase.onReviewStateIconClick"\n        has-automatic-review-state-transition="!content.canUpdateReviewState()"\n        before-item-state="contentItemBase.getNeighborReviewState(itemBefore)"\n        after-item-state="contentItemBase.getNeighborReviewState(itemAfter)"\n      ></bb-review-state-icon>\n\n      <div ng-switch-default class="row drag-element-row" ng-class="{\n        \'is-restricted\': content.canViewAsInstructor() && content.isHiddenFromStudents(),\n        \'hidden-from-student-cr\': content.canViewAsInstructor() && content.isConditionalReleaseWithHiddenFromStudent(),\n        \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canViewAsInstructor()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n              <ng-switch on="content.ui.isUploading">\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n\n                <div class="outline-item-inner" ng-switch-default>\n                  <div class="element-image" ng-if="contentItemBase.isGradeLoaded" bb-content-item-icon="content" show-alert-icon="contentItemBase.shouldShowAlertIcon()">\n                  </div>\n                  <div class="element-details">\n                    <div ng-if="shouldShowContent">\n                      <bb-content-item-course-outline ng-if="!contentItemBase.isEngagementOutline()"></bb-content-item-course-outline>\n                      <bb-content-item-engagement-outline ng-if="contentItemBase.isEngagementOutline()"></bb-content-item-engagement-outline>\n                    </div>\n                    <div ng-if="!contentItemBase.shouldShowContent">\n                      {{contentItemBase.overrideMessage}}\n                    </div>\n                  </div>\n                </div>\n              </ng-switch>\n            </div>\n          </div>\n          <div ng-if="content.id" class="item-controls">\n            \x3c!-- Show this if the user has edit permissions on the content and it is movable //--\x3e\n            <button bb-drag-handle\n                    drag-item-id="{{content.id}}"\n                    drag-item-name="{{content.title}}"\n                    drag-item-type="{{contentItemBase.contentHandler}}"\n                    drag-item-context="{{contextArea}}"\n                    class="super-clear small button icon js-drag-handle"\n                    ng-if="canMove && content.canEdit()"\n                    translate-attrs-values="{contentTitle: content.title}"\n                    bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                    analytics-id="content.item.base.move.button"\n                    >\n\n              <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n            </button>\n            <bb-ally-content-ref\n                ng-if="contentItemBase.canShowAlly"\n                content-id="{{content.id}}"\n                file-id="{{::contentItemBase.allyService.getXythosIdFromContentItem(content)}}"\n                file-preview-url="{{::content.getContentDisplay().contentUrl()}}"\n            ></bb-ally-content-ref>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly"\n              content-id="{{content.id}}"\n              show-view-score-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAllyAlternativeFormats(content)"\n              content-id="{{content.id}}"\n              show-alternative-formats-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            \x3c!-- Show this if the user has edit or delete permissions //--\x3e\n            <div class="right" bb-foundation-defer>\n              <bb-overflow-menu ng-show="contentItemBase.showOverflowMenu()"\n                                element-id="{{content.id}}"\n                                element-name="{{content.title}}"\n                                menu-items="contentItemBase.getOverflowMenu()"\n                                on-menu-toggle="contentItemBase.updateAlly()"\n                                ng-attr-data-ally-content-ref="{{content.id}}"\n                                ng-attr-data-ally-show="{{ contentItemBase.overflowMenuIsAllyConditional() ? \'instructorfeedback\' : undefined }}"\n                                analytics-id-tag-prefix="components.directives.content-item-base.overflowMenu">\n              </bb-overflow-menu>\n            </div>\n          </div>\n        </div>\n\n        <div ng-if="contentItemBase.getDescription()" class="content-item-description">\n          <bb-course-content-item-description\n            description="contentItemBase.getDescription()"\n          ></bb-course-content-item-description>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},aCck:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("Llzl"),s=n("pjml"),o=n("eYRL"),a=n("IbyE");const r="ultra.directives.webLinkItem";class c{constructor(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"=",aria:"=?",tabbable:"=?"},this.template=o,this.link=(e,t)=>{const n=e.$watch("targetContent.contentHandler",t=>{null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())});!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then(()=>{e.content.description=e.targetContent.description})),e.ariaDescribedBy="content-item-icon-"+e.content.id,e.content.ui.hasIndicator&&(e.ariaDescribedBy+=" activity-indicator-"+e.content.id),a.ContentHelper.isNotAccessibleButVisibleForcedSequenceItem(e.content)?(e.aria=!0,e.tabbable=!0):(e.aria=!1,e.tabbable=!1)}}}c.$inject=[s.m.serviceName],i.module(r,[]).directive("bbWebLinkItem",["$injector",e=>e.instantiate(c)])},aTRN:function(e,t,n){"use strict";var i=n("D57K"),s=n("pjml"),o=n("aHpC"),a=n("4GL6"),r=n("0JpG"),c=n("oi1r"),l=n("TnpK"),d=n("Qbdf"),u=n("X455"),p=n("zGdY"),h=n("IbyE"),m=n("nsO7");const b="performance",g="date";let v=class{constructor(e,t,n,i,s,o,a){this.localizeService=e,this.schemaService=t,this.courseModel=n,this.contextCourse=i,this.contextCourseMembership=s,this.scope=a,this.isPerformanceConditionInvalid=!1,this.role=Object(m.memoize)(()=>this.contextCourseMembership.courseMembership&&this.contextCourseMembership.courseMembership.isStudentMembership()?"student":"instructor"),this.courseId=i.courseId?i.courseId:o.params.courseId}getConditions(e,t,n){var i,s;this.content=e;const o=null===(i=e.adaptiveReleaseRules)||void 0===i?void 0:i.rules;if((null==o?void 0:o.length)||e.isForcedSequenceModule())if((null===(s=null==o?void 0:o[0])||void 0===s?void 0:s.criteria)&&(this.allCriteria=o[0].criteria),this.getACLCriteria()?this.setACLCondition():this.aclToolTips=null,this.getPerformanceCriteria()?this.setPerformanceCondition(t,n):this.performanceToolTips=null,this.getDateCriteria()?this.setDateCondition():this.dateToolTips=null,this.contextCourseMembership.courseMembership.isStudentMembership()&&e.isForcedSequenceItem()){const t=0===e.position?"components.directives.content-item-base.conditionalRelease.student-forced-sequence-first-item-tooltip":"components.directives.content-item-base.conditionalRelease.student-forced-sequence-item-tooltip";this.forcedSequenceTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:t,noWrap:!0,noEscape:!0}),this.updateTooltipScope()}else this.forcedSequenceTips=null}getConditionDescription(){const e=!!this.getACLCriteria(),t=!!this.getPerformanceCriteria(),n=!!this.getDateCriteria(),i=[[e,this.contextCourse.course.isOrganization?"organization-membership":"course-membership"],[n,g],[t,b]].filter(e=>!!e[0]).map(e=>`components.directives.content-item-base.conditionalRelease.conditionDescriptions.${e[1]}`);if(0===i.length)return;const s=this.localizeService.getLocale(this.scope),o=i.map((e,t)=>this.localizeService.translateSync({locale:s,key:`${e}${0===t?"-capitalized":""}`}));return this.localizeService.formatItemsSync(o,o.length,null,this.scope,!1,{noWrap:!0})}getPerformanceCriteria(){return this.getCriteriaByType(h.AdaptiveReleaseCriteriaType.Grade.toString())||this.getCriteriaByType(h.AdaptiveReleaseCriteriaType.GradePercentage.toString())}getDateCriteria(){return this.getCriteriaByType(h.AdaptiveReleaseCriteriaType.Date.toString())}getACLCriteria(){return this.getCriteriaByType(h.AdaptiveReleaseCriteriaType.ACL.toString())}getCriteriaByType(e){return this.allCriteria&&this.allCriteria.find(t=>t.type===e)}setPerformanceCondition(e,t){this.gradeCriteria=this.getPerformanceCriteria();let n=this.gradeCriteria&&this.gradeCriteria.minScore;const i=this.gradeCriteria&&this.gradeCriteria.maxScore,s=this.gradeCriteria&&this.gradeCriteria.gradeColumnId;let o="",a="";if(!s||t){const e=`components.directives.content-item-base.conditionalRelease.${this.role()}-missing-column-error`;return this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:e,noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!0,void this.updateTooltipScope()}this.courseModel.$new(this.courseId||this.content.courseId).gradebook.columns.$find(s).$allow([403]).$then(t=>{if(t.$response&&403===t.$response.status)return this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.content-item-base.conditionalRelease.student-missing-column-error",noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!0,void this.updateTooltipScope();let s=`components.directives.content-item-base.conditionalRelease.${this.role()}-lock-tooltip`;s+=void 0===i?"-common":n===i?"-equal":"-custom";const r=e||t&&t.columnName;this.schemaService.loadSchemas(this.courseId).then(e=>{const c=e&&e.find(e=>e.id===t.gradingSchemaId)||{};this.gradeCriteria&&"Grade_Range"===this.gradeCriteria.type&&(void 0===i&&c.scaleType!==p.SchemaScaleType.Score&&c.scaleType!==p.SchemaScaleType.Complete||(o=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:n||0},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0}),a=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:i||t.possible},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0}))),this.gradeCriteria&&"Grade_Range_Percentage"===this.gradeCriteria.type&&(void 0!==i||c.scaleType===p.SchemaScaleType.Percent?(o=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:n||0},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0}),a=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:i||t.possible},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0})):c.scaleType===p.SchemaScaleType.Tabular&&(c.symbols.sort((e,t)=>e.absoluteTranslation-t.absoluteTranslation),c.symbols.forEach(e=>{e.absoluteTranslation>=n&&(n=e.symbol,o=n)}))),this.getPerformanceToolTips(s,o,a,r)})})}setDateCondition(){if(this.dateCriteria=this.getDateCriteria(),this.dateCriteria){let e=null;this.dateCriteria.start&&this.dateCriteria.end?e="both":this.dateCriteria.start?e="showon":this.dateCriteria.end&&(e="hideafter");const t=`components.directives.content-item-base.conditionalRelease.${this.role()}-${e}-date-tooltip`;this.dateToolTips=e&&this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:t,params:{showon:new Date(this.dateCriteria.start),hideafter:new Date(this.dateCriteria.end)},noWrap:!0,noEscape:!0}),this.updateTooltipScope()}}setACLCondition(){this.aclCriteria=this.getACLCriteria(),this.aclCriteria&&(this.aclToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.content-item-base.conditionalRelease.acl-tooltip",noWrap:!0,noEscape:!0}),this.updateTooltipScope())}getPerformanceToolTips(e,t,n,i,s=""){this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:e,params:{minScore:t,maxScore:n,title:i},noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!1,this.updateTooltipScope()}updateTooltipScope(){angular.isUndefined(this.tooltipScope)&&(this.tooltipScope=this.scope.$new(!0)),this.tooltipScope.items=[],this.aclToolTips&&this.tooltipScope.items.push(this.aclToolTips),this.performanceToolTips&&(this.tooltipScope.items.push(this.performanceToolTips),this.isPerformanceConditionInvalid)?this.tooltips=this.performanceToolTips:(this.dateToolTips&&this.tooltipScope.items.push(this.dateToolTips),this.forcedSequenceTips&&this.tooltipScope.items.push(this.forcedSequenceTips),this.tooltips=this.tooltipScope.items.join(" "))}getConditionalReleaseComplexTooltipTemplate(){return a.a("conditional-release-tooltip")}};v=Object(i.__decorate)([Object(i.__param)(0,Object(o.b)(r.serviceName)),Object(i.__param)(1,Object(o.b)(c.b)),Object(i.__param)(2,Object(o.b)(s.m.serviceName)),Object(i.__param)(3,Object(o.b)(d.e)),Object(i.__param)(4,Object(o.b)(u.d)),Object(i.__param)(5,Object(o.b)(l.d)),Object(i.__param)(6,Object(o.b)("scope"))],v),t.a=v},aY38:function(e,t,n){var i=n("Jygx");e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return i(t)}}},agzH:function(e,t,n){"use strict";var i=n("Llzl"),s=n("0JpG"),o=n("1ZbL"),a=n("/5AG");n.d(t,"a",(function(){return r}));const r="ultra.features.course.outline.review-state-icon",c={Class:a.ReviewStateIconButtonWrapper,bindingNames:["afterItemState","beforeItemState","contentId","courseId","hasAutomaticReviewStateTransition","onReviewStateIconClick"],renderLocalized:!0,withProvider:!0};i.module(r,[s.moduleName]).component("bbReviewStateIcon",Object(o.a)(c))},ap1t:function(e,t,n){"use strict";var i=n("D57K"),s=n("Llzl"),o=n("nsO7"),a=n("d8yC"),r=n("en1n"),c=n("0JpG"),l=n("Fvsw"),d=n("X/qj"),u=n("yMoE"),p=n("pjml"),h=n("TnpK"),m=n("g66W"),b=n("fYJU"),g=n("ooAF"),v=n("nmzr"),f=n("zGdY"),y=n("aHpC"),C=n("qH3X");n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return I}));const w="ultra.components.directives.grade.displayGradePill",S="--",I="na";let k=class{constructor(e,t,n,i,s,o,a,c,l){this.$injector=e,this.$sce=t,this.scope=n,this.element=i,this.bbLocalize=s,this.context=o,this.ultraState=a,this.gradebookPermissionService=c,this.contextUser=l,this.colorCss="";const d=this.scope.column()&&this.scope.column().courseId;this.bundlePromise=s.loadBundle("components/directives/grade/display-grade"),this.canViewGradebook=this.hasViewGradebook(d),this.isStudent=l.userModel.isStudent(),this.canViewGrades=this.hasViewGrades(d),this.canViewGrades?(this.scope.$watch("::column()",e=>{if(e){this.scope.$watchGroup(["column()","attempt()","grade()"],()=>{const e=this.scope.attempt&&this.scope.attempt(),t=this.scope.grade&&this.scope.grade(),n=this.gradeDisplayItem=this.$injector.instantiate(u.a,{gradeDetail:t,scope:this.scope});n.init(this.scope.column()).then(()=>{let i;this.schema=n.schema,this.schema&&(this.scaleType=n.schema.scaleType),e?i=e.displayGrade:t&&this.schema&&(i=t.displayGrade),n.displayGrade=i,this.setFullDisplayValue()})})}}),this.scope.$watch(()=>r.g(),()=>{this.displayValue&&this.setFullDisplayValue()})):(this.displayValue=S,this.colorCss=I),n.$on(C.a.REFRESH_OVERALL_EDITOR,()=>{this.gradeDisplayItem.displayValue||this.shouldShowPendingForGrade()||this.shouldShowPendingForAttempt()||this.setNoSubmitView()})}hasViewGradebook(e){return this.gradebookPermissionService.canView(e)}hasViewGrades(e){return this.isStudent||this.gradebookPermissionService.canViewGrades(e)}shouldShowPendingForGrade(){const e=this.scope.grade;return e&&e()&&!e().isPosted()&&e().hasAttempts()}shouldShowPendingForAttempt(){const e=this.scope.attempt;return e&&e()&&e().isNeedsGrading()}shouldRenderInlineRubric(){const e=this.scope.grade;return this.rubricEvaluationIsComplete()||this.shouldShowPendingForGrade()||this.shouldShowPendingForAttempt()||e().isPastDueZero()}setNoSubmitView(){this.schema&&this.scaleType&&(this.scaleType===f.SchemaScaleType.Percent?this.displayValue=S+" %":this.scaleType===f.SchemaScaleType.Score?this.bundlePromise.then(()=>{var e,t,n,i,s,o;const r=null===(e=this.scope)||void 0===e?void 0:e.grade(),c=null!=(null==r?void 0:r.manualGrade)?r.pointsPossible:null===(n=null===(t=this.scope)||void 0===t?void 0:t.column())||void 0===n?void 0:n.possible,l=null!==(o=null!=c?c:null===(s=null===(i=this.scope)||void 0===i?void 0:i.column())||void 0===s?void 0:s.possible)&&void 0!==o?o:0;this.displayValue=S+this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.display-grade.total",params:{total:a.b(l,2)},noWrap:!0})}):this.displayValue=S)}setFullDisplayValue(){this.displayValue=this.gradeDisplayItem&&this.gradeDisplayItem.displayValue,this.gradeDisplayItem.displayValue?(this.shouldShowPossiblePoints()?this.bundlePromise.then(()=>{this.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.display-grade.score",params:{grade:this.gradeDisplayItem.displayValue,possible:a.b(this.scope.grade&&this.scope.grade().pointsPossible||this.scope.column().possible,2)},noWrap:!0,noEscape:!0})}):this.displayValue=this.gradeDisplayItem.displayValue,this.colorCss=this.gradeDisplayItem.getGradeColor()):this.isStudent&&(this.shouldShowPendingForGrade()||this.shouldShowPendingForAttempt())?(this.colorCss=`${I} pending`,this.bundlePromise.then(()=>{this.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.display-grade.pending-grade",noWrap:!0})})):(this.colorCss=this.isStudent?`${I} no-attempt`:"",this.setNoSubmitView())}get cursorClass(){return this.scope.cursor?`cursor-${this.scope.cursor}`:""}shouldShowPossiblePoints(){return!this.isSmallBP()&&this.gradeDisplayItem&&!o.isNaN(parseFloat(this.gradeDisplayItem.displayValue))&&this.gradeDisplayItem.shouldShowTotalPoints()}isSmallBP(){return r.a.Small.isEqualTo(r.f())}shouldShowRubricButton(){var e,t,n;return!(this.scope.hideRubricIcon||!this.scope.column()||!this.scope.column().hasRubricAssociation())&&(!(!this.scope.column().isDiscussion()&&!this.scope.column().isJournal())||(null!=this.scope.attempt||!(!this.scope.column().isSingleAttempt()||f.AttemptStatus.InProgress===(null===(n=null===(t=null===(e=this.scope.grade())||void 0===e?void 0:e.ui)||void 0===t?void 0:t.attempt)||void 0===n?void 0:n.status))))}rubricEvaluationIsComplete(){const e=this.scope.column();if(e&&e.hasRubricAssociation()){const t=this.scope.attempt?this.scope.attempt():this.scope.grade().ui.attempt;return e.getRubricAssociation().isWithEvaluations&&(t&&t.isCompleted()||e.isDiscussion()||e.isJournal())}return!1}openRubricEvaluation(e){if(this.scope.disableRubricEvalClick&&this.scope.disableRubricEvalClick())return;e.stopPropagation();const t=this.getRubricStateRef();this.ultraState.current.name.endsWith("peek.assessment-submission-feedback")&&this.ultraState.leavePeekState(this.ultraState.current.name),this.ultraState.goPeekState(t.state,t.args)}getRubricStateRef(){var e;let t,n;(this.scope.grade||this.scope.attempt)&&(this.scope.attempt&&(t=null!==(e=this.scope.attempt().groupAttemptId)&&void 0!==e?e:this.scope.attempt().id),this.scope.grade&&this.scope.grade().ui&&this.scope.grade().ui.attempt&&this.scope.grade().ui.attempt.id&&(t=this.scope.grade().ui.attempt.id||this.scope.grade().ui.attempt.groupAttemptId),n=this.scope.attempt?this.scope.attempt().groupId:null,this.scope.grade&&this.scope.grade().ui.groupAttempt&&(n=this.scope.grade().ui.groupAttempt.groupId));const i={state:"",args:{attemptId:t||null,columnId:this.scope.column().id||null,contentId:this.scope.column().contentId||null,courseId:this.scope.column().courseId}};let s="inline-rubric";if(this.scope.isManualStatusPosted||this.gradeDisplayItem.displayValue&&"0"!==this.gradeDisplayItem.displayValue||this.scope.isExternalSubmission||this.scope.column().isCollectExternalSubmissions()||(s=this.shouldRenderInlineRubric()?"inline-rubric":"peek.rubric-view"),this.canViewGradebook||this.scope.column().isDiscussion()||this.scope.column().isJournal()){const e=this.rubricEvaluationIsComplete()?"rubric-evaluation":"rubric-view";i.args.groupId=n||null,i.args.userId=this.scope.grade&&this.scope.grade().user&&(this.scope.grade().user.$pk||this.scope.grade().user.id)||null,i.state=e,this.scope.column().isJournal()&&(i.state=this.rubricEvaluationIsComplete()?v.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_EVALUATION:v.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_VIEW)}else i.args.groupId=n||null,i.state=`${v.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW}.${s}`;return m.d(this.ultraState.current.name,".peek.course.grades")&&(this.scope.column().isCollectExternalSubmissions()?(i.state=`${v.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW}.inline-rubric`,i.args.skipTransitionEvents=!0):i.state="assessment.overview"),i}};k=Object(i.__decorate)([Object(i.__param)(0,Object(y.b)("$injector")),Object(i.__param)(1,Object(y.b)("$sce")),Object(i.__param)(2,Object(y.b)("scope")),Object(i.__param)(3,Object(y.b)("element")),Object(i.__param)(4,Object(y.b)(c.serviceName)),Object(i.__param)(5,Object(y.b)(l.b)),Object(i.__param)(6,Object(y.b)(h.d)),Object(i.__param)(7,Object(y.b)(d.b)),Object(i.__param)(8,Object(y.b)(b.b))],k);class D{constructor(e){this.$injector=e,this.restrict="E",this.template=g,this.scope={attempt:"&?",column:"&",disableRubricEvalClick:"&?",grade:"&?",isManualStatusPosted:"<?",cursor:"@?",hideRubricIcon:"=?",isExternalSubmission:"=?",rubricStateOverride:"@?"},this.link=(e,t)=>{if(!e.attempt&&!e.grade)throw new Error("An attempt or grade must be included on scope");if(e.attempt&&e.grade)throw new Error("An attempt or grade should be included on scope, not both");if(!e.column)throw new Error("A column must be included on scope");e.displayGradePill=this.$injector.instantiate(k,{scope:e,element:t})}}}D.$inject=["$injector"],s.module(w,[p.N,d.a]).directive("bbDisplayGradePill",["$injector",e=>e.instantiate(D)])},bSaK:function(e,t,n){"use strict";var i=n("D57K"),s=n("Sa5G"),o=n("0JpG"),a=n("lEL+"),r=n("yC9S"),c=n("lbhN"),l=n("GbAM");n.d(t,"a",(function(){return d}));const d="ultra.components.directives.courseAccessAlert";let u=class{constructor(e,t,n){this.$scope=e,this.bbLocalize=t,this.timeout=n}$onInit(){this.createAutoHideTimeout(5e3),this.sendConversionTooltipAlert()}cancelAutoHide(){this.autoHideTimeout&&(this.timeout.cancel(this.autoHideTimeout),this.autoHideTimeout=null)}autoHideAgain(){this.createAutoHideTimeout(1e3)}createAutoHideTimeout(e){this.autoHideTimeout&&this.timeout.cancel(this.autoHideTimeout),this.autoHideTimeout=this.timeout(()=>{this.timeoutCallback()},this.$scope,e)}sendConversionTooltipAlert(){if(this.alertType===s.h.ConversionComplete||this.alertType===s.h.ConversionInProgress){const e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.alertType.keys.ariaAlertKey,noWrap:!0,noEscape:!0,params:{courseTitle:this.course.displayName}});this.$scope.$root.$broadcast(l.a,e)}}};u.$inject=["$scope",o.serviceName,a.b],u=Object(i.__decorate)([Object(r.a)({moduleName:d,componentName:"bbCourseAccessAlert",template:c,bindings:{course:"<",alertType:"<",confirmCallback:"&",timeoutCallback:"&"},controllerAs:"accessAlert"})],u)},bhWV:function(e,t,n){"use strict";var i=n("D57K"),s=(n("Sq3Z"),n("1NX5"),n("uAJz"),n("66CI"),n("Llzl")),o=n("YHe3"),a=n("TnpK"),r=n("Qbdf"),c=n("jhBu"),l=n("wy9x"),d=n("ga7A"),u=n("Is+C"),p=n("yV5t");const h="ultra.components.directives.content.contentItem.contentItemType.contentItemScormlaunch";class m{constructor(e,t){this.scope=e,this.scormService=t}scormLaunch(){if(!this.scope.content.isScorm())throw new Error("Attempted to launch a non-SCORM content item. "+this.scope.content.contentHandler.toString());this.scormService.scormLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0})}}m.$inject=["scope",u.c];class b{constructor(e){this.$injector=e,this.restrict="E",this.template=p,this.scope=!1,this.link=(e,t,n)=>{e.contentItemScormLaunch=this.$injector.instantiate(m,{scope:e,element:t,attrs:n})}}}b.$inject=["$injector"],s.module(h,[u.b]).directive("bbContentItemScormlaunch",["$injector",e=>e.instantiate(b)]);var g=n("z+6U"),v=n("Sa5G"),f=n("aHpC"),y=n("nmzr"),C=n("pjml"),w=n("/R3n"),S=n("DU7P"),I=n("zYa8"),k=n("l2+p");Object(I.a)(k.ProctorShield,"ultra.components.directives.bbUiIcon.small.ProctorShield","bbUiIconSmallProctorShield");var D=n("zGdY");n.d(t,"a",(function(){return T}));const T="ultra.components.directives.content.contentItem.contentItemCourseOutline";let x=class{constructor(e,t,n,i,s){this.scope=e,this.entitlementService=t,this.proctoringService=n,this.ultraState=i,this.currentCourseService=s,this.customCategory="",this.entitlementService.hasCourseEntitlement(v.e.ModifyContent,this.scope.content.courseId).then(e=>{this.entitledToModifyContent=e})}get canOpenConditionalRelease(){var e,t,n;return!!(null===(n=null===(t=null===(e=this.scope.content)||void 0===e?void 0:e.permissions)||void 0===t?void 0:t.adaptiveRelease)||void 0===n?void 0:n.view)}shouldAlignMiddle(){const e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))}openConditionalRelease(){if(this.isCourseCompletedAndInInstructorView())return;let e=this.scope.content.id;this.scope.content&&this.scope.content.contentHandler&&this.scope.content.contentDetail&&C.p.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.getLinkContentSource().$then(t=>{e=t.id}),this.ultraState.goPeekState(y.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,{contentId:e})}isCourseCompletedAndInInstructorView(){var e;return(null===(e=this.currentCourseService.course)||void 0===e?void 0:e.isComplete())&&this.scope.content.canViewAsInstructor()}displayProctoredTag(){const e=this.scope.content.getProctoringServiceHandle(),t=this.scope.content.isSecureBrowserRequiredToTake(),n=e&&e!==S.b;return t||n}};x=Object(i.__decorate)([Object(i.__param)(0,Object(f.b)("scope")),Object(i.__param)(1,Object(f.b)(c.b)),Object(i.__param)(2,Object(f.b)(o.b)),Object(i.__param)(3,Object(f.b)(a.d)),Object(i.__param)(4,Object(f.b)(r.e))],x);class O{constructor(e){this.$injector=e,this.restrict="E",this.template=w,this.scope=!1,this.link=e=>{if(e.contentItemCourseOutline=this.$injector.instantiate(x,{scope:e}),e.content.getAssociatedGradingColumn()){const t=e.content.getAssociatedGradingColumn().gradebookCategory;t&&!t.isUserDefined?(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+t.title,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+t.title):(e.contentItemCourseOutline.customCategory=t&&t.title,e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description.custom",e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title.custom")}else e.contentItemBase.courseLinkContentHandler.isEqualTo(e.content.contentHandler)&&(e.contentItemCourseOutline.groupAssessmentFtueKey=`components.directives.content-item-base.group-assessment-description.${D.KnownGradebookCategoryTitle.Discussion}`,e.contentItemCourseOutline.groupAssessmentFtueTitleKey=`components.directives.content-item-base.group-assessment-title.${D.KnownGradebookCategoryTitle.Discussion}`)}}}O.$inject=["$injector"],s.module(T,[l.a,d.a,g.a,h,o.a,a.b,r.b,"ultra.components.directives.bbUiIcon.small.ProctorShield"]).directive("bbContentItemCourseOutline",["$injector",e=>e.instantiate(O)])},c2Z8:function(e,t){e.exports='<div class="bb-statistics">\n  <ul class="statistics-list total-items-{{::statistics.total}} small-per-row-{{::statistics.smallPerRow}} large-per-row-{{::statistics.largePerRow}}">\n    <li ng-repeat="item in statistics.config">\n      <div class="statistics-item-container" ng-class="{\'no-default-padding\': item.noDefaultPadding, \'full-height\': !item.complexScope}">\n        <div class="stat-title" ng-attr-title="{{ item.hover ? item.hover : undefined }}" bb-translate>{{::item.title}}</div>\n        <div ng-if="::!item.complexScope" bb-simple-statistic item="::item"></div>\n        <div ng-if="::item.complexScope" bb-complex-statistic item="::item"></div>\n      </div>\n    </li>\n  </ul>\n</div>'},"c7N/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("D57K"),s=n("Fvsw"),o=n("jhBu"),a=n("aHpC"),r=n("Sa5G");const c="ultra.components.services.unsafe-html",l="unsafe-html";let d=class{constructor(e,t){this.contextService=e,this.entitlementService=t}hasEditUnsafeHtmlPermission(){return this.entitlementService.hasCourseEntitlement(r.w.Modify)}isAlternateDomainConfigured(){return this.contextService.getSystemInfo().alternateDomainConfigured}canEditUnsafeHtml(){return this.hasEditUnsafeHtmlPermission().then(e=>e&&this.isAlternateDomainConfigured())}};d=Object(i.__decorate)([Object(i.__param)(0,Object(a.b)(s.b)),Object(i.__param)(1,Object(a.b)(o.b))],d);class u extends d{}angular.module(c,[s.a,o.a]).service(l,d)},"dL5/":function(e,t){e.exports='<span class="group-count-directive" bb-load-bundle="components/directives/group/group-count">\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="!$ctrl.isSelfEnrollment()">components.directives.group-count.groups.plural</bb-translate>\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="$ctrl.isSelfEnrollment()">components.directives.group-count.groups.selfEnroll.plural</bb-translate>\n</span>\n'},e7Kn:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var i=n("D57K"),s=(n("1/hr"),n("Llzl")),o=n("lx16"),a=n("0JpG"),r=n("kC07"),c=n("RPq7"),l=n("nYZ0"),d=n("LdA1"),u=n("sLTT"),p=n("M8+u"),h=n("D8d/"),m=n("L+81"),b=n("lr7J"),g=n("aHpC"),v=n("pjml"),f=n("rtZE"),y=n("tfx2"),C=n("lEL+"),w=n("gkef"),S=n("oQrK"),I=n("fN3Q"),k=n("hDL0"),D=n("W6wm");const T="ultra.directives.contentOutline";let x=class{constructor(t,n,i,s,o,a,r,c){this.scope=t,this.element=n,this.ContentService=s,this.CourseContentModel=o,this.timeout=a,this.windowService=r,this.localizeService=c,this.cloudUploadInProgress={},this.showContentImportProgress=!1,this.LARGE_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap",this.SMALL_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap .panel-content",this.getContentTrackingId=e=>null!=e.id?e.id:(e.ui.tempId||(e.ui.tempId=this.getTempId()),e.ui.tempId),this.contextArea=t.contextArea,this.addContentButtonLocation=null,this.loadMoreChildren=t.loadMoreChildren,this.parentFolder=t.parentFolder,this.onFileDropHandler=t.onFileDropHandler,this.onMoveHandler=t.onMoveHandler,this.onMoveIntoFolderHandler=t.onMoveIntoFolderHandler,this.canMove=t.canMove&&(!t.contents.permissions||t.contents.permissions.move),this.showMenuOverride=!1,null!=t.contents&&"function"==typeof t.contents.$asPromise&&t.contents.$asPromise().then(()=>{this.showMenuOverride=0===t.contents.length}),this.placeholderContent=this.CourseContentModel.$buildRaw({id:this.parentFolder&&this.parentFolder.id&&this.parentFolder.id+"_placeholder",parentId:this.parentFolder&&this.parentFolder.id,contentHandler:v.p.ContentHandler.Unknown.toString(),depth:this.parentFolder&&this.parentFolder.depth&&this.parentFolder.depth+1}),t.$watch("contents.length",(i,s)=>{this.showMenuOverride=0===i,this.placeholderContent.id=this.parentFolder&&this.parentFolder.id&&this.parentFolder.id+"_placeholder",this.placeholderContent.parentId=this.parentFolder&&this.parentFolder.id,this.resetMovableAddContentButton(n),i<s&&(t.$emit("content-outline-infinite-scroll-check"),e(`#add-button${this.scope.parentFolder.id}`).appendTo(e(`#add-button-container${this.scope.parentFolder.id}`)))}),t.$eval(i.showContentImportProgress)&&this.addImportPlaceholder(),t.$on("bb-drag-start",()=>{this.resetMovableAddContentButton(n)}),t.$on("keyboard-drag-start",()=>{this.resetMovableAddContentButton(n)}),t.$on("showContentImportProgress",(e,t,n)=>{"-1"!==n&&this.parentFolder.id!==n||this.addImportPlaceholder()}),t.$on(y.b,(e,t)=>{this.cloudUploadInProgress[t]||(this.cloudUploadInProgress[t]=!0)})}resetMovableAddContentButton(e){this.addContentButtonLocation=null,e.append(this.getMovableAddContentButton())}addImportPlaceholder(){this.ContentService.getOrMakeContentInContentTree(this.parentFolder,this.parentFolder.courseId,void 0,this.parentFolder.id,"start").then(t=>{t.content.ui.importPlaceholder=!0,this.timeout(()=>{e(".placeholder-container").closest(".js-content-div").scrollintoview({duration:300})},this.scope,0,!1)})}getScrollContainerSelector(){return this.windowService.isLargeBreakpoint()?this.LARGE_CONTAINER_SELECTOR:this.SMALL_CONTAINER_SELECTOR}getScrollForceShowSelector(){return`.${r.a}`}isAllContentsLoaded(){return!!(this.scope.contents&&this.scope.contents.paging&&this.scope.contents.paging.count)&&this.scope.contents.length>=this.scope.contents.paging.count}isAddContentButtonUnattached(e){return!!e&&(!this.addContentButtonLocation||e!==this.addContentButtonLocation.id)}placeAddButton(t,n=!1){const i=this.parentFolder?`.movable-add-content-button-folder${this.parentFolder.id}`:"";if(!this.isAddContentButtonUnattached(t.id)||this.contextArea===D.a.Discussions||void 0===t.id)return;const s=!!document.querySelector(".ms-ContextualMenu-list.is-open");!n&&s||(this.getMovableAddContentButton().appendTo(e(`#add-button-placeholder${t.id}`)),this.addContentButtonLocation=t,this.scope.$broadcast("change-add-content-button-position",{reopen:s}),n&&this.element.find(`.movable-add-content-button.movable-add-content-button${i} .button-add-content.js-show-add-options`).focus())}getMovableAddContentButton(){const e=this.parentFolder?`.movable-add-content-button-folder${this.parentFolder.id}`:"";return this.element.find(`.movable-add-content-button${e}`)}getAddButtonLineLabel(e){return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.add-content-button.aria-label.content.add-button-label-item-name-after",params:{itemName:e},noWrap:!0,noEscape:!0})}isMobileDevice(){return S.a.detect().mobile()}shouldShowMenuOverride(){return(!this.parentFolder||0!==this.parentFolder.depth)&&this.showMenuOverride}shouldShowAddButton(){return this.scope.isFirst||this.scope.contents&&0===this.scope.contents.length}hasId(e){return this.scope.contents.some(t=>t.ui.tempId===e||t.id===e)}getTempId(){let e,t=!1;for(;!t;)e=Object(I.v4)(),t=!this.hasId(e);return e}isProgressTrackingStateShown(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canViewReviewState}};x=Object(i.__decorate)([Object(i.__param)(0,Object(g.b)("scope")),Object(i.__param)(1,Object(g.b)("element")),Object(i.__param)(2,Object(g.b)("attrs")),Object(i.__param)(3,Object(g.b)(l.f)),Object(i.__param)(4,Object(g.b)(v.p.serviceName)),Object(i.__param)(5,Object(g.b)(C.b)),Object(i.__param)(6,Object(g.b)(w.b)),Object(i.__param)(7,Object(g.b)(a.serviceName))],x);class O{constructor(e,t){this.link=e,this.recursionHelper=t,this.replace=!0,this.restrict="E",this.scope={canCreate:"=",contents:"=",contextArea:"=",loadMoreChildren:"=",isFirst:"=",parentFolder:"=",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=?",canMove:"=",canCreateAllContents:"=?",canCopyImport:"=?",hideAddMenuOverride:"=?"},this.compile=e=>this.recursionHelper.compile("content-outline-directive",e,this.link),this.template=k}}O.$inject=["link",f.b],s.module(T,[o.a,r.b,u.a,p.a,d.a,c.b,l.d,h.a,m.a,b.b,f.a,w.a,a.moduleName]).directive("bbContentOutline",["$injector",l.f,e=>{return e.instantiate(O,{link:(t,n,i)=>{t.contentOutline=e.instantiate(x,{scope:t,element:n,attrs:i})}})}])}).call(this,n("5iHu"))},eTv5:function(e,t){e.exports='<div class="element-card tile {{courseColorClass}} base-grades-course-tile" ng-class="($parent.$last && $parent.$first) ? \'base-grades-only-card\' : \'\'">\n  <div class="clearfix">\n\n    <div class="row grades-header">\n      <div class="columns small-7" bb-click-to-invoke-child="a.bb-click-target">\n        <span class="course-number">{{course.courseId}}</span>\n        <a class="bb-click-target js-base-grades-course-button"\n           href="javascript:void(0);"\n           ng-click="baseGradesGrader.handleCourseClick()"\n           ng-attr-aria-describedby="{{baseGradesGrader.externalGradeSummary.averageGradeForStudentsSchemaValue !== undefined\n           ? \'avgGrade_\' + course.id : undefined}}"\n           analytics-id="components.directives.grade.baseGradesGrader.course.link">\n          <h3 class="subheader">{{course.name}}</h3>\n        </a>\n        <bb-schedule-outline class="schedule" schedule-outline-collection="course.schedule"></bb-schedule-outline>\n      </div>\n\n      <div class="columns small-5 grade-grader">\n        <bb-telemetry-link course-id="course.id" context-type="\'baseGrades\'"></bb-telemetry-link>\n        \x3c!--Current Grade--\x3e\n        <bb-display-grade column="baseGradesGrader.externalGradeColumn"\n                          summary="baseGradesGrader.externalGradeSummary"\n                          display-type="FinalBase"\n                          translate-key="components.directives.grade.base-grades-grader.average"\n                          cursor-default="true"\n                          id="avgGrade_{{course.id}}"\n                          course="course"></bb-display-grade>\n      </div>\n    </div>\n\n    \x3c!--Display "no content" message if there is no gradable content--\x3e\n    <div class="row" ng-if="!baseGradesGrader.hasGradeItems">\n      <div class="columns small-12 base-grades-empty-element">\n        <div class="base-grades-empty-state text-center">\n          <p class="main" bb-translate>components.directives.grade.base-grades-grader.noContentHeader</p>\n        </div>\n      </div>\n    </div>\n\n    <div class="row" ng-if="!baseGradesGrader.hasGradeItems">\n      <div class="columns small-12 grades-toggle-wrapper js-toggle-no-grade-items">\n        <a class="grades-toggle right"\n           bb-peek-sref="course.outline({courseId:course.id})"\n           analytics-id="components.directives.grade.base-grades-grader.noContentBody"\n           bb-translate>components.directives.grade.base-grades-grader.noContentBody</a>\n      </div>\n    </div>\n\n    \x3c!--Display "all graded" message if gradable content exists and has all been graded/posted--\x3e\n    <div class="row " ng-if="!baseGradesGrader.showAllGrades && baseGradesGrader.hasGradeItems && (baseGradesGrader.defaultColumns.length === 0)">\n      <div class="columns small-12 base-grades-empty-element">\n        <div class="base-grades-empty-state text-center">\n          <p class="main" bb-translate>\n            {{baseGradesGrader.course.isUltra() ? \'components.directives.grade.base-grades-grader.allGraded\' : \'components.directives.grade.base-grades-grader.allGradedForClassicCourse\'}}\n          </p>\n        </div>\n      </div>\n    </div>\n\n    \x3c!--Default Grades (display if "all grades" toggle is OFF and default columns exist)--\x3e\n    <div id="grades-default" ng-if="!baseGradesGrader.showAllGrades && (baseGradesGrader.defaultColumns.length > 0)">\n      <bb-grader-column ng-if="baseGradesGrader.allCategoriesLoaded"\n                        ng-class="{\'last-tabular-row-container\':$last}"\n                        ng-repeat="column in baseGradesGrader.defaultColumns"\n                        category-map="baseGradesGrader.categoryMap"\n                        column="column"\n                        course="course"\n                        is-course-view="false"\n                        data-column-id="{{column.id}}"\n                        data-content-id="{{column.contentId}}"\n                        attendance-is-available="baseGradesGrader.attendanceIsAvailable"></bb-grader-column>\n      <bb-guidance ng-if="$parent.$parent.$first" id="guidance-moment-grade-click" component-key="grades.grader.base.column.clickItem"\n                   class="guidance-grade-base-click-item guidance-element-overlay" role="tooltip">\n        <bb-translate>components.directives.grade.base-grades-grader.ftue.clickItem</bb-translate>\n      </bb-guidance>\n    </div>\n\n    \x3c!--All Grades (display if "all grades" toggle is ON and gradable items exist)--\x3e\n    <div id="grades-all" ng-if="baseGradesGrader.showAllGrades && baseGradesGrader.hasGradeItems">\n      \x3c!--Grader column--\x3e\n      <bb-grader-column ng-if="baseGradesGrader.allCategoriesLoaded"\n                        ng-class="{\'last-tabular-row-container\':$last}"\n                        ng-repeat="column in baseGradesGrader.allColumns"\n                        category-map="baseGradesGrader.categoryMap"\n                        column="column"\n                        course="course"\n                        is-course-view="false"\n                        data-column-id="{{column.id}}"\n                        data-content-id="{{column.contentId}}"\n                        attendance-is-available="baseGradesGrader.attendanceIsAvailable"></bb-grader-column>\n    </div>\n\n    <div class="row" ng-if="baseGradesGrader.hasGradeItems">\n      <div class="columns small-12 grades-toggle-wrapper js-toggle-has-grade-items" ng-if="baseGradesGrader.allColumns.length > baseGradesGrader.defaultColumns.length">\n        \x3c!--View all link--\x3e\n        <ng-switch on="baseGradesGrader.showAllGrades">\n          <button ng-switch-when="false"\n             class="grades-toggle button-anchor right"\n             ng-click="baseGradesGrader.clickShowAll()"\n             aria-expanded="{{!baseGradesGrader.showAllGrades ? false : true}}"\n             bb-translate-attrs="{\'aria-label\': \'components.directives.grade.base-grades-grader.aria-label.viewAll\'}"\n             translate-attrs-values="{courseName: course.name, count: baseGradesGrader.allColumns.length}"\n             analytics-id="components.directives.grades.baseGrades.viewAll.button">\n            <span bb-translate translate-values="{ count: baseGradesGrader.allColumns.length }">\n              components.directives.grade.base-grades-grader.viewAll\n            </span>\n          </button>\n          <button ng-switch-when="true"\n             class="grades-toggle button-anchor right"\n             ng-click="baseGradesGrader.showAllGrades = !baseGradesGrader.showAllGrades"\n             aria-expanded="{{!baseGradesGrader.showAllGrades ? false : true}}"\n             bb-translate-attrs="{\'aria-label\': \'components.directives.grade.base-grades-grader.aria-label.hide\'}"\n             translate-attrs-values="{courseName: course.name}"\n             analytics-id="components.directives.grades.baseGrades.hide.button">\n            <span bb-translate>\n              components.directives.grade.base-grades-grader.hide\n            </span>\n          </button>\n        </ng-switch>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="baseGradesGrader.showConversionMessage">\n    <bb-course-access-alert course="course"\n                            alert-type="baseGradesGrader.getAlertType()"\n                            confirm-callback="baseGradesGrader.closeConversionTooltip()"\n                            timeout-callback="baseGradesGrader.closeConversionTooltip()">\n    </bb-course-access-alert>\n  </div>\n</div>\n'},eWdw:function(e,t,n){},eYRL:function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-forumlink" class="content-title"\n     bb-peek-sref="discussion.view.with-grading({contentId:\'{{targetContent.id}}\'})"\n     bb-prevent-click-if="targetContent.isConditionalReleaseLocked()"\n     aria-describedby="{{ariaDescribedBy}}"\n     analytics-id="course.link.item.forumLink.link"\n     aria-hidden="{{ aria }}"\n     tabindex="{{ tabbable ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n  <div ng-switch-default class="content-title">{{ content.title }}</div>\n</ng-switch>\n'},fvgg:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("LxBy");const o="ultra.components.directives.bbUiIcon.medium.Messages";Object(i.a)(s.a,o,"bbUiIconMediumMessages")},fzAu:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return D}));var i=n("nsO7"),s=n("Llzl"),o=n("Fvsw"),a=n("ZzN+"),r=n("bSaK"),c=n("dJ97"),l=n("Sa5G"),d=n("P2dS"),u=n("pKNj"),p=n("o5Lu"),h=n("0JpG"),m=n("pjml"),b=n("wgY5"),g=n("zByx"),v=n("IbyE"),f=n("unHm"),y=n("lEL+"),C=n("TnpK"),w=n("fYJU"),S=n("eTv5"),I=n("nmzr"),k=n("yC9S");const D="ultra.components.directives.grade.baseGradesGrader";class T{constructor(e,t,n,o,a,r,c,l,d,u,h){this.scope=e,this.$q=t,this.course=o,this.grade=a,this.bbLocalize=r,this.ultraState=c,this.timeout=l,this.categoryService=d,this.courseConversionService=u,this.contextUser=h,this.showAllGrades=!1,this.categoryMap={},this.allCategoriesLoaded=!1,this.showConversionMessage=!1,this.attendanceIsAvailable=!1,this.bbLocalize.loadBundle("components/directives/grade/base-grades-grader").then(()=>{this.course.$then(()=>{this.course.schedule.$resolve(),this.userId=h.userId,this.loadColumns(),this.course.isToolAvailable("bb-attendance").then(e=>{this.attendanceIsAvailable=e})})}),e.$on("$stateChangeSuccess",()=>{this.contentUpdated&&(this.loadColumns(),this.contentUpdated=!1)}),e.$on("attempt-base-content-update",(e,t,n)=>{if(this.allColumns&&this.course.id===n){const e=this.allColumns.filter(e=>t.id===e.contentId);e.length>0&&e.forEach(e=>{e.$fetch()})}}),e.$on("updateContent",()=>{this.contentUpdated=!0}),e.$on("deleteContent",(e,t)=>{const n=s.element("[data-content-id='"+t.id+"']");n.length&&this.removeColumn(n.attr("data-column-id"))}),e.$on("bb-delete-column",(e,t)=>{this.removeColumn(t.id)}),e.$on(p.c,(e,t,n,s)=>{if(this.externalGradeSummary&&this.externalGradeSummary.$fetch(),this.allColumns&&this.course.id===s){const e=i.findIndex(this.allColumns,e=>e.id===t.id);e>-1&&(this.allColumns[e].visible=t.visible,this.allColumns[e].columnName=t.columnName)}}),this.scope.$on("content-update",(e,t)=>{if(t.isScorm()){t.getScormGradebookItems().map(e=>e.gradingColumn).forEach(e=>{if(this.allColumns&&this.course.id===t.courseId){const t=i.findIndex(this.allColumns,t=>t.id===e.id);t>-1&&(this.allColumns[t].visible=e.visible,this.allColumns[t].columnName=e.columnName)}})}}),e.$on("bb-update-summary",()=>{this.loadColumns()}),k.b.OnRootScope(e,p.e,(e,t)=>{this.contentUpdated=!0})}handleCourseClick(){this.course.refreshConvertToUltraStatus().then(()=>{this.courseConversionService.isConversionComplete(this.course.ui.convertToUltraTaskStatus)?this._openCourseGrades():this.showConversionTooltip()})}_openCourseGrades(){this.course.isUltra()?this.ultraState.goPeekState(I.CourseRoutes.COURSE_GRADES,{courseId:this.course.id}):this.ultraState.goPeekState("course.outline",{courseId:this.course.id,legacyUrl:this.getLegacyUrl()})}showConversionTooltip(){this.showConversionMessage=!0}closeConversionTooltip(){this.showConversionMessage=!1}getAlertType(){return l.h.ConversionInProgress}removeColumn(e){if(e){const t=this.allColumns&&this.allColumns.find(t=>e===t.id),n=t&&t.contentId||null;this.allColumns&&(this.allColumns=this.allColumns.filter(t=>e!==t.id&&n!==t.contentId),this.hasGradeItems=!!this.allColumns.length),this.defaultColumns&&(this.defaultColumns=this.defaultColumns.filter(t=>e!==t.id&&n!==t.contentId))}}loadColumns(){this.grade.loadColumns(this.course.id,!0,{expand:"collectExternalSubmissions"}).then(e=>{return this.course.gradebook.summaries.expandingColumns(e,{numSubmissionsTotal:0,numSubmissionsNeedsGrading:0}).$fetch({excludeCalculations:!0}).$asPromise().then(()=>e)}).then(e=>e.attachRelatedContentsByScoreProviderHandle(v.ScoreProviderHandle.Scorm)).then(e=>{const t=i.remove(e,e=>e.externalGrade);t.length>0&&(this.externalGradeColumn=t[0],this.externalGradeColumn.forceFetchSummary({excludePreviewUser:!0}).$then(e=>{this.externalGradeSummary=e}));const n=e.filter(e=>!1!==e.visibleInBook);this.hasGradeItems=!!n.length,this.groupColumns(n,this.course.isUltra()),this.loadCategories(n)})}loadCategories(e){this.categoryService.getOrLoadCategoriesForCourse(this.course.id).then(t=>{t.forEach(e=>{this.categoryMap[e.id]=e}),e&&e.forEach(e=>{if(e.gradebookCategoryId){const t=this.categoryMap[e.gradebookCategoryId];e.categoryTitle=t&&t.title}}),this.allCategoriesLoaded=!0})}getLegacyUrl(){return"/webapps/gradebook/do/instructor/enterGradeCenter?course_id="+this.course.id}groupColumns(e,t){this.defaultColumns=[];const n=[];e.forEach(e=>{this.defaultColumns.length<T.MAX_DEFAULT_COLUMNS_LENGTH&&T.isDefaultColumn(e,t)?this.defaultColumns.push(e):n.push(e)}),this.defaultColumns=i.sortBy(this.defaultColumns,e=>e.dueDate);const s=i.groupBy(n,e=>e.summary.getStatus());this.allColumns=this.defaultColumns.concat(this.concatColumnGroups(s))}static isDefaultColumn(e,t){if(t){const t=e.seemsAttemptBased()&&e.summary.numEligibleToBeGraded>e.summary.numStudentSubmissions();return e.summary.numNeedsGrading>0||e.summary.totalNumberOfGradesToPost()>0||t&&T.isDueDateCloseToNow(e)}return e.summary.numNeedsGrading>0}static isDueDateCloseToNow(e){const t=b(),n=b(e.dueDate).subtract({days:1}),i=b(e.dueDate).add({days:7});return t.isAfter(n)&&t.isBefore(i)}concatColumnGroups(e){let t=[];const n=e[m.k.ColumnSummaryStatus.NeedsGrading.toString()],i=e[m.k.ColumnSummaryStatus.NeedsPosting.toString()],s=e[m.k.ColumnSummaryStatus.AllGraded.toString()],o=e[m.k.ColumnSummaryStatus.AllPosted.toString()],a=e[m.k.ColumnSummaryStatus.NothingToGrade.toString()];return n&&(t=t.concat(n)),i&&(t=t.concat(i)),s&&(t=t.concat(s)),o&&(t=t.concat(o)),a&&(t=t.concat(a)),t}clickShowAll(){this.showAllGrades=!this.showAllGrades,this.timeout(()=>{e("#graderColumn_"+this.scope.course.courseId).focus()},this.scope,500)}}T.$inject=["scope","$q",o.b,"course",p.i,h.serviceName,C.d,y.b,d.c,a.b,w.b],T.MAX_DEFAULT_COLUMNS_LENGTH=5;class x{constructor(e){this.$injector=e,this.restrict="E",this.template=S,this.scope={course:"=",courseColorClass:"=",previousTerm:"="},this.link=e=>{e.baseGradesGrader=this.$injector.instantiate(T,{course:e.course,scope:e})}}}x.$inject=["$injector"],s.module(D,[o.a,a.a,r.a,c.a,u.a,p.h,h.moduleName,m.N,g.a,f.a]).directive("bbBaseGradesGrader",["$injector",e=>e.instantiate(x)])}).call(this,n("5iHu"))},gORw:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},ga7A:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("Llzl"),s=n("pjml"),o=n("vhkR"),a=n("X455"),r=n("Youf"),c=n("Y+9S");const l="ultra.components.directives.content.contentItem.contentItemType.contentItemLtilaunch";class d{constructor(e,t,n){this.scope=e,this.ltiService=t,this.contextCourseMembership=n}ltiLaunch(){if(!this.scope.content.getContentDisplay().isLtiLink())throw new Error("Attempted to LTI launch a non-LTI content item. "+this.scope.content.contentHandler.toString());this.notifyMobileAppOnItemClick(),this.ltiService.ltiLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0})}notifyMobileAppOnItemClick(){const e={type:c.MessageType.LTILaunched,status:c.MessageStatus.Success,contentId:this.scope.content.id,contentTitle:this.scope.content.title,contentType:c.MobileContentType.LTIConnection};Object(c.sendMessageToMobile)(e)}ltiLinkNeedsApproval(){const e=this.ltiService.getDomainConfigStatusType(this.scope.content);return s.K.LTIStatusType.NeedsApproval.isEqualTo(e)}}d.$inject=["scope",o.b,a.d];class u{constructor(e){this.$injector=e,this.restrict="E",this.template=r,this.scope=!1,this.link=(e,t,n)=>{e.contentItemLtiLaunch=this.$injector.instantiate(d,{scope:e,element:t,attrs:n})}}}u.$inject=["$injector"],i.module(l,[o.a,a.a]).directive("bbContentItemLtilaunch",["$injector",e=>e.instantiate(u)])},h3DF:function(e,t,n){},hDL0:function(e,t){e.exports='<div class="content-outline" bb-load-bundle="components/directives/content/content-outline">\n  <bb-add-content-button ng-if="!hideAddMenuOverride && canCreate"\n                         can-create-all-contents="canCreateAllContents"\n                         is-render-by-default="contentOutline.parentFolder.depth === 0"\n                         show-menu-override="contentOutline.shouldShowMenuOverride()"\n                         parent-id="contentOutline.parentFolder.id" root-content="contentOutline.parentFolder"\n                         position-before="\'start\'" item-name="contents[0].title"\n                         depth="(contentOutline.parentFolder.depth + 1)"\n                         always-show="contentOutline.shouldShowAddButton()" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport">\n  </bb-add-content-button>\n  <div class="add-element" ng-if="hideAddMenuOverride && !canCreate"> </div>\n  <div ng-if="contents">\n    <div class="content-outline-scroll-container"\n         bb-infinite-scroll="contentOutline.loadMoreChildren(contentOutline.parentFolder)"\n         infinite-scroll-immediate-check="true" infinite-scroll-disabled="contentOutline.isAllContentsLoaded()"\n         infinite-scroll-container="contentOutline.getScrollContainerSelector()"\n         infinite-scroll-listen-for-event="content-outline-infinite-scroll-check"\n         infinite-scroll-current-count="contents.length" infinite-scroll-total-count="contents.paging.count"\n         infinite-scroll-load-limit="contents.paging.limit"\n         infinite-scroll-tray-id="content-outline-{{::contentOutline.parentFolder.id}}"\n         infinite-scroll-focusable-children-selector=".content-title"\n         infinite-scroll-localization-keys-prefix="components.directives.content.content-outline.infiniteScroll.{{::contentOutline.contextArea === \'discussions\' ? \'discussions\' : \'content\'}}"\n         infinite-scroll-force-show-ancestor-selector="{{::contentOutline.getScrollForceShowSelector()}}"\n         sortable-parent>\n      <div class="content-outline-scroll-list" data-parent-id="{{::contentOutline.parentFolder.id}}">\n        <div class="js-content-div drag-element"\n             ng-class="{\'last\': $last, \'has-conversation-indicator\': content.ui.hasIndicator}"\n             ng-repeat="content in contents track by contentOutline.getContentTrackingId(content)" data-content-id="{{content.id}}"\n             ng-mouseenter="contentOutline.placeAddButton(content)">\n            <ng-switch on="(content.isFolder() && !content.isBbPage()) || content.isLearningModule()">\n              <div ng-switch-when="true">\n                <bb-folder root-content="contentOutline.parentFolder"\n                          on-file-drop-handler="contentOutline.onFileDropHandler"\n                          on-move-handler="contentOutline.onMoveHandler"\n                          on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" contents="contents"\n                          content="content" next-content-id="contents[$index + 1].id"\n                          previous-content-id="contents[$index - 1].id"\n                          load-more-children="contentOutline.loadMoreChildren" can-create="canCreate"\n                          can-move="contentOutline.canMove" context-area="contentOutline.contextArea"\n                          can-copy-import="canCopyImport"></bb-folder>\n              </div>\n              <div ng-switch-when="false" bb-drag drag-item="::content.id" can-move="contentOutline.canMove">\n                <div ng-if="!content.isGroupContent || content.assignedGroups.length >= 0 || contentOutline.canMove">\n                  <div bb-drop-handler on-file-drop-handler="contentOutline.onFileDropHandler"\n                      on-move-handler="contentOutline.onMoveHandler"\n                      on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" content="content"\n                      root-content="contentOutline.parentFolder" next-content-id="contents[$index + 1].id"\n                      previous-content-id="contents[$index - 1].id">\n                    <div class="row collapse element-list-row js-course-skip-link-target" can-create="canCreate"\n                        can-move="contentOutline.canMove" bb-content-item-mouseover\n                        ng-class="{ \'element-list-row-extra-icon\': contentOutline.isProgressTrackingStateShown(content) }">\n                      <bb-content-item-base contents="contents" content="content" context-area="contentOutline.contextArea"\n                                            can-move="contentOutline.canMove"\n                                            item-before="contents[$index - 1]"\n                                            item-after="contents[$index + 1]"\n                                            ></bb-content-item-base>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ng-switch>\n\n            <div id="add-button-placeholder{{content.id}}"\n                class="add-element-container"\n                ng-if="::canCreate">\n              <div ng-if="contentOutline.isAddContentButtonUnattached(content.id)"\n                  id="add-button-line{{content.id}}" class="add-element" tabindex="0" role="button"\n                  ng-class="{\'mobile-center-content-button\': contentOutline.isMobileDevice()}"\n                  aria-label="{{::contentOutline.getAddButtonLineLabel(content.title)}}"\n                  ng-focus="contentOutline.placeAddButton(content, true)">\n                <bb-svg-icon size="small" icon="add" class="mobile-add-content-icon" ng-if="contentOutline.isMobileDevice()"></bb-svg-icon>\n              </div>\n            </div>\n          <bb-progress\n              ng-if="contentOutline.cloudUploadInProgress[content.id]"\n              target-div="#progress{{content.id}}"\n              primary-key="\'progress\' + content.id"\n              display-results="false"\n          >\n          </bb-progress>\n        </div>\n        <div class="drag-element">\n          <div drag-item-id="{{contentOutline.placeholderContent.id}}"></div>\n          <div class="drop-placeholder" bb-drop-handler content="contentOutline.placeholderContent"\n               on-move-handler="contentOutline.onMoveHandler"\n               on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- LRN-123904: For file upload content items `positionAfter` is set to `content.id` in course-outline.html. But when file upload is\n  in progress, `content.id` stays undefined. As a result `positionAfter` receives undefined.\n  `positionAfter` value is not used when `content.id` is not available. i.e.: When upload-in-progress file is very first item - `positionAfter` value is not\n  available, therefore `positionBefore` is used instead. --\x3e\n  <bb-add-content-button\n    class="movable-add-content-button movable-add-content-button-folder{{::contentOutline.parentFolder.id}}"\n    ng-hide="!contentOutline.addContentButtonLocation"\n    ng-if="::canCreate && !content.ui.importPlaceholder"\n    can-create-all-contents="canCreateAllContents"\n    content="contentOutline.addContentButtonLocation"\n    root-content="contentOutline.parentFolder"\n    is-button-location-changable="true"\n    parent-id="contentOutline.parentFolder.id"\n    position-after="contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter"\n    position-before="(contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter) ? null : contentOutline.addContentButtonLocation.positionBefore"\n    item-name="contentOutline.addContentButtonLocation.title"\n    depth="contentOutline.addContentButtonLocation.depth"\n    context-area="contentOutline.contextArea"\n    can-copy-import="canCopyImport">\n  </bb-add-content-button>\n</div>\n'},hKQ4:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-discussion",use:"icon-small-discussion-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-discussion"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="5" cy="8" r=".5" /><circle cx="8" cy="8" r=".5" /><circle cx="11" cy="8" r=".5" /></symbol>'});s.add(o);e.exports=o},j3m2:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-chat",use:"icon-small-chat-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-chat"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},jciN:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var i=n("D57K"),s=(n("SSV0"),n("Llzl")),o=n("oVrE"),a=n("g66W"),r=n("5MwF"),c=n("0JpG"),l=n("NMEb"),d=n("4J8k"),u=n("aHpC"),p=n("9Ss5"),h=n("VdDF");const m="ultra.directives.avatar";class b{constructor(e,t,n,i,s){this.scope=e,this.$element=t,this.attributes=n,this.bbLocalize=i,this.$timeout=s,this.backgroundColors=12;const o=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()"],()=>{void 0!==this.scope.user&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||o())}),a=this.scope.$watchCollection("users",()=>{this.scope.users&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||a())})}getAvatarBG(e){return"default-avatar-"+(parseInt((e&&e.id||"0").replace(/[^\d]/g,""),10)%this.backgroundColors+1)}avatarParticipantsClass(e){switch(e){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}}canDisplayAvatarForUser(e){return!!e&&(!!(e.givenName||e.familyName||this.isAnonymousStudent(e))||!(!e.avatar||!e.avatar.permanentUrl||"default"===e.avatar.permanentUrl))}getInitials(e){return!e||this.isAnonymousStudent(e)||!e.givenName||!e.familyName||Object(a.h)(e.givenName)||Object(a.h)(e.familyName)||Object(a.i)(e.givenName)||Object(a.i)(e.familyName)?null:(e.givenName.charAt(0)+e.familyName.charAt(0)).toLowerCase()}buildAvatarData(e){const t={};if(!this.canDisplayAvatarForUser(e))return null;if(t.avatarBg=this.getAvatarBG(e),t.userInitials=this.getInitials(e),e.ui&&e.ui.displayName?t.username=e.ui.displayName:e.givenName||e.familyName||this.isAnonymousStudent(e)?this.bbLocalize.formatUsername(e,c.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then(e=>{t.username=e}):t.username=null,e.avatar&&e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl){if(/^https?/.test(e.avatar.permanentUrl)&&-1===e.avatar.permanentUrl.indexOf("ts=")){const t=(h.a.isValidDate(e.lastModifiedAt)?e.lastModifiedAt:new Date).getTime();e.avatar.permanentUrl=e.avatar.permanentUrl+(e.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(t)}t.avatarUrl=e.avatar.permanentUrl}return t.isAllMembers=Object(o.f)(e),t}isAnonymousStudent(e){if(e.isAnonymousStudent)return e.isAnonymousStudent()}renderAvatars(){let e=this.scope.users;if(!e&&this.scope.user&&(e=this.scope.user),s.isArray(e)||(e=null!=e?[e]:[]),0===e.length)return this.scope.first=null,this.scope.second=null,this.scope.participants=0,void(this.scope.isAvatarRender=!0);this.scope.participants=e.length,this.scope.avatarsClasses={},s.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),!this.scope.avatarsClasses.inactive&&s.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(e.length)]=!0,this.scope.first=this.buildAvatarData(e[0]),2===e.length?this.scope.second=this.buildAvatarData(e[1]):e.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0}}let g=class{constructor(e,t){this.bbLocalize=e,this.$timeout=t,this.restrict="E",this.template=p,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?",analyticsIdTagPrefix:"@"},this.link=(e,t,n)=>new b(e,t,n,this.bbLocalize,this.$timeout)}};g=Object(i.__decorate)([Object(i.__param)(0,Object(u.b)(c.serviceName)),Object(i.__param)(1,Object(u.b)("$timeout"))],g),r.a.features.newAvatar?s.module(m,[d.a]).directive("bbAvatar",["$compile",t=>({restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link(n,i,s){const o=Object.prototype.hasOwnProperty.call(s,"users")?"bb-user-avatar-group":"bb-user-avatar",a=e(i[0].outerHTML.replace(/bb\-avatar/g,o));i.replaceWith(a),t(a)(n)}})]):s.module(m,[l.a,d.a]).directive("bbAvatar",["$injector",e=>e.instantiate(g)])}).call(this,n("5iHu"))},jlIo:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-code",use:"icon-small-code-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-code"><path d="M4 3L1 8l3 5M12 3l3 5-3 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},kC07:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return re})),n.d(t,"a",(function(){return ce}));var i=n("D57K"),s=(n("DXZ4"),n("Ne7M"),n("yiTm"),n("UEFj"),n("j3m2"),n("qDdO"),n("ueuW"),n("85nY"),n("hKQ4"),n("/9iQ"),n("7XaY"),n("Mnbc"),n("NEyJ"),n("p/lC"),n("nsO7")),o=n("Llzl"),a=n("yC9S"),r=n("+O05"),c=n("FpRh"),l=n("laCM"),d=n("cs5G"),u=n("nYZ0"),p=n("bhWV"),h=n("xAaQ"),m=n("ga7A"),b=n("z+6U"),g=n("LFd7"),v=n("Fvsw"),f=n("Et3n"),y=n("5Tom"),C=n("Qbdf"),w=n("X455"),S=n("bF8R"),I=n("UioO"),k=n("jhBu"),D=n("Oyr+"),T=n("ujI6"),x=n("0JpG"),O=n("vhkR"),A=n("w9Zy"),E=n("r6lH"),M=n("lEL+"),L=n("Tn43"),P=n("lmMM"),$=n("4nF1"),B=n("IWgv"),j=n("LecS"),G=n("aCck"),R=n("Ocaa"),N=n("Sa5G"),_=n("oi1r"),F=n("pjml"),z=n("JNtI"),H=n("0rzL"),V=n("nmzr"),U=n("TnpK"),q=n("a2qY"),K=n("aTRN"),W=n("+4Px"),J=n("agzH"),Y=n("BLb8"),X=n("aHpC"),Q=n("/5AG"),Z=n("Htol"),ee=n("IbyE"),te=n("zGdY"),ne=n("kcGO"),ie=n("9OUN"),se=n("CY5M"),oe=n("Y+9S"),ae=n("m5Qz");const re="ultra.directives.contentItemBase",ce="base-content-item";let le=class{constructor(e,t,n,i,o,r,c,l,d,u,p,h,m,b,g,v,f,y,C,w){this.$q=t,this.$rootScope=n,this.$ngRedux=i,this.element=o,this.scope=r,this.CourseModel=c,this.schemaService=l,this.contentService=d,this.contextService=u,this.contextCourse=p,this.contextCourseMembership=h,this.courseContentService=m,this.entitlementService=b,this.localizeService=g,this.ltiService=v,this.telemetryService=f,this.timeoutService=y,this.ultraState=C,this.allyService=w,this.courseLinkContentHandler=F.p.ContentHandler.CourseLink,this.disableRestricted=!1,this.displayTelemetryUserActivity=!1,this.displayTelemetryDiscussionActivity=!1,this.entitledToDesignAssessment=!1,this.isModifyPermissionLoaded=!1,this.isGettingConfirmationOptions=!1,this.getNextReviewState=()=>te.ContentReviewState.Started===this.contentReviewState?te.ContentReviewState.Completed:te.ContentReviewState.Completed===this.contentReviewState?te.ContentReviewState.Started:null,this.onReviewStateIconClick=()=>{const e=this.getNextReviewState();if(!this.scope.content.canUpdateReviewState()||this.scope.content.inSequence||!e||!this.scope.content.courseId||!this.scope.content.id)return this.$q.resolve();const t=this.updateContentReviewState(this.scope.content.courseId,this.scope.content.id,e);return this.$q.when(t).then(()=>{})},this.showEditButtonFromLTILink=()=>!this.isExcludedOrDeletedLtiToolProvider()&&!!this.ltiService.placementExists(this.scope.content),this.displayGradeInfo=!1,this.isLate=!1,this.scope.shouldShowContent=!0,this.canViewGroups=this.entitlementService.isEntitled(N.o.ViewGroups),this.hasViewGroupsAsAdmin=this.entitlementService.isEntitled(N.o.ViewGroupsAsAdmin),this.courseId=p.courseId?p.courseId:this.ultraState.params.courseId,this.conditionalRelease=e.instantiate(K.a,{scope:r}),this.subscribeToReduxChanges(),!this.courseProgressConfiguration&&this.retrieveCourseProgressConfiguration&&this.retrieveCourseProgressConfiguration({courseId:this.courseId}),this.scope.content.$then(e=>{this.entitlementService.hasAnyCourseEntitlement([N.i.ModifyAssessment,N.i.ViewAssessment],e.courseId).then(t=>{if(this.entitledToDesignAssessment=t,this.isModifyPermissionLoaded=!0,e.canHaveAttempts()&&!this.entitledToDesignAssessment&&e.contentDetail){const t=e.getAssociatedGradingColumn(),n=c.$new(e.courseId).gradebook.columns.$buildRaw(t);let i;this.scope.gradingColumn=n,(i=this.displayGradeInfo?this.courseContentService.loadContentAndGrades({course:this.CourseModel.$buildRaw({id:e.courseId}),content:e,column:n}):this.$q.when({courseContent:e,gradingColumn:n})).then(e=>{this.displayGradeInfo&&this.scope.gradingColumn.isLate()&&(!e.gradeDetail||e.gradeDetail.ui.attempt.isInProgress())&&(this.isLate=!0),this.isGradeLoaded=!0,e.gradeDetail&&e.gradeDetail.column.id===n.id&&(this.scope.gradeDetail=e.gradeDetail)})}else this.isLate=!1,this.isGradeLoaded=!0}),this.entitlementService.hasAnyCourseEntitlement([N.n.ViewGrades],e.courseId).then(e=>{this.canViewQuestionAnalysis=e}),this.contextService.getSystemInfo().$asPromise().then(e=>{e.telemetryEnabled&&(this.telemetryService.determineContentSupportsActivityData(this.scope.content).then(e=>{this.displayTelemetryUserActivity=e&&!this.contextCourseMembership.isStudentMembership()}),this.displayTelemetryDiscussionActivity=this.shouldShowDiscussionAnalytics()&&!this.contextCourseMembership.isStudentMembership())}),this.allyService.isAvailable().then(e=>{e&&this.allyService.isAllySupportedContentItem(this.scope.content)?(this.canShowAlly=!0,this.updateAlly()):this.canShowAlly=!1;const t=this.getOverflowMenu();this.$rootScope.$broadcast("menuItems.update",this.scope.content.id,t)}),r.content.title||F.p.ContentHandler.UltraAssignment.isEqualTo(this.scope.content.contentHandler)||F.p.ContentHandler.TestLink.isEqualTo(this.scope.content.contentHandler)||this.localizeService.loadBundle("features/course/content/course-content").then(()=>{r.content.title=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"course.content.contentTitlePlaceholder"})});const t=e=>{e.getLinkContentSource().$then(e=>{this.targetContent=e,this.contentHandler=e.contentHandler&&e.contentHandler.toString()},t=>{403===t.$response.status&&s.remove(this.scope.contents,t=>t.$pk===e.$pk)})};this.scope.$watch("::content.id",()=>{if(F.p.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler))if(this.scope.content.contentDetail)t(this.scope.content);else{const e=this.scope.$watch("content.isConditionalReleaseUnlocked()",n=>{n&&(t(this.scope.content),e())})}}),Object(Y.b)(this.scope,(e,t)=>{this.scope.content.isConditionalReleaseLocked()&&this.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(Y.c)(this.scope,t)}),Object(Y.a)(this.scope,()=>{this.scope.content.isConditionalReleaseLocked()&&Object(Y.c)(this.scope)}),a.b.OnRootScope(this.scope,"grade-attempt",(e,t,n)=>{this.scope.content.id===t&&(this.scope.gradeDetail=n)}),r.content.contentHandler?r.content.isBbPage()?this.contentHandler=F.p.ContentHandler.Document.toString():this.contentHandler=r.content.contentHandler.toString():this.contentHandler=F.p.ContentHandler.Document.toString(),this.disableRestricted=F.p.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler),this.conditionalRelease.getConditions(this.scope.content),this.hasViewB2Entitlement()}),this.scope.$on("refresh-conditional-release-rules",(e,t)=>{this.scope.content.id===t.id&&this.conditionalRelease.getConditions(t)}),this.scope.$on("content-update",(e,t)=>{this.scope.content.id!==t.id||this.scope.content.ui.linkSource||(this.scope.content=t),this.scope.content.ui.linkSource&&this.scope.content.ui.linkSource.id===t.id&&(this.scope.content.ui.linkSource=t);const n=this.scope.content.getDueDate();this.scope.dueDate=n&&new Date(n)}),this.scope.$on("bb-update-CR-tooltip",(e,t,n,i)=>{t&&(this.conditionalRelease.gradeCriteria&&this.conditionalRelease.gradeCriteria.gradeColumnId)===t.id&&this.conditionalRelease.getConditions(this.scope.content,n,i)}),this.scope.$on("show-override-message",(e,t,n)=>{this.scope.content&&this.scope.content.id===n&&(t?(this.scope.shouldShowContent=!1,this.overrideMessage=t):this.scope.shouldShowContent=!0)});const S=s.once(()=>{this.scope.$watch(()=>this.scope.content.getDueDate(),e=>{this.scope.dueDate=e&&new Date(e)})});this.scope.$watch("content.contentHandler",()=>{r.content.ui.importPlaceholder||S()}),this.scope.$on("discussion-group-content-update",(e,t)=>{this.scope.content&&F.p.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.contentDetail&&this.scope.content.getLinkContentSource().$then(e=>{e.id===t.id&&this.scope.content.applyGroupSettings(t)})})}get canDownload(){return this.scope.content.getContentDisplay().canDownload()}get contentReviewState(){return this.scope.content.state}set contentReviewState(e){e&&this.scope.content&&(this.scope.content.state=e)}subscribeToReduxChanges(){const e=this.$ngRedux.connect(e=>({contentReviewState:ee.select.contentReviewState.getContentReviewStateForContextUser(e,this.scope.content.id),courseProgressConfiguration:ee.select.courseProgress.getCourseProgressConfiguration(e,this.courseId)}),e=>Object(ie.bindActionCreators)({updateContentReviewState:ee.actions.contentReviewState.persistContentReviewState,retrieveCourseProgressConfiguration:ee.actions.courseProgress.loadCourseProgressConfiguration},e))(this);this.scope.$on("$destroy",e)}isEngagementOutline(){return"discussions"===this.scope.contextArea}getDescription(){return this.scope.content.systemGeneratedLocalizableDescription?this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:this.scope.content.systemGeneratedLocalizableDescription.languageKey}):this.scope.content.description}getAriaDescribedBy(){let e="content-item-icon-"+this.scope.content.id;return this.scope.content.ui.hasIndicator&&(e+=" activity-indicator-"+this.scope.content.id),e}getDeleteConfirmationKeyAndShowType(){return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then(e=>({confirmationKey:this.scope.content.ui.deleteConfirmationKey,showType:this.scope.content.ui.modalShowType}))}deleteContent(){F.p.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)?this.scope.content.getLinkContentSource().$then(e=>{var t;const n=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();te.ContentHandlerHandle.Discussion===n?this._deleteContent(e):this._deleteContentAndBroadcastUpdateCRTooltip()}):this._deleteContentAndBroadcastUpdateCRTooltip()}_deleteContentAndBroadcastUpdateCRTooltip(){this._deleteContent(this.scope.content),this.$rootScope.$broadcast("bb-update-CR-tooltip",this.scope.content.getAssociatedGradingColumn(),"",!0)}_deleteContent(t){t.hasCourseLinks()?t.getSoftLinks().$asPromise().then(e=>{e.length?this.$q.all(e.map(e=>this.CourseModel.$new(t.courseId).contents.$new(e.courseContent).$fetch().$asPromise().then(e=>{this.$rootScope.$broadcast("deleteContent",e,!1)}))).then(()=>{this.$rootScope.$broadcast("deleteContent",t)}):this.$rootScope.$broadcast("deleteContent",t)}):this.$rootScope.$broadcast("deleteContent",t);const n=this.element.closest(".js-content-div"),i=n.next(".js-content-div");if(i.length>0)i.find(".js-content-item-base").first().find(".content-title").focus();else{const t=n.prev(".js-content-div");if(t.length>0)t.find(".js-content-item-base").first().find(".content-title").focus();else{const t=n.closest(".folder");t.length>0?t.find(".js-content-item-base").first().find(".content-title").focus():this.timeoutService(()=>{e(".js-create").focus()},this.scope.$root,0,!1)}}}hasSupportedConversation(){return!!this.scope.content.hasConversation()&&$.a.create(this.scope.content).supportsConversations()}shouldShowAlertIcon(){return this.isLate||this.scope.content.canViewAsInstructor()&&this.isUnlaunchableLtiLink()}shouldShowDiscussionAnalytics(){return this.scope.content.contentHandler&&N.f.Discussion.isEqualTo($.a.create(this.scope.content).viewHandler())}shouldShowScormAnalysisReport(){return this.scope.content&&this.entitlementService.isEntitled(N.n.FullGradebookAccess,this.scope.content.courseId||this.courseId)&&this.scope.content.isScorm()&&this.scope.content.hasReport()}getContentProgressRoute(){var e;if(!!(null===(e=this.courseProgressConfiguration)||void 0===e?void 0:e.progressTrackingEnabled)&&this.entitlementService.isEntitled(Q.CourseProgressEntitlements.ViewProgressInformation,this.scope.content.courseId||this.courseId))return $.a.create(this.scope.content).getContentProgressRoute()}isUnlaunchableLtiLink(){return this.scope.content.id&&this.scope.content.getContentDisplay().isLtiLink()&&(!this.scope.content.getContentDisplay().isXplorLtiLink()&&!this.ltiService.getLaunchLinkFromContent(this.scope.content)||void 0!==this.ltiService.placementExists(this.scope.content)&&!this.ltiService.placementExists(this.scope.content))}hasViewB2Entitlement(){this.entitlementService.hasSystemEntitlement(N.t.ViewBuildingBlock).then(e=>this.canViewB2=e)}hasLTIToolConfigurationEntitlement(){return this.canViewB2}isExcludedOrDeletedLtiToolProvider(){const e=this.ltiService.getDomainConfigStatusType(this.scope.content);return this.scope.content.id&&this.scope.content.getContentDisplay().isLtiLink()&&(void 0!==this.ltiService.ltiToolProviderExists(this.scope.content)&&!this.ltiService.ltiToolProviderExists(this.scope.content)||F.K.LTIStatusType.Excluded.isEqualTo(e))}showVisibility(){return!this.isUnlaunchableLtiLink()&&!this.scope.hideVisibilitySelector}usesEditButton(){const e=this.scope.content.getContentDisplay();return e.usesEditButton()&&e.canUseEditButton()}openEditContentPanel(){this.ultraState.goPeekState(this.scope.content.getContentDisplay().getEditState(),this.scope.content.getContentDisplay().getEditStateParams())}updateContentVisibility(){return this.targetContent&&this.scope.content?(this.targetContent.applyAvailabilitySettings(this.scope.content),this.updateVisibilityImpl(this.targetContent).then(()=>this.updateVisibilityImpl(this.scope.content))):this.scope.content?this.updateVisibilityImpl(this.scope.content):this.$q.resolve()}updateVisibilityImpl(e){e.visibility=this.contentService.determineVisibility(e.isAvailable);const t=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],n=e.getAssociatedGradingColumn();return n&&(n.visible=e.isAvailable,t.push("contentDetail")),e.withParams({fields:"id"}).$save(t).$asPromise().then(()=>{this.$rootScope.$broadcast("content-update",e)})}updateAlly(){this.canShowAlly&&this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content))}getOverflowMenu(){return[{icon:"draw",labelKey:"global.edit",show:()=>{var e,t;let n=this.isGettingConfirmationOptions?this.lastIsEditButtonShow:this.usesEditButton();return this.scope.content.isLtiLink()&&(null===(t=null===(e=this.scope.content.contentDetail)||void 0===e?void 0:e[this.contentHandler])||void 0===t?void 0:t.itemOrigin)===se.LtiItemOrigin.CloudDocument&&(n=this.showEditButtonFromLTILink()&&this.scope.content.canViewAsInstructor()),this.lastIsEditButtonShow=n,n},onClick:this.openEditContentPanel.bind(this)},{icon:"conversation",labelKey:"components.directives.content-item-base.overflow-menu.open-conversation",show:this.hasSupportedConversation.bind(this),onClick:()=>{this.ultraState.goPeekState("conversations",{courseId:this.scope.content.courseId,contentId:this.scope.content.id})}},{icon:"beast-analytics",labelKey:"components.directives.content-item-base.overflow-menu.student-activity",show:()=>this.displayTelemetryUserActivity&&!this.isAnonymouslyGraded(),onClick:()=>{this.ultraState.goPeekState(V.TelemetryRoutes.CONTENT_ACTIVITY_IN_DETAIL,{contentId:this.scope.content.id})}},{icon:"beast-analytics",uniqueId:"scorm-analytics-report",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:()=>this.shouldShowScormAnalysisReport()&&!this.contextCourseMembership.isStudentMembership(),onClick:()=>{this.ultraState.goPeekState("scorm-analytics-report",{courseId:this.scope.content.courseId,contentId:this.scope.content.id})}},{icon:"beast-analytics",uniqueId:"discussion-insights",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:()=>this.displayTelemetryDiscussionActivity,onClick:()=>{const e=this.scope.content.contentDetail["resource/x-bb-courselink"]?this.scope.content.contentDetail["resource/x-bb-courselink"].linkSourceId:this.scope.content.id;this.ultraState.goPeekState(V.TelemetryRoutes.DISCUSSION_FORUM_INSIGHTS,{contentId:e,forumContentId:this.scope.content.id})}},{icon:"question-analysis",labelKey:"components.directives.content-item-base.overflow-menu.question-analysis",show:()=>this.canViewQuestionAnalysis&&this.scope.content.isQuestionAnalysisAvailable(),onClick:()=>{this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.scope.content.id})}},{icon:"class-pulse-future",uniqueId:"content-progress",labelKey:this.contextCourse.course.isOrganization?"components.directives.content-item-base.overflow-menu.content-progress-org":"components.directives.content-item-base.overflow-menu.content-progress",show:()=>void 0!==this.getContentProgressRoute(),onClick:()=>{const e=this.getContentProgressRoute();void 0!==e&&this.ultraState.goPeekState(e.stateName,e.args)}},{icon:"trash",labelKey:"global.delete",show:()=>this.scope.content.canDelete(),onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>(this.isGettingConfirmationOptions=!0,this.getDeleteConfirmationKeyAndShowType().then(e=>{const t=e.confirmationKey.replace(/^resource\//,"");return this.isGettingConfirmationOptions=!1,this.$q.when(z.a(t))}))}},{icon:"download",labelKey:this.canShowAlly?"ally.context_menu.download_original_file":"global.download",show:()=>this.canDownload,onClick:()=>{Object(oe.notifyMobileApp)(oe.MessageType.DownloadLinkClicked),window.open(this.scope.content.getContentDisplay().contentUrl(),"_blank")}},{labelKey:"ally.context_menu.view_accessibility_score",icon:"ally-indicator-unscored",show:()=>this.canShowAlly,onClick:()=>{},additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"instructorfeedback",style:"display:none;",onkeydown:`(function(e) {\n              if (e.keyCode === ${W.f} || e.keyCode === ${W.t}) {\n                $(e.target).closest("li").click();\n              }\n              })(event)`}},{icon:"ally-alt-formats",labelKey:"ally.context_menu.download_alternative_formats",show:()=>this.canShowAlly&&this.canDownload,onClick:()=>{},additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"alternativeformats",style:"display:none;",onkeydown:`(function(e) {\n                if (e.keyCode === ${W.f} || e.keyCode === ${W.t}) {\n                 $(e.target).closest("li").click();\n                }\n              })(event)`}}]}overflowMenuIsAllyConditional(){var e;return!(null===(e=this.scope.content)||void 0===e||!e.isFile()||0===this.getOverflowMenu().length)&&this.getOverflowMenu().filter(e=>{var t;return null===(t=e.show)||void 0===t?void 0:t.call(e)}).every(e=>{var t;return void 0!==(null===(t=e.additionalAttributes)||void 0===t?void 0:t["data-ally-show"])})}canShowAllyAlternativeFormats(){var e,t,n,i;return(null===(e=this.scope.content)||void 0===e?void 0:e.isFile())&&Object(te.fileAssociationModeAllowsDownload)(null===(i=null===(n=null===(t=this.scope.content)||void 0===t?void 0:t.contentDetail)||void 0===n?void 0:n[te.ContentHandlerHandle.File])||void 0===i?void 0:i.fileAssociationMode)}get deployedAssessment(){return this.scope.content&&this.scope.content.getDeployedAssessment()}isAnonymouslyGraded(){const e=this.scope.content.getAssociatedGradingColumn();return e&&e.anonymousGrading}async editGroups(){let e,t=this.scope.content.id;if(this.scope.content.isAssignment()||this.scope.content.isTest())e=this.deployedAssessment.gradingColumn.id;else if(e=this.scope.gradeColumn&&this.scope.gradeColumn.id,F.p.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.contentDetail){t=(await this.scope.content.getLinkContentSource().$asPromise()).id}this.ultraState.goPeekState("course-group",{groupCourseId:this.scope.content.courseId||this.ultraState.params.courseId,groupContentId:t,groupColumnId:e})}showOverflowMenu(){const e=this.scope.content;return e.canDelete()||e.canViewAsInstructor()||this.usesEditButton()||e.hasConversation()||this.canDownload||this.canShowAlly&&!e.isConditionalReleaseLocked()}openAssessmentItem(){r.a.isExternalSubmissionsAssessment(this.scope.content)?this.ultraState.goPeekState(V.AssessmentRoutes.ASSESSMENT_EXTERNAL_OVERVIEW,{contentId:this.scope.content.id}):this.ultraState.goPeekState(V.AssessmentRoutes.ASSESSMENT_OVERVIEW,{contentId:this.scope.content.id})}onExternalLinkClick(){var e;if(this.notifyMobileAppOnItemClick(),!(null===(e=this.scope.content.permissions)||void 0===e?void 0:e.canHaveReviewState))return;const t=Object(ne.getAutomaticReviewStateForContentLaunched)(this.scope.content);t&&this.updateContentReviewState(this.scope.content.courseId,this.scope.content.id,t).then(()=>{this.$rootScope.$broadcast(Z.b,this.scope.content,t)})}notifyMobileAppOnItemClick(){let e,t;if(F.p.ContentHandler.File.isEqualTo(this.scope.content.contentHandler)?(e=oe.MessageType.FileOpened,t=oe.MobileContentType.Document):F.p.ContentHandler.ExternalLink.isEqualTo(this.scope.content.contentHandler)&&(e=oe.MessageType.LinkOpened,t=oe.MobileContentType.Link),F.p.ContentHandler.File.isEqualTo(this.scope.content.contentHandler)||F.p.ContentHandler.ExternalLink.isEqualTo(this.scope.content.contentHandler)){const n={type:e,status:oe.MessageStatus.Success,contentId:this.scope.content.id,contentTitle:this.scope.content.title,contentType:t};Object(oe.sendMessageToMobile)(n)}}getRootClassName(){return ce}shouldShowReviewStateIcon(){var e,t;const n=null===(e=this.scope.showReviewStateIcon)||void 0===e||e,i=!!(null===(t=this.courseProgressConfiguration)||void 0===t?void 0:t.progressTrackingEnabled)||this.scope.content.inSequence;return n&&i&&this.contextCourseMembership.isStudentMembership()}getNeighborReviewState(e){return this.scope.content.inSequence&&e&&!e.isUiFolder()?e.state===te.ContentReviewState.Completed?Q.NeighborContentReviewState.Completed:Q.NeighborContentReviewState.Incomplete:Q.NeighborContentReviewState.None}setForcedSequenceLearningModuleAttributes(){return ee.ContentHelper.isNotAccessibleButVisibleForcedSequenceItem(this.scope.content)}};le=Object(i.__decorate)([Object(i.__param)(0,Object(X.b)("$injector")),Object(i.__param)(1,Object(X.b)("$q")),Object(i.__param)(2,Object(X.b)("$rootScope")),Object(i.__param)(3,Object(X.b)("$ngRedux")),Object(i.__param)(4,Object(X.b)("element")),Object(i.__param)(5,Object(X.b)("scope")),Object(i.__param)(6,Object(X.b)(F.m.serviceName)),Object(i.__param)(7,Object(X.b)(_.b)),Object(i.__param)(8,Object(X.b)(u.f)),Object(i.__param)(9,Object(X.b)(v.b)),Object(i.__param)(10,Object(X.b)(C.e)),Object(i.__param)(11,Object(X.b)(w.d)),Object(i.__param)(12,Object(X.b)(S.b)),Object(i.__param)(13,Object(X.b)(k.b)),Object(i.__param)(14,Object(X.b)(x.serviceName)),Object(i.__param)(15,Object(X.b)(O.b)),Object(i.__param)(16,Object(X.b)(E.b)),Object(i.__param)(17,Object(X.b)(M.b)),Object(i.__param)(18,Object(X.b)(U.d)),Object(i.__param)(19,Object(X.b)(d.b))],le);class de{constructor(e){this.$injector=e,this.restrict="E",this.scope={content:"=",contents:"=",contextArea:"=",canMove:"=",itemBefore:"<",itemAfter:"<",showReviewStateIcon:"<?",hideVisibilitySelector:"<?"},this.template=q,this.link=(e,t)=>{e.contentItemBase=this.$injector.instantiate(le,{scope:e,element:t}),e.$on(D.e,(n,i,s,o)=>{o===D.c.FileDrop&&e.content===s.content&&(s.targetElement=t.find(".bb-progress"),e.$root.$broadcast(D.e,i,s,e.content.ui.fileUploadId,s.targetElement,D.c.LinkProgress))})}}}de.$inject=["$injector"],o.module(re,[p.a,h.a,m.a,b.a,g.a,I.a,f.a,y.b,O.a,A.d,J.a,P.d,B.a,G.a,j.a,R.a,T.c,x.moduleName,u.d,S.a,_.a,z.b,H.a,L.a,c.a,l.a,ae.a]).directive("bbContentItemBase",["$injector",e=>e.instantiate(de)])}).call(this,n("5iHu"))},lbhN:function(e,t){e.exports='<div class="course-alert-container" \n     bb-click-outside="accessAlert.timeoutCallback()" \n     is-active="true"\n     ng-mouseenter="accessAlert.cancelAutoHide()"\n     ng-mouseleave="accessAlert.autoHideAgain()"\n     role="alertdialog" \n     id="alert-dialog" \n     tabindex="-1">\n\n  <div class="access-alert alert-msg-container" tabindex="-1" aria-hidden="true">\n    <h4 class="text-center" bb-translate>{{::accessAlert.alertType.keys.titleKey}}</h4>\n    <p bb-translate>{{::accessAlert.alertType.keys.bodyKey}}</p>\n    <button class="button button--secondary" \n            ng-click="accessAlert.confirmCallback()" \n            bb-translate\n            analytics-id="{{::accessAlert.alertType.keys.buttonKey}}">\n      {{::accessAlert.alertType.keys.buttonKey}}\n    </button>\n  </div>\n</div>'},lwNT:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-lock",use:"icon-small-lock-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock"><path d="M3 8h10v7H3V8zM5 8V4c0-1.5 1-3 3-3m0 0c.5 0-.5 0 0 0zm0 0c2 0 3 1.5 3 3v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},lx16:function(e,t,n){"use strict";n("zhNR"),n("JzsJ"),n("VCKY"),n("BiyI"),n("jlIo"),n("qzMN"),n("2i58"),n("Ybms"),n("wKTs"),n("vgq2");var i=n("Llzl"),s=n("dCrD");class o extends s.a{}class a extends s.a{}var r=n("D57K"),c=n("ERkP"),l=n("Sa5G"),d=n("aHpC"),u=n("c7N/"),p=n("0x+l");let h=class extends s.a{constructor(e,t,n){super(e,t,n),this.canEditUnsafeHtml=!1,this.isCloudServiceAvailable=!1,this.initializeItems=()=>{this.items=[{key:"addText",className:"js-add-content",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.addContent"}),icon:c.createElement(p.Notes,null),onClick:this.addTextBlock}],this.canEditUnsafeHtml&&this.items.push({key:"addHtml",className:"js-add-html",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.addHtml"}),icon:c.createElement(p.Editor,null),onClick:this.addHtmlBlock}),this.items.push({key:"addLocalFile",className:"js-add-local-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:`components.directives.add-content-button.${this.isMobile?"uploadFromDevice":"uploadFromComputer"}`}),icon:c.createElement(p.UploadFile,null),onClick:this.uploadLocalFile}),this.isCloudServiceAvailable&&this.items.push({key:"addCloudFile",className:"js-add-cloud-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.uploadFromCloudStorage"}),icon:c.createElement(p.UploadCloud,null),onClick:this.uploadCloudFile})},this.addTextBlock=()=>{this.scope.$emit("bb-bbml-editor-add-block",l.c.Text,this.getInsertLocationData())},this.addHtmlBlock=()=>{this.scope.$emit("bb-bbml-editor-add-block",l.c.Html,this.getInsertLocationData())},this.uploadLocalFile=()=>{this.element.find(".file-upload-button").click()},this.uploadCloudFile=()=>{this.element.find(".js-upload-from-cloud-storage-integration").click()},this.focusAddButton=()=>{this.element.find("button").focus()},this.$q=e.get("$q"),this.unsafeHtmlService=e.get(u.b),this.initialize()}initialize(){return this.$q.all({canEditUnsafeHtml:this.unsafeHtmlService.canEditUnsafeHtml(),isCloudServiceAvailable:this.isCloudServiceAvailablePromise}).then(({canEditUnsafeHtml:e,isCloudServiceAvailable:t})=>{this.canEditUnsafeHtml=e,this.isCloudServiceAvailable=t}).finally(this.initializeItems)}};h.$inject=[],h=Object(r.__decorate)([Object(r.__param)(0,Object(d.b)("$injector")),Object(r.__param)(1,Object(d.b)("scope")),Object(r.__param)(2,Object(d.b)("element"))],h);var m=n("HjsN");class b extends s.a{addGroup(){this.toggleMenu();const e=this.scope.positionBefore?this.scope.positionBefore():this.scope.positionAfter()+1;this.scope.createFunction(e),this.closeMenu()}}var g=n("tfx2");let v=class extends s.a{constructor(e,t,n){super(e,t,n),this.scope=t,this.element=n;const i=n.closest("[data-base-state-name]").data("baseStateName");this.$q.all([this.ultraState.peekHref("grade-item.create",this.getInsertLocationData(),i),this.ultraState.peekHref("gradebook-item.calculation",this.getInsertLocationData(),i),this.ultraState.peekHref("attendance",null,i)]).then(e=>{this.attendanceHref=e[2],this.items=[{key:"addGradebookItem",href:e[0],className:"doc-add-grade",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addItem"}),icon:c.createElement(p.Add,null)},{key:"addCalculation",href:e[1],className:"doc-add-calc",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addCalculation"}),icon:c.createElement(p.Calculation,null)}],this.addOrRemoveAddAttendanceMenuItem()}),t.$on("always-show-time-expires",()=>{t.addContentButton.alwaysShow=!1}),t.$on("update-content-menu",()=>{this.items&&this.addOrRemoveAddAttendanceMenuItem()})}addOrRemoveAddAttendanceMenuItem(){const e=null==this.scope.showAddAttendance||!this.scope.showAddAttendance(),t=this.doesMenuItemExistByKey("addAttendance");e?this.removeMenuItemByKey("addAttendance"):t||this.addAttendanceMenuItem()}doesMenuItemExistByKey(e){return this.items.some(t=>t.key===e)}removeMenuItemByKey(e){this.items=this.items.filter(t=>t.key!==e)}addAttendanceMenuItem(){this.items.push({key:"addAttendance",href:this.attendanceHref,className:"doc-add-attendance",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addAttendance"}),icon:c.createElement(p.Attendance,null)})}};v.$inject=[],v=Object(r.__decorate)([Object(r.__param)(0,Object(d.b)("$injector")),Object(r.__param)(1,Object(d.b)("scope")),Object(r.__param)(2,Object(d.b)("element"))],v);var f=n("J8YL"),y=n("tTiy"),C=n("1Niw"),w=n("UeHE"),S=n("9hp7"),I=n("SE1T"),k=n("6xt4"),D=n("07HN");class T{constructor(e){this.$injector=e,this.handlersAndTemplateTexts={assignment:{handler:o,templateText:f},attempts:{handler:a,templateText:y},"bbml-editor":{handler:h,templateText:C},"cloud-upload":{handler:m.b,templateText:w},"course-group":{handler:b,templateText:I},"course-outline":{handler:g.a,templateText:k},grades:{handler:v,templateText:D}}}getTemplateText(e){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");if(null==this.handlersAndTemplateTexts[e].templateText)throw new Error("No template for context area: "+e);return S.replace("<template></template>",this.handlersAndTemplateTexts[e].templateText)}getHandler(e,t,n){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");return this.$injector.instantiate(this.handlersAndTemplateTexts[e].handler,{scope:t,element:n})}}T.$inject=["$injector"];var x=n("2E9T"),O=n("+e2k");const A="ultra.components.directives.content.buttonAddContent";class E{constructor(){this.restrict="C",this.template=x}}E.$inject=["$injector"],i.module(A,[O.a]).directive("buttonAddContent",["$injector",e=>e.instantiate(E)]);var M=n("0JpG"),L=n("/z4E"),P=n("H/mg"),$=n("nYZ0"),B=n("jx5I"),j=n("3Jgm"),G=n("TnpK"),R=n("zYa8"),N=n("wtdm");Object(R.a)(N.ContentMarket,"ultra.components.directives.bbUiIcon.small.ContentMarket","bbUiIconSmallContentMarket"),n.d(t,"a",(function(){return _}));const _="ultra.directives.addContentButton";class F{constructor(e,t,n){this.$injector=e,this.$rootScope=t,this.ultraState=n,this.compiled=Object.create(null),this.restrict="E",this.scope={attachHandler:"=?",disableDrag:"&?",content:"=",createFunction:"=?",hideDividerLines:"&?",rootContent:"&?",contextArea:"=",alwaysShow:"=",showAddAttendance:"&?",showBothButtons:"&?",showMenuOverride:"=",positionBefore:"&?",positionAfter:"&?",parentId:"&",depth:"&",canCreateAllContents:"=?",canCopyImport:"=?",folderNestedButton:"&?",fileLocation:"@?",webLocation:"@?",initialUpload:"&?",primaryKey:"&?",ignoredStates:"&?",itemName:"&?",itemType:"&?",itemIndex:"&?",isButtonLocationChangable:"<?",isRenderByDefault:"&?"},this.compile=()=>(e,t)=>{let n;n=e.contextArea?e.contextArea:e.$parent.contextArea?e.$parent.contextArea:"course-outline";const i=this.$injector.instantiate(T,{});null==this.compiled[n]&&(this.compiled[n]=this.$injector.get("$compile")(i.getTemplateText(n))),e.addContentButton=i.getHandler(n,e,t),e.fileListViewId="fileListView-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.fileListViewLocalId=e.fileListViewId+"Local",this.compiled[n](e,(function(e,n){t.append(e)})),this.$rootScope.$broadcast("add-content-button-ready")}}}F.$inject=["$injector","$rootScope",G.d,$.f],i.module(_,["ngAnimate",A,L.a,M.moduleName,P.a,$.d,B.a,j.a,G.b,u.a,"ultra.components.directives.bbUiIcon.small.ContentMarket"]).directive("bbAddContentButton",["$injector",e=>e.instantiate(F)])},m5Qz:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("Llzl"),s=n("1ZbL"),o=n("0JpG"),a=n("/5AG");const r="ultra.course.content.outline.react.contentitem.description",c={Class:a.ContentItemDescription,renderLocalized:!0,withProvider:!0,bindingNames:["description"]};i.module(r,[o.moduleName]).component("bbCourseContentItemDescription",Object(s.a)(c))},"oK+F":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-beast-analytics",use:"icon-medium-beast-analytics-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-beast-analytics"><path d="M12 23c6.0751 0 11-4.9249 11-11S18.0751 1 12 1 1 5.9249 1 12s4.9249 11 11 11z" stroke-width="2" stroke-miterlimit="10" /><path d="M15.3 1.1L12 12l10.3-4.9M12 12l8.3 8" stroke-width="2" stroke-miterlimit="10" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},ol3u:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.cloudStorageIntegration.modal.authorizationRequiredTitle"\n          analytics-id-tag-prefix="components.directives.cloudStorageIntegration.authorizationRequired">\n  <div name="modal-contents">\n    <p bb-translate>components.directives.cloudStorageIntegration.modal.authorizationRequiredMessage</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="global.close">\n    <bb-translate>global.close</bb-translate>\n  </button>\n</bb-modal>\n'},ooAF:function(e,t){e.exports='<div class="grade-color">\n    <div class="wrapping-input-style readonly pill-style {{displayGradePill.colorCss}} {{displayGradePill.cursorClass}}">\n      <div ng-if="!displayGradePill.shouldShowRubricButton()">\n        <span class="grade-input-display grade-ellipsis"><bdi>{{displayGradePill.displayValue}}</bdi></span>\n      </div>\n      <div ng-if="displayGradePill.shouldShowRubricButton()">\n        <a ng-click="displayGradePill.openRubricEvaluation($event)"\n           ng-class="{\'disable-click\': !!disableRubricEvalClick()}"\n           class="grade-rubric-detail"\n           aria-disabled="{{!!disableRubricEvalClick()}}"\n           href=""\n           analytics-id="components.directives.grade.gradePill.showRubric.link">\n          <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n          <span class="grade-input-display ready grade-ellipsis">{{displayGradePill.displayValue}}</span>\n        </a>\n      </div>\n    </div>\n</div>\n'},"p/lC":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},pKNj:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return L}));n("towz"),n("zAxy"),n("s4xR"),n("KXuk"),n("gORw"),n("TOu5");var i=n("Llzl"),s=n("yC9S"),o=n("9zo4"),a=n("vhkR"),r=n("tqR7"),c=n("ZzN+"),l=n("lmMM"),d=n("e7Kn"),u=n("nYZ0"),p=n("dJ97"),h=n("Ocaa"),m=n("r133"),b=n("BMpZ"),g=n("Sa5G"),v=n("ujI6"),f=n("jhBu"),y=n("X/qj"),C=n("o5Lu"),w=n("0JpG"),S=n("pjml"),I=n("JNtI"),k=n("u4ux"),D=n("e6jQ"),T=n("8jzW"),x=n("hkqm"),O=n("TnpK"),A=n("W6wm"),E=n("EGJL"),M=n("nmzr");const L="ultra.directives.grade.graderColumn";class P{constructor(e,t,n,i,o,a,r,c,l,d,u,p,h,m){this.scope=e,this.$q=t,this.ContentService=n,this.courseConversionService=i,this.CourseModel=o,this.entitlementService=a,this.grade=r,this.gradebookPermissionService=c,this.bbLocalize=l,this.ultraState=d,this.accessibility=u,this.scoreProviderHelper=p,this.ltiService=h,this.toast=m,this.hasDesignerViewEntitlement=!1,this.hasViewAssessmentEntitlement=!1,this.hasViewAttendanceEntitlement=!1,this.isRestrictedGroupContent=!1,this.numMissingStudents=0,this.showConversionMessage=!1,this.attendanceAriaLabel=void 0,this.canModify=this.gradebookPermissionService.canModify(e.course().id),this.canPostGrades=this.gradebookPermissionService.canPostGrades(e.course().id),this.canViewAttempts=this.gradebookPermissionService.canViewAttempts(e.course().id),this.canViewGrades=this.gradebookPermissionService.canViewGrades(e.course().id),this.column=e.column,this.course=e.course(),this.isCourseView=e.isCourseView,this.contextArea="grades",this.index=e.$parent.$index+1,this.column.isGroupContent()&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(g.o.ViewGroups,this.course.id)),this.bbLocalize.loadBundle("components/directives/grade/grader-column").then(()=>{this.column.externalGrade&&(e.column.columnName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.overall.label"}))}),this.entitlementService.hasAnyCourseEntitlement([g.i.ViewAssessment,g.i.ModifyAssessment],this.course.id).then(e=>{this.hasViewAssessmentEntitlement=e}),this.entitlementService.hasCourseEntitlement(g.i.ViewAttendance,this.course.id).then(e=>{this.hasViewAttendanceEntitlement=e}),this.entitlementService.hasCourseEntitlement(g.e.ViewAsDesigner,this.course.id).then(e=>{this.hasDesignerViewEntitlement=e}),this.column.$resolve().$then(e=>{this.grade.setDeleteConfirmationHandle(this.column),this.overflowMenuId="grader-column-open-button-"+D.a(),this.checkIfAttendanceRecordsExist()});const b=e.$watch("column.summary.$resolved",()=>{this.column.summary&&this.column.summary.$resolved&&(this.updateNumMissingStudents(),b(),this.isRestrictedGroupContent&&(this.column.summary.restricted=!0,this.column.restricted=!0))});s.b.OnRootScope(e,"bb-grade-input-save",(e,t,n,i)=>{this.column.id===i&&this.column.summary.$fetch()}),s.b.OnRootScope(e,"bb-update-category-icon",(e,t)=>{this.column.id===t.id&&(this.scope.categoryMap&&t.gradebookCategoryId&&(this.column.gradebookCategory=this.scope.categoryMap[t.gradebookCategoryId],this.column.categoryTitle=this.column.gradebookCategory&&this.column.gradebookCategory.title),(null===t.dueDate||t.dueDate&&t.dueDate instanceof Date)&&(this.column.dueDate=t.dueDate),this.column.visible=t.visible,this.updateNumMissingStudents())}),"Attendance"===this.column.effectiveColumnName&&(this.attendanceAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.attendance.course-attendance",params:{courseName:this.course.name},noWrap:!0,noEscape:!0})),this.scope.column.isAttendance()&&s.b.OnRootScope(e,"$stateChangeSuccess",(e,t,n,i)=>{i.name.indexOf("attendance")>=0&&this.checkIfAttendanceRecordsExist()}),e.$watch("column",e=>{this.column=e}),this.registerPostGradesWatchers()}updateNumMissingStudents(){this.numMissingStudents=this.column.getNumMissingIfLate()}openAddItemPanel(t){this.whichAddItemPanelOpen=t,e(t).addClass("is-active").find(".element-list-add-menu").slideToggle(300)}closeAddItemPanel(t){this.whichAddItemPanelOpen===t&&(this.whichAddItemPanelOpen=null),e(t).removeClass("is-active").find(".element-list-add-menu").slideUp(300)}toggleAddItemPanel(e){this.whichAddItemPanelOpen===e?this.closeAddItemPanel(e):this.openAddItemPanel(e)}registerPostGradesWatchers(){this.scope.$watchGroup([()=>this.column.summary.hasGradesToPost(),()=>this.course.isComplete()],()=>{this.canPostGrades=this.grade.canPostGrades(this.course,this.column)})}postGrades(){this.column.postReadyGrades().then(e=>{this.toast.show({messageKey:"components.directives.grade.grader-column.actions.gradesPosted",icon:"icon-check",toastStatus:"success"}),this.column.summary.$fetch().$asPromise().then(e=>{this.scope.$emit(C.c,this.column),this.scope.$root.$broadcast("bb-update-summary")})})}deleteColumn(){return this.column.forceDelete()}deleteContent(){this.column.courseId&&this.column.contentId&&this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then(e=>{this.ContentService.deleteContent(e).then(()=>{this.deleteContentCallback()})})}deleteContentCallback(){this.scope.$root.$broadcast("bb-delete-column",this.column)}viewEditColumn(){this.accessibility.setFocusOverrideOnPanel("#"+this.overflowMenuId,".grades-list");const e=this.column.scoreProviderHandle;e&&!this.scoreProviderHelper.supportsOverall(e)||(S.p.ContentHandler.PartnerCloud.isEqualTo(e)||S.p.ContentHandler.LtiLink.isEqualTo(e)?this.ltiService.ltiEditColumn(this.column):this.openViewEditState())}openViewEditState(){const{contentId:e,courseId:t,externalGrade:n,id:i,linkId:s,scoreProviderHandle:o}=this.column,a=!this.column.isAssignment()&&!this.column.isTest();if(n)this.ultraState.goPeekState("gradebook-item.overall-grade",{columnId:i,gradeitemView:"details"});else if(this.column.isCalculated())this.ultraState.goPeekState("gradebook-item.calculation",{columnId:i,gradeitemView:"details"});else if(o&&this.column.seemsAttemptBased()&&(this.hasViewAssessmentEntitlement||a)){const n={courseId:t,contentId:e,linkRefId:s};this.scoreProviderHelper.editStateRef(o,n,T.a.GoToState)}else if(o&&this.column.isAttendance()){const n={courseId:t,contentId:e};this.scoreProviderHelper.editStateRef(o,n,T.a.GoToState)}else this.ultraState.goPeekState("grade-item.edit",{id:this.column.id})}_openColumn(){let e,t;const{contentId:n,courseId:s,id:o,linkId:a,scoreProviderHandle:r}=this.column;if(this.course.isUltra()){const c=this.hasViewAssessmentEntitlement&&(this.column.isTest()||this.column.isAssignment());if(this.isLTILink())return void this.launchLti();if(this.column.isAttendance()){const c={contentId:n,courseId:s,columnId:o,linkRefId:a};({state:e,args:t}=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(r,c,T.a.GenerateStateParams)))}else if(this.column.externalGrade)e="gradebook-item.overall-grade",t={columnId:o};else if(this.column.isCalculated())e="gradebook-item.calculation",t={columnId:o,courseId:s};else if(r&&!this.column.isOffline()&&(this.canViewGrades||this.canViewAttempts)){const r={contentId:n,courseId:s,columnId:o,linkRefId:a};({state:e,args:t}=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(this.column.scoreProviderHandle,r,T.a.GenerateStateParams)))}else if(r&&(this.column.isDiscussion()||this.column.isScorm()||this.column.isScormSCO()||c)){const o={courseId:s,contentId:n,linkRefId:a};({state:e,args:t}=i.fromJson(this.scoreProviderHelper.editStateRef(this.column.scoreProviderHandle,o,T.a.GenerateStateParams)))}else this.canViewGrades?(e="gradebook-item.offline",t={columnId:o,courseId:s,gradeitemView:"students"}):(e="grade-item.edit",t={id:o})}else e="course.outline",t={courseId:s,legacyUrl:this.getLegacyUrl()};this.ultraState.goPeekState(e,t)}handleColumnClick(){this.itemLinkIsClickable&&!this.isRestrictedGroupContent&&(this.isCourseView?this._openColumn():this.course.refreshConvertToUltraStatus().then(()=>{this.courseConversionService.isConversionComplete(this.course.ui.convertToUltraTaskStatus)?this._openColumn():this.showConversionTooltip()}))}showConversionTooltip(){this.showConversionMessage=!0}closeConversionTooltip(){this.showConversionMessage=!1}getAlertType(){return g.h.ConversionInProgress}launchLti(){this.ltiService.ltiLaunch({courseId:this.column.courseId,contentId:this.column.contentId,linkType:g.f.parse(this.column.scoreProviderHandle.toString()),linkRefId:this.column.linkId})}showAlertIcon(){return this.column.getNumMissingIfLate()>0}getLegacyUrl(){return"/webapps/gradebook/do/instructor/enterGradeCenter?course_id="+this.column.courseId}isLTILink(){return this.ltiService.isLTILink(this.column)}showMarkAttendance(){return this.column.isAttendance()&&this.hasViewAttendanceEntitlement}showDelete(){return this.column.isAttendance()?this.canModify&&this.showAttendanceDeleteOption:this.canModify}openAttendance(){this.ultraState.goPeekState("attendance")}showQuestionAnalysis(){return this.column.isQuestionAnalysisAvailable()&&this.canViewGrades}showDownloadTestResults(){return!this.column.isAnonymousGrading()&&(this.canViewGrades&&this.column.isTest()&&this.column.summary.numSubmissionsTotal>0)}showViewEdit(){return!(!this.column.isOffline()&&null!=this.column.scoreProviderHandle&&!this.scoreProviderHelper.supportsEdit(this.column.scoreProviderHandle))&&(!(!this.column.isOffline()&&!this.column.isCalculated())||(this.hasDesignerViewEntitlement||this.canModify))}hasContentId(){return!!this.column.contentId}getConfirmationKeyAndShowType(){let e;return this.ultraState.includes("**.outline.**")?e=A.a.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=A.a.Discussions),this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then(t=>this.ContentService.generateDeleteConfirmationKey(t,e).then(e=>({confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType})))}getOverflowMenuItems(){return[{icon:this.canModify?"draw":"visible",labelKey:this.canModify?"global.edit":"global.view",show:()=>this.showViewEdit(),onClick:()=>this.viewEditColumn()},{icon:"attendance",labelKey:"components.directives.grade.grader-column.attendance.markAttendance",show:()=>this.showMarkAttendance(),onClick:()=>this.openAttendance()},{icon:"question-analysis",labelKey:"components.directives.grade.grader-column.questionAnalysisOverflowMenuLabel",show:()=>this.showQuestionAnalysis(),onClick:()=>{this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.column.contentId})}},{icon:"download",labelKey:"components.directives.grade.grader-column.downloadResults.overflowMenuLabel",show:()=>this.showDownloadTestResults(),onClick:()=>{this.ultraState.goPeekState(M.Routes.Grade.DOWNLOAD_TEST_RESULTS,{columnId:this.column.id})}},{icon:"trash",labelKey:"global.delete",onClick:()=>{this.hasContentId()?this.deleteContent():this.deleteColumn()},show:()=>this.showDelete(),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>{let e;return this.hasContentId()?this.getConfirmationKeyAndShowType().then(t=>(e=t.confirmationKey.replace(/^resource\//,""),this.$q.when(I.a(e)))):this.column&&this.column.ui&&this.column.ui.deleteConfirmationHandle?(e=this.column.ui.deleteConfirmationHandle.replace(/^resource\//,""),this.$q.when(I.a(e))):(e="generic-content",this.$q.when(I.a(e)))}}}]}get itemLinkIsClickable(){return this.isActionable&&(!this.column.isAttendance()||this.hasViewAttendanceEntitlement)&&(!this.isLTILink()||this.hasDesignerViewEntitlement)&&!this.isRestrictedGroupContent}get isActionable(){return!this.column.isAttendance()||this.scope.attendanceIsAvailable()}get showOverflowMenu(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&(this.showViewEdit()||this.showDelete()||this.showMarkAttendance()||this.showQuestionAnalysis()||this.showDownloadTestResults())}get showDragControls(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&this.canModify}checkIfAttendanceIsAvailable(){return!(!this.scope.attendanceIsAvailable||!this.scope.attendanceIsAvailable())}checkIfAttendanceRecordsExist(){this.showAttendanceDeleteOption=!1,this.column.isAttendance()&&this.checkIfAttendanceIsAvailable()&&this.CourseModel.$new(this.column.courseId).attendanceRecordsExist().then(e=>{this.showAttendanceDeleteOption=!e})}getNumberEligibleToBeGradedExternalSubmissions(){return i.isUndefined(this.column.summary.numGroupsNeedsGrading)?this.column.summary.numStudentsEligibleToBeGradedExternalSubmission:this.column.summary.numGroupsEligibleToBeGradedExternalSubmission}getNumberOfSubmissionsNeedsGrading(){return null==this.column.summary.numSubmissionsNeedsGrading?this.column.summary.numSubmissionsNeedsReconciling:this.column.summary.numSubmissionsNeedsGrading}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}}P.$inject=["scope","$q",u.f,c.b,S.m.serviceName,f.b,C.i,y.b,w.serviceName,O.d,o.c,T.c,a.b,x.b];class ${constructor(e){this.$injector=e,this.restrict="E",this.template=E,this.scope={assessment:"<?",column:"=",course:"&",isCourseView:"=",categoryMap:"=?",attendanceColumnExists:"&?",attendanceIsAvailable:"&"},this.link=(e,t,n)=>{e.graderColumn=this.$injector.instantiate(P,{scope:e})}}}$.$inject=["$injector"],i.module(L,[r.a,u.d,d.a,l.d,c.a,p.a,m.a,h.a,v.c,w.moduleName,T.b,O.b,k.b,a.a,I.b,x.a,b.a]).directive("bbGraderColumn",["$injector",w.serviceName,(e,t)=>(t.loadBundle("components/directives/grade/grader-column"),e.instantiate($))])}).call(this,n("5iHu"))},px9Z:function(e,t,n){},q1bP:function(e,t,n){n("Llzl");n("SY8P"),e.exports="dibari.angular-ellipsis"},qDdO:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-class-pulse-future",use:"icon-small-class-pulse-future-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-class-pulse-future"><path d="M9 14c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1zM11 6.5a.5.5 0 11-1 0 .5.5 0 011 0zM5.5 9.5a.5.5 0 11-1 0 .5.5 0 011 0z" fill="#262626" stroke="#262626" stroke-width="2" /><path d="M15 11l-4.5-4.5-5.5 3-4-2.357" stroke="#262626" stroke-width="2" /><path d="M9 2c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1z" fill="#262626" stroke="#262626" stroke-width="2" /><path d="M15 2H1v12h14V2z" stroke="#262626" stroke-width="2" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},qH3X:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const i="rb_grade_grid_",s={REFRESH_OVERALL_EDITOR:`${i}refresh_overall_editor`,REFRESH_CELL_EDITOR:`${i}refresh_cell_editor`,SELECT_GROUP:`${i}select_group`,REFRESH:`${i}refresh`,FOCUSIN_CELL:`${i}focusin`,FOCUSOUT_CELL:`${i}focusout`,ENTER_EDITOR:`${i}enter_editor`,CLOSE_EDITOR:`${i}close_editor`,ADVANCED_FILTERS_COLUMNS:`${i}advanced-filter-columns`,ADVANCED_FILTERS_ROWS:`${i}advanced-filter-rows`,GRADEBOOK_CLEAR_SEARCHBOX_SELECTION:`${i}gradebook-clear-searchbox-selection`,GRADEBOOK_USER_SELECTED:`${i}gradebook-user-selected`,GRADEBOOK_COLUMN_SELECTED:`${i}gradebook-column-selected`,GRADEBOOK_CATEGORY_SELECTED:`${i}gradebook-category-selected`}},qzMN:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-content-collection",use:"icon-small-content-collection-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-collection"><path d="M14 15H2V9h3v1h6V9h3v6zM13 9V4H3v5M4 4V1h8v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},r133:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("Llzl"),s=n("Fvsw"),o=n("0JpG"),a=n("0+Qs"),r=n("BXQP");const c="ultra.directives.bbDuration",l="refresh.relative.dates";class d{constructor(e,t,n,i){this.scope=e,this.bbContext=t,this.bbLocalize=n,this.interval=i,this.date="",this.time="",this.lessThanOneDay=!1;const s=e.$watch("date",()=>{this._localizeRelativeDate(),e.autoUpdate&&!e.autoUpdate()&&e.date&&s()});e.$on(l,()=>{this._localizeRelativeDate()}),this.interval(()=>{this._localizeRelativeDate()},this.scope,d.DEFAULT_REFRESH_INTERVAL)}needAgo(){return!!(this.scope.hasAgo&&this.scope.hasAgo()&&this.lessThanOneDay)}separateDatetime(){return!(!this.scope.separateDatetime||!this.scope.separateDatetime())}_localizeRelativeDate(){if(this.scope.date){let e={},t=new Date;const n=this.scope.isRelativeToServerDate&&this.scope.isRelativeToServerDate();(null==n||n)&&(e={relativeTo:this.bbContext.getServerTime()},t=this.bbContext.getServerTime());const i=t.getTime()-this.scope.date.getTime();if(i>=6e4&&this.scope.date.setSeconds(30),this.lessThanOneDay=i<=864e5,this.needAgo()||this.separateDatetime()){const t=this.bbLocalize.getFormatEnum(o.ILocaleDateFormat,this.scope.dateFormat)||o.ILocaleDateFormat.Short;this.bbLocalize.formatDuration(this.scope.date,this.scope,e,t).then(e=>{this.date=e.date||"",this.time=e.time||""})}}}}d.DEFAULT_REFRESH_INTERVAL=18e4,d.$inject=["scope",s.b,o.serviceName,a.b];class u{constructor(e){this.$injector=e,this.restrict="E",this.replace=!0,this.template=r,this.scope={date:"=",autoUpdate:"&?",isRelativeToServerDate:"&?",dateFormat:"@?",hasAgo:"&?",separateDatetime:"&?"},this.link=e=>{e.duration=this.$injector.instantiate(d,{scope:e})}}}u.$inject=["$injector"],i.module(c,[s.a,o.moduleName,a.a]).directive("bbDuration",["$injector",e=>e.instantiate(u)])},r6lH:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var i=n("nsO7"),s=n("Llzl"),o=n("jhBu"),a=n("Sa5G"),r=n("0JpG"),c=n("pjml"),l=n("wgY5"),d=n("nmzr"),u=n("+O05");const p="ultra.service.telemetry",h="telemetry";class m{constructor(e,t,n,i,s,o,a,r,c,l,d,u,p,h,m,b,g){this.cacheFactory=e,this.$q=t,this.entitlement=n,this.bbLocalize=i,this.ActivityVsGradeModel=s,this.ContentActivityInDetailModel=o,this.CourseActivityModel=a,this.CourseGradesModel=r,this.CourseNotificationsModel=c,this.MultimediaActivityInDetailModel=l,this.MultimediaStatisticsModel=d,this.NotificationUsers=u,this.StudentActivityModel=p,this.StudentGradesModel=h,this.SufficientDataModel=m,this.TelemetryDiscussionActivityModel=b,this.TelemetryDiscussionXrayModel=g,this.SUFFICIENT_DATA_KEY="SufficientData",this.sufficientDataCache=e.createCache("sufficientTelemetryData"),this.notificationsCache=e.createCache("notifications")}loadActivityVsGradeData(e){return this.ActivityVsGradeModel.$find(e).$allow([404]).$asPromise()}loadStudentGradeData(e,t){return this.StudentGradesModel.$find(e,t?{userId:t}:{}).$allow([404,400]).$asPromise()}loadCourseGradeData(e){return this.CourseGradesModel.$find(e).$allow([404,400]).$asPromise()}loadStudentActivityData(e,t){return this.StudentActivityModel.$find(e,t?{userId:t}:{}).$allow([400]).$asPromise()}loadContentActivityInDetailData(e,t){return this.ContentActivityInDetailModel.$collection().getContentActivityInDetail(e,t).$asPromise()}loadMultimediaActivityInDetailData(e,t){return this.MultimediaActivityInDetailModel.$collection().getMultimediaActivityInDetail(e,t).$asPromise()}loadMultimediaStatisticsData(e,t){return this.MultimediaStatisticsModel.getMultimediaStatistics(e,t).$asPromise()}loadCourseActivityData(e){return this.CourseActivityModel.$find(e).$allow([400]).$asPromise()}loadNotificationUsers(e,t,n){const s={};return t&&(s.limit=t),n&&(s.offset=n),this.NotificationUsers.$find(e,s).$asPromise().then(e=>i.keyBy(e.users,"userId"))}loadNotifications(e,t,n,i){return this.getNotificationsPromise(e,t,n,i).promise}loadDiscussionActivityData(e,t,n){return n?this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t,n).$asPromise():this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t).$asPromise()}loadDiscussionXrayReport(e,t,n){return this.TelemetryDiscussionXrayModel.getDiscussionXrayReport(e,t,n).$asPromise()}hasSufficientActivityData(e){return this.getSufficientDataPromise().promise.then(t=>!(!t||!t.coursesWithActivity)&&i.includes(t.coursesWithActivity,e))}hasSufficientGradeData(e){return this.getSufficientDataPromise().promise.then(t=>!(!t||!t.coursesWithGrades)&&i.includes(t.coursesWithGrades,e))}canViewAllUserData(e){return this.entitlement.hasCourseEntitlement(a.n.ViewGrades,e)}formatMessageRecipients(e){return(e||[]).map(e=>e.id).join(",")}determineContentSupportsActivityData(e){const t=this.$q.defer();return u.a.isExternalSubmissionsAssessment(e)?t.resolve(!1):this.contentSupportsActivityData(e)?this.canViewAllUserData(e.courseId).then(e=>{t.resolve(e)}).catch(e=>{t.reject(e)}):t.resolve(!1),t.promise}contentSupportsActivityData(e){return(a.f.TestLink.isEqualTo(e.contentHandler)||a.f.UltraAssignment.isEqualTo(e.contentHandler))&&e.hasGradingColumn()}determinePanelSref(e,t){return this.canViewAllUserData(e).then(n=>n?this.createPanelSref(d.TelemetryViewType.INSTRUCTOR_CLASS,e,t):this.createPanelSref(d.TelemetryViewType.STUDENT_PROGRESS,e,t))}createPanelSref(e,t,n){let i='({ courseId: "'+t+'"';return n&&(i+=', notificationId: "'+n+'"'),e.toString()+(i+=" })")}exportFilename(e,t,n,i,s){let o="";e&&(o=e.courseId+"_");const a=this.bbLocalize.formatDateSync(new Date,r.ILocaleDateFormat.ISO).replace(/[^0-9]/g,"");let c="";t&&n&&t.id!==n.id&&(c=t.userName+"_");const l=i?"_"+i:"";let d="";return s&&(d=s.replace(/\s+/g,"_")+"_"),o+c+d+a+l}getSufficientDataPromise(){let e=this.sufficientDataCache.get(this.SUFFICIENT_DATA_KEY);return e||(e={promise:this.SufficientDataModel.$new().$fetch().$allow([404,400]).$asPromise()},this.sufficientDataCache.put(this.SUFFICIENT_DATA_KEY,e)),e}getNotificationsPromise(e,t,n,i){const s=e+t+n+i;let o=this.notificationsCache.get(s);if(!o){const a={};t&&(a.userId=t),n&&(a.includeDismissed=n),i&&(a.notificationType=i),(o={promise:this.CourseNotificationsModel.$find(e,a).$asPromise()}).promise.then(e=>(e.currentStudent.forEach(e=>{e.ui={createdDay:l.utc(e.created).startOf("day").toDate()}}),e)),this.notificationsCache.put(s,o)}return o}}m.$inject=["DSCacheFactory","$q",o.b,r.serviceName,c.sb.serviceName,c.tb.serviceName,c.ub.serviceName,c.vb.serviceName,c.wb.serviceName,c.zb.serviceName,c.Ab.serviceName,c.Cb.serviceName,c.Db.serviceName,c.Eb.serviceName,c.Fb.serviceName,c.xb.serviceName,c.yb.serviceName];class b extends m{}s.module(p,[c.N,o.a]).service(h,m)},rtZE:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n("nsO7"),s=n("Llzl");
/*
 * An Angular service which helps with creating recursive directives.
 * @author Mark Lagendijk
 * @license MIT
 */
const o="ultra.service.RecursionHelper",a="recursionHelper";
/**
 * An Angular service which helps with creating recursive directives.
 * @author Mark Lagendijk
 * @license MIT
 *
 * Sample usage:
 * ```typescript
 *
 * var link = (scope: IScope, element: JQuery) => {
 *   // do stuff
 * };
 *
 * var compile = (element: JQuery) => {
 *   return recursiveHelper.compile(element, link);
 * };
 *
 * ```
 *
 */
class r{constructor(e){this.$compile=e,this.compileContents=i.memoize(this.compileContents)}compileContents(e,t){return this.$compile(t)}compile(e,t,n){s.isFunction(n)&&(n={post:n});const i=t.contents();return t.empty(),{pre:n&&n.pre?n.pre:null,post:(t,s,...o)=>{this.compileContents(e,i)(t,(function(e){s.append(e)})),n&&n.post&&n.post.apply(null,[t,s,...o])}}}}r.$inject=["$compile"];class c extends r{}s.module(o,[]).service(a,r)},s4xR:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-attendance",use:"icon-small-attendance-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attendance"><path d="M15 15V2H1v13h14zM4.5 1v1h7V1h-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 9l2 2 4-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},sB2Z:function(e,t){e.exports='<div class="content-wrapper" ng-class="{\'nocontent\': !content.canViewAsInstructor()}">\n  <div class="name">\n    <ng-switch on="content.getContentDisplay().viewHandler()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n      <div ng-switch-when="resource/x-bb-folder" class="engagement-folder">\n        <bb-content-item-folder></bb-content-item-folder>\n      </div>\n      <a ng-switch-when="resource/x-bb-forumlink"\n         bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n         bb-prevent-click-if="content.isConditionalReleaseLocked()"\n         ng-attr-tabindex="{{ content.isConditionalReleaseLocked() ? -1 : 0 }}"\n         class="content-title"\n         analytics-id="content.item.engagement.outline.forumLink.link"\n         aria-describedby="activity-indicator-{{::content.id}}"\n      >\n        <span>{{ content.title }}</span>\n      </a>\n      <div ng-switch-default class="content-title">{{ content.title }}</div>\n      <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator" status="active"></bb-svg-icon>\n    </ng-switch>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="group-name">\n      <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n      <a href="javascript:void(0);"\n         ng-if="contentItemBase.hasViewGroupsAsAdmin"\n         ng-click="contentItemBase.editGroups()"\n         analytics-id="content.item.engagement.outline.contentItemBase.editGroups.link"\n      >\n        <bb-group-count content="content"></bb-group-count>\n      </a>\n      <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin">\n        <bb-group-count content="content"></bb-group-count>\n      </span>\n      <div ng-if="!contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="title">\n        <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    class="lock-info"\n    tabindex="0"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="student-created-info" ng-if="::contentItemEngagementOutline.isDiscussionCreatedByStudent()">\n    <span bb-translate="components.directives.content-item-base.content.discussionAuthorship.student"></span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    open-panel-on-restricted="true"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemEngagementOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.link">\n        <span>{{contentItemBase.conditionalRelease.getConditionDescription()}}</span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},sa5q:function(e,t){e.exports='<div ng-switch on="content.canViewAsInstructor() || !content.shouldRestrict()">\n  \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n  <a class="content-title"\n     bb-peek-sref="content-manage.edit.document({id:content.id})"\n     ng-switch-when="true"\n     ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}"\n     aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n     analytics-id="content.item.page.edit.document.link"\n     aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n     tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n     <span>{{ content.title }}</span>\n  </a>\n  <span class="content-title"\n        ng-switch-default\n        ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}"\n        aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n        tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">{{ content.title }}</span>\n</div>\n'},suMx:function(e,t,n){"use strict";n("q1bP");var i=n("Llzl"),s=n("Nyb7");const o="ultra.components.directives.statistics.complexStatistic";class a{constructor(e,t,n){this.scope=e,this.element=t,this.$compile=n;const i=this.$compile(this.scope.item().complexTemplate)(this.scope.item().complexScope);t.append(i)}}a.$inject=["scope","element","$compile"];class r{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=s,this.scope={item:"&"},this.link=(e,t)=>{e.complexStatistic=this.$injector.instantiate(a,{scope:e,element:t})}}}r.$inject=["$injector"],i.module(o,[]).directive("bbComplexStatistic",["$injector",e=>e.instantiate(r)]);var c=n("zphb");class l{constructor(e,t){this.scope=e,this.$sce=t,this.scope.item().trusted=t.trustAsHtml(this.scope.item().data)}}l.$inject=["scope","$sce"];class d{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=c,this.scope={item:"&"},this.link=e=>{e.simpleStatistic=this.$injector.instantiate(l,{scope:e})}}}d.$inject=["$injector"],i.module("ultra.components.directives.statistics.simpleStatistic",[]).directive("bbSimpleStatistic",["$injector",e=>e.instantiate(d)]);var u=n("c2Z8");n.d(t,"a",(function(){return p}));const p="ultra.components.directives.statistics";class h{constructor(e){this.scope=e,this.smallPerRow=e.smallPerRow()||1,this.largePerRow=e.largePerRow()||4,this.scope.$watch("config()",e=>{e&&(this.config=e.length>10?e.slice(0,10):e,this.total=this.config.length)})}}h.$inject=["scope"];class m{constructor(e){this.$injector=e,this.replace=!0,this.restrict="AE",this.template=u,this.scope={config:"&",smallPerRow:"&",largePerRow:"&"},this.link=e=>{e.statistics=this.$injector.instantiate(h,{scope:e})}}}m.$inject=["$injector"],i.module(p,["dibari.angular-ellipsis",o,"ultra.components.directives.statistics.simpleStatistic"]).directive("bbStatistics",["$injector",e=>e.instantiate(m)])},tTiy:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options"\n          data-show-add-options ng-click="addContentButton.toggleMenu()"\n          ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n          aria-expanded="{{addContentButton.isMenuVisible}}"\n          aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n          aria-label="{{addContentButton.addButtonAriaLabel}}"\n          ng-focus="addContentButton.showButton()"\n          ng-blur="addContentButton.hideButton()"\n          analytics-id="components.directives.add-content-button.attempts.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        monitor-leave="true"\n        allow-multiple="true"\n        target-div="{{\'#\' + fileListViewId}}"\n        disable-drag="disableDrag && disableDrag()"\n        hide-transclude-during-upload="false"  is-third-party-upload="false"\n        third-party-download-handler="addContentButton.downloadFile"\n        skip-zip-file-check="true">\n        <div class="columns medium-12" ng-class="{\'medium-center\': attempt.isMobile}">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n             ng-click="addContentButton.toggleMenu()"\n             analytics-id="components.directives.add-content-button.attempts.fileUpload.link">\n            <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n            <span bb-translate>course.content.fileUpload.addFiles</span>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},tecA:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var i=n("D57K"),s=n("Llzl"),o=n("0JpG"),a=n("TnpK"),r=n("+4Px"),c=n("g66W"),l=n("aHpC");const d="text-editor-update-original-value";let u=class{constructor(e,t,n,i,s){this.scope=e,this.element=t,this.ctrl=n,this.bbLocalize=i,this.bbUltraState=s,this.focusOnAuthorControls=!1,this.isTextTouched=!1,this.myDirection="down",this.preventBlur=!1,this.currentStateName=s.current.name,e.disableInlineEditing=null!=e.disableInlineEditing&&e.disableInlineEditing,this.scope.$stopDigestPropagation=!0,this.originalNgModel=this.scope.ngModel,e.direction&&null!=e.direction()&&(this.myDirection=e.direction());const o=!(this.scope.ngModel&&this.scope.ngModel.length);e.$emit("text-editor-empty",{textEditor:this,isEmpty:o}),e.$root.$on("bb-bbml-editor-bbml-pre-redraw",()=>{this.updateOriginalValues()}),e.$on("text-editor-set-pristine",()=>{this.isTextTouched=!1}),e.$on("text-editor-viewValue-initialized",()=>{this.truncatedViewValue=this.ctrl.$viewValue}),e.$on("text-editor-reset-to-original-value",()=>{this.isDirty()&&this.updateOriginalValues(),this.resetEditor(!1)}),e.$on(d,()=>{this.updateOriginalValues(),this.isTextTouched=!1}),e.$on("$destroy",()=>{this.isTextTouched=!1})}isEditorDirty(){return this.isTextTouched}getContentLabel(){const e=this.getPlaceholderKey();return this.truncatedViewValue||e}getPlaceholderKey(){return this.scope.placeholderAttrsValues===this.originalPlaceholderAttrValues&&null!=this.placeholderText||(this.placeholderText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.scope.placeholderKey,params:this.scope.$eval(this.scope.placeholderAttrsValues)}),this.originalPlaceholderAttrValues=this.scope.placeholderAttrsValues),this.placeholderText}get truncatedViewValue(){return this._truncatedViewValue}set truncatedViewValue(e){const t=this.element.find(".editor-element"),n=t.length?t.text():void 0;this._truncatedViewValue=c.g(n,100)}onChange(e){e&&e.keyCode===r.u||this.scope.hasFocus&&(this.isTextTouched=!0,this.scope.onchangeFunc&&this.scope.onchangeFunc({event:e}))}onKeydown(e){}isUploadProgressModalOpen(){const e=s.element(".progress-indicator-modal");return e&&e.length>0}isAddContentSelectorOpened(){return this.bbUltraState.current.name.length>this.currentStateName.length&&c.j(this.bbUltraState.current.name,this.currentStateName)}onBeforeBlur(){return!this.preventBlur&&!this.scope.disableInlineEditing}onBlur(){return this.scope.hasFocus=!1,this.ctrl.$focused=!1,this.scope.onblurFunc&&this.scope.onblurFunc(),!0}onFocus(){this.focusOnAuthorControls=!1,this.scope.readonly()||this.scope.hasFocus||(this.scope.hasFocus=!0,this.ctrl.$focused=!0,this.scope.onFocusFunc&&this.scope.onFocusFunc(),this.scope.$emit("entering-edit-state"))}isDirty(){return!(this.originalText||this.isTextTouched)}updateOriginalValues(){this.scope.ngModel===this.originalNgModel&&(this.originalText=this.scope.ngModel,this.originalPlainText=this.scope.plainText)}restoreFromOriginalValues(){this.originalText||(this.originalText="",this.originalPlainText=""),this.scope.ngModel=this.originalText,this.scope.plainText=this.originalPlainText}resetEditor(e){this.restoreFromOriginalValues()}isValidInputLength(){let e=null;if(null!=this.scope.getInputMaxLength&&(e=this.scope.getInputMaxLength()),null==e)return!0;if(e){const t=this.scope.plainText;return!!t&&t.trim().length<=e}return!0}};u=Object(i.__decorate)([Object(i.__param)(0,Object(l.b)("scope")),Object(i.__param)(1,Object(l.b)("element")),Object(i.__param)(2,Object(l.b)("ctrl")),Object(i.__param)(3,Object(l.b)(o.serviceName)),Object(i.__param)(4,Object(l.b)(a.d))],u)},tfx2:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));var i=n("D57K"),s=n("ERkP"),o=(n("FwJ5"),n("nsO7")),a=n("dCrD"),r=n("Oyr+"),c=n("0x+l"),l=n("nmzr"),d=n("aHpC"),u=n("Y+9S");const p="show-cloud-upload-progress";let h=class extends a.a{constructor(e,t,n){if(super(e,t,n),this.scope=t,this.element=n,this.uploadFile=()=>{this.saveLocationForFileUpload(),this.element.find(".file-upload").click()},this.uploadCloudFile=()=>{this.saveLocationForFileUpload(),this.scope.isButtonLocationChangable&&this.scope.$emit(p,this.positionForFiles.positionAfter),this.element.find(".doc-add-media").click(),Object(u.notifyMobileApp)(u.MessageType.CloudStorageOpened)},this.openContentMarket=()=>this.getLocationData().then(e=>{this.ultraState.goPeekState(l.ContentMarketRoutes.CONTENT_MARKET,e)}),this.initContextMenuItems(),t.$on("always-show-time-expires",()=>{this.turnOffAlwaysShow()}),t.isButtonLocationChangable&&t.$on("change-add-content-button-position",(e,t)=>{t.reopen&&!this.isMenuVisible&&this.toggleOverflowMenu()}),t.$on(r.e,(e,n,i)=>{if(i===r.c.OutlineAddContentButtonFileSelected&&n===t.fileListViewLocalId){const e=this.positionForFiles||this.getInsertLocationData();this.closeMenu(),t.$emit(r.e,e.parentId,e.positionBefore,e.positionAfter,e.depth,n,t.content,r.c.AssignDropTarget),this.assignPosition()}}),this.scope.isRenderByDefault&&this.scope.isRenderByDefault()){const e=this.scope.$watch("addContentButton.isMenuVisible",t=>{t&&(this.scope.addContentButton.removeDefaultRenderClass=!0,e())})}this.scope.$watch("parentId()",(e,t)=>{e!==t&&this.initContextMenuItems()})}toggleOverflowMenu(){this.initContextMenuItems().then(()=>{this.toggleMenu()}).catch(()=>{})}initContextMenuItems(){const e=this.element.closest("[data-base-state-name]").data("baseStateName"),t=this.getInsertLocationData();return this.$q.all({isCloudServiceAvailable:this.isCloudServiceAvailablePromise,createHref:this.ultraState.peekHref(l.ContentRoutes.CREATE_CONTENT_PEEK_PANEL,t,e),copyHref:this.ultraState.peekHref(l.ContentRoutes.COPY_CONTENT_PEEK_PANEL,t,e),contentCollectionHref:this.ultraState.peekHref(l.ContentCollectionRoutes.CONTENT_COLLECTION,t,e)}).then(e=>{const t=this.bbLocalize.getLocale(this.scope);this.items=[{key:"create",className:"js-create",href:e.createHref,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.create"}),icon:s.createElement(c.Add,null)},{key:"copy",className:"js-copy",href:e.copyHref,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.copy"}),icon:s.createElement(c.Duplicate,null)},{key:"upload-file",className:"js-upload-file",onClick:this.uploadFile,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.upload"}),icon:s.createElement(c.Upload,null)},{key:"upload-cloud-file",className:"js-upload-cloud-file",onClick:this.uploadCloudFile,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.importContentFromCloudStorage.title"}),icon:s.createElement(c.UploadCloud,null)},{key:"content-market",className:"js-content-market",onClick:this.openContentMarket,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.contentMarket"}),icon:s.createElement(c.ContentMarket,null)},{key:"content-collection",className:"js-content-collection",href:e.contentCollectionHref,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.contentCollection"}),icon:s.createElement(c.ContentCollection,null)}],this.isCloudServiceAvailable||Object(o.remove)(this.items,e=>"upload-cloud-file"===e.key),this.currentCourse.canCopy()||Object(o.remove)(this.items,e=>"copy"===e.key)})}saveLocationForFileUpload(){this.scope.isButtonLocationChangable&&(this.positionForFiles=this.getInsertLocationData())}getLocationData(){const e=this.scope.rootContent(),t=this.getInsertLocationData();return this.contentSvc.getParentFolder(t.parentId,this.contextCourse.courseId,e).$asPromise().then(e=>{if(e.children){return{position:""+e.children.getInsertionIndex(t.positionBefore,t.positionAfter,!0,e.hasMoreChildren),parentId:t.parentId,positionBefore:t.positionBefore,positionAfter:t.positionAfter,depth:t.depth}}})}};h.$inject=[],h=Object(i.__decorate)([Object(i.__param)(0,Object(d.b)("$injector")),Object(i.__param)(1,Object(d.b)("scope")),Object(i.__param)(2,Object(d.b)("element"))],h)},towz:function(e,t,n){},tqR7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("Llzl"),s=n("lEL+");const o="ultra.components.directives.clickOutside";class a{constructor(e,t,n,i,s){this.scope=e,this.element=t,this.attrs=n,this.$document=i,this.timeout=s;const o=e=>this.applyExpression(e),a=this.getContainer()||i;this.scope.$watch(this.attrs.isActive,(e,t)=>{e?this.timeout(()=>{a.on("click",o)},this.scope,0,!1):a.off("click",o)}),this.scope.$on("$destroy",()=>{a.off("click",o)})}applyExpression(e){const t=this.element.is(e.target),n=this.element.has(e.target).length>0;t||n||this.scope.$apply(this.attrs.bbClickOutside)}getContainer(){if("currentPanelOnly"in this.attrs){let e=this.element;for(;e.parent().length;)if((e=e.parent()).is(".bb-offcanvas-panel,#main-content-inner"))return e}}}a.$inject=["scope","element","attrs","$document",s.b];class r{constructor(e){this.$injector=e,this.priority=100,this.restrict="A",this.compile=(e,t)=>({pre:(e,t,n)=>this.$injector.instantiate(a,{scope:e,element:t,attrs:n})})}}r.$inject=["$injector"],i.module(o,[]).directive("bbClickOutside",["$injector",e=>e.instantiate(r)])},uAJz:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-peer-review",use:"icon-small-peer-review-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-peer-review"><path d="M6.5 10C7.8807 10 9 8.8807 9 7.5S7.8807 5 6.5 5 4 6.1193 4 7.5 5.1193 10 6.5 10zM6.5 10C3.2288 10 1 12.5 1 15M11.5 6C12.8807 6 14 4.8807 14 3.5S12.8807 1 11.5 1 9 2.1193 9 3.5 10.1193 6 11.5 6zM12 6c.7226 0 1.4451.464 2 1.0569M10 13l2 2 3-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},ufNb:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-away",use:"icon-medium-away-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-away"><path d="M23 12c0 6.0751-4.9249 11-11 11S1 18.0751 1 12 5.9249 1 12 1s11 4.9249 11 11z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 5v7l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},ujI6:function(e,t,n){"use strict";n("RB+a");var i=n("Llzl"),s=n("5iHu"),o=n("tqR7"),a=n("H8CZ"),r=n("lEL+"),c=n("+4Px"),l=n("ytQ2");n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));const d="ultra.components.directives.foundationOffcanvas",u="OFFCANVASE-TOGGLE-CLOSE",p="OFFCANVAS-TOGGLE-OPEN";class h{constructor(e,t,n,i,o,a,r){this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$parse=o,this.$q=a,this.timeout=r,this.overrideButtonClass=!1,this.isPanelOpen=!1,this.justOpenedPanel=!1,this.isFromKeyBoard=!1,this.wiredup=!1,this.position="right",this.dialogModel=!1,this.initialProperties(),r(()=>{if(this.openButtonElement=s("#"+this.attrs.bbFoundationOffcanvasOpenButton),0===this.openButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find an "Open Menu" button with an ID of '+this.attrs.bbFoundationOffcanvasOpenButton);this.openButtonElement.on("click.bbFoundationOffcanvas",()=>{this.scope.$apply(()=>{this.togglePanel()})}),this.openButtonElement.on("keydown.bbFoundationOffcanvas",e=>{e.keyCode===c.f&&(this.isFromKeyBoard=!0)})},e,0,!1)}initialProperties(){this.attrs.bbFoundationOffcanvasPosition&&(this.position=this.attrs.bbFoundationOffcanvasPosition),this.attrs.bbFoundationOffcanvasEventDelegate&&(this.scope.$on(p,()=>{this.openPanel()}),this.scope.$on(u,()=>{this.closePanel()})),this.attrs.bbFoundationOffcanvasDialogModel&&(this.dialogModel=this.attrs.bbFoundationOffcanvasDialogModel)}wireup(){return this.wiredup=!0,this.timeout(()=>{if(this.closeButtonElement=s("#"+this.attrs.bbFoundationOffcanvasCloseButton),0===this.closeButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find a "Close Menu" button with an ID of '+this.attrs.bbFoundationOffcanvasCloseButton);if(this.wrapperElement=this.element,this.offcanvasPanelElement=this.element.children().children(),1!==this.offcanvasPanelElement.length)throw new Error("bbFoundationOffcanvas directive must have exactly one child element. Fix the usage in the html template.");if(this.offcanvasPanelElement.addClass(this.position+"-off-canvas-menu"),this.attrs.bbFoundationOffcanvasOverrideButtonClass&&(this.overrideButtonClass=this.$parse(this.attrs.bbFoundationOffcanvasOverrideButtonClass)(this.scope)),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.closeButtonElement.addClass("exit-off-canvas-overlay").on("click.bbFoundationOffcanvas",()=>{this.scope.$apply(()=>{this.closePanel()})}),this.offcanvasPanelElement.find("a, button").last().on("keydown.bbFoundationOffcanvas",e=>{e.keyCode!==c.u||e.shiftKey||(e.preventDefault(),this.scope.$apply(()=>{this.closePanel()}))}),this.offcanvasPanelElement.find("a, button").first().on("keydown.bbFoundationOffcanvas",e=>{e.keyCode===c.u&&e.shiftKey&&(e.preventDefault(),this.scope.$apply(()=>{this.closePanel()}))}),this.scope.$on("foundation-offcanvas-close-panel",()=>{this.closePanel()}),null!=this.attrs.bbFoundationOffcanvasCommonParent){if(this.commonParent=s("#"+this.attrs.bbFoundationOffcanvasCommonParent),0===this.commonParent.length)throw new Error("The bbFoundationOffcanvas directive couldn't find a common parent element with an ID of "+this.attrs.bbFoundationOffcanvasCommonParent)}else this.commonParent=s(this.wrapperElement).parents().has(this.closeButtonElement).first();if(this.commonParent.hasClass("group-list")||this.commonParent.addClass("off-canvas-wrap off-canvas-overlay"),!this.overrideButtonClass){const e=this.offcanvasPanelElement.find("li").not(".ng-hide").length;this.commonParent.addClass("buttons-"+e)}a.b(this.commonParent,e=>(this.isPanelOpen&&(e.data.noTransitions||"right"===e.originalEvent.propertyName)&&(this.isFromKeyBoard?this.offcanvasPanelElement.find("a, button").first().focus():(this.offcanvasPanelElement.parent().attr("tabindex",0),this.offcanvasPanelElement.parent().focus())),!1)),this.element.foundation(),this.scope.$on("$destroy",()=>{this.element.off("click.bbFoundationOffcanvas"),this.closeButtonElement.off("click.bbFoundationOffcanvas"),this.offcanvasPanelElement.find("a, button").last().off("keydown.bbFoundationOffcanvas"),this.offcanvasPanelElement.find("a, button").first().off("keydown.bbFoundationOffcanvas"),this.commonParent.removeClass("off-canvas-wrap off-canvas-overlay")})},this.scope,0,!1)}getPosition(){switch(this.position){case"right":return"left";case"top":return"bottom";case"bottom":return"top";case"left":default:return"right"}}_openPanel(){this.offcanvasPanelElement.css("display","block"),this.justOpenedPanel=!0,this.timeout(()=>{this.offcanvasPanelElement.foundation("offcanvas","show","move-"+this.getPosition()),this.isPanelOpen=!0,this.offcanvasPanelElement.find("a, button").attr("tabindex","0"),this.justOpenedPanel=!1},this.scope,0,!1)}openPanel(){if(this.wiredup)this._openPanel();else{const e=this.$q.defer();this.scope.$watch("::foundationOffcanvas.wiredup",t=>{t&&e.resolve()}),this.$q.all([this.wireup(),e.promise]).then(()=>{this._openPanel()})}}closePanel(){this.offcanvasPanelElement.foundation("offcanvas","hide","move-"+this.getPosition()),this.isPanelOpen=!1,this.isFromKeyBoard=!1,this.offcanvasPanelElement.parent().removeAttr("tabindex"),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.openButtonElement.focus(),this.timeout(()=>{this.isPanelOpen||this.offcanvasPanelElement.css("display","none")},this.scope,300,!1)}handleClickOutside(){this.dialogModel||s("body").hasClass("modal-open")||this.justOpenedPanel||this.closePanel()}togglePanel(){this.isPanelOpen?this.closePanel():this.openPanel()}}h.$inject=["scope","element","attrs","$compile","$parse","$q",r.b];class m{constructor(e){this.$injector=e,this.transclude=!0,this.restrict="E",this.link=(e,t,n)=>{if(null==n.bbFoundationOffcanvasOpenButton||null==n.bbFoundationOffcanvasCloseButton)throw new Error('Please provide jQuery selectors for both the "Open Menu" and "Close Menu" buttons');const i=n.$observe("bbFoundationOffcanvasCloseButton",s=>{s&&(e.foundationOffcanvas=this.$injector.instantiate(h,{scope:e,element:t,attrs:n}),i())})},this.template=l}}m.$inject=["$injector"],i.module(d,[o.a,r.a]).directive("bbFoundationOffcanvas",["$injector",e=>e.instantiate(m)])},unHm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("oK+F");var i=n("Llzl"),s=n("Fvsw"),o=n("r6lH"),a=n("vyq4");const r="ultra.directives.telemetry.link";class c{constructor(e,t,n){this.scope=e,this.context=t,this.telemetry=n,this.courseId=e.courseId,this.contextType=e.contextType,t.getSystemInfo().$asPromise().then(e=>{e.telemetryEnabled&&this.telemetry.determinePanelSref(this.courseId).then(e=>{this.telemetryPanelSref=e,this.showLink=!0})})}analyticsContext(){return{contextType:this.contextType,courseId:this.courseId}}}c.$inject=["scope",s.b,o.b];class l{constructor(e){this.$injector=e,this.restrict="E",this.template=a,this.scope={courseId:"=",contextType:"="},this.link=e=>{e.telemetryLink=this.$injector.instantiate(c,{scope:e})}}}l.$inject=["$injector"],i.module(r,[s.a,o.a]).directive("bbTelemetryLink",["$injector",e=>e.instantiate(l)])},vcLy:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-started",use:"icon-small-started-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-started"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 8H4s0 4 4 4 4-4 4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10.8247 9a3.594 3.594 0 01-.2191.5528c-.1907.3814-.461.7323-.8478.9901C9.3773 10.7966 8.825 11 8 11c-.825 0-1.3773-.2034-1.7578-.4571-.3868-.2578-.657-.6087-.8478-.9901A3.5857 3.5857 0 015.1754 9h5.6493z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},vyq4:function(e,t){e.exports='<span class="grade-progress-chart-btn" ng-if="::telemetryLink.showLink">\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <a class="grade-progress-chart-link"\n     bb-translate-attrs="{\'aria-label\':\'components.directives.grade.display-grade.openCourseProgress\', \'title\': \'components.directives.grade.display-grade.courseProgress\'}"\n     bb-peek-sref="{{telemetryLink.telemetryPanelSref}}"\n     analytics-id="grades.telemetry"\n     analytics-context="{{telemetryLink.analyticsContext()}}">\n    <bb-svg-icon icon="beast-analytics" size="medium"></bb-svg-icon>\n  </a>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</span>\n'},wKTs:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-upload",use:"icon-small-upload-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload"><path d="M14 5h1v9H1V5h1M6 4l2-2 2 2M8 10V2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},wy9x:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("Llzl"),s=n("Jwnl"),o=n("Y+9S");const a="ultra.components.directives.content.contentItem.contentItemType.contentItemFolder";class r{constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n}toggleFolder(){if(!this.scope.content.ui.isOpen){const e={type:o.MessageType.FolderOpened,status:o.MessageStatus.Success,contentId:this.scope.content.id};Object(o.sendMessageToMobile)(e)}this.scope.$emit("toggle-folder",this.scope.content)}shouldAlignMiddle(){const e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))}}r.$inject=["scope","element","attrs"];class c{constructor(e){this.$injector=e,this.restrict="E",this.template=s,this.scope=!1,this.link=(e,t,n)=>{e.contentItemFolder=this.$injector.instantiate(r,{scope:e,element:t,attrs:n})}}}c.$inject=["$injector"],i.module(a,[]).directive("bbContentItemFolder",["$injector",e=>e.instantiate(c)])},xAaQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("Llzl"),s=n("wy9x"),o=n("jhBu"),a=n("Sa5G"),r=n("TnpK"),c=n("sB2Z"),l=n("nmzr");const d="ultra.components.directives.content.contentItem.contentItemEngagementOutline";class u{constructor(e,t,n){this.scope=e,this.entitlementService=t,this.ultraState=n,this.entitlementService.hasCourseEntitlement(a.e.ModifyContent,this.scope.content.courseId).then(e=>{this.entitledToModifyContent=e})}get canOpenConditionalRelease(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)}openConditionalRelease(){this.isCourseCompletedAndInInstructorView()||this.ultraState.goPeekState(l.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,{contentId:this.scope.content.id})}isCourseCompletedAndInInstructorView(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()}isDiscussionCreatedByStudent(){var e;let t=!1;const n=null===(e=this.scope.content.contentDetail)||void 0===e?void 0:e["resource/x-bb-forumlink"];return n&&(t=n.isDiscussionCreatedByStudent),!!t}}u.$inject=["scope",o.b,r.d];class p{constructor(e){this.$injector=e,this.restrict="E",this.template=c,this.scope=!1,this.link=e=>{e.contentItemEngagementOutline=this.$injector.instantiate(u,{scope:e})}}}p.$inject=["$injector"],i.module(d,[s.a,r.b]).directive("bbContentItemEngagementOutline",["$injector",e=>e.instantiate(p)])},yV5t:function(e,t){e.exports='<a class="content-title"\n   ng-click="contentItemScormLaunch.scormLaunch()"\n   href="javascript:void(0);"\n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n   analytics-id="content.item.scormlaunch.link"\n   aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n   tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n  <span>{{ content.title }}</span>\n</a>\n'},yiTm:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-groups",use:"icon-medium-groups-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-groups"><g clip-path="url(#icon-medium-groups_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 23.0644C17.3246 21.1155 14.8704 20 12 20s-5.3246 1.1155-7 3.0644M12 20c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8z" /><path d="M23 11s-1-3-4.5-3c-2.1456 0-3.3517 1.1274-3.9639 2M5.5 8C3.567 8 2 6.433 2 4.5S3.567 1 5.5 1 9 2.567 9 4.5 7.433 8 5.5 8zM1 11s1-3 4.5-3c2.1456 0 3.3517 1.1274 3.9639 2" /></g><defs><clipPath id="icon-medium-groups_clip0"><path d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(o);e.exports=o},ytQ2:function(e,t){e.exports='<div ng-if="::foundationOffcanvas.wiredup || undefined"\n      class="bb-foundation-offcanvas"\n      ng-transclude\n      bb-click-outside="foundationOffcanvas.handleClickOutside()"\n      is-active="foundationOffcanvas.isPanelOpen"\n      aria-hidden="{{!foundationOffcanvas.isPanelOpen}}"\n      current-panel-only>\n</div>'},"z+6U":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("Llzl"),s=n("sa5q");const o="ultra.components.directives.content.contentItem.contentItemType.contentItemPage";class a{constructor(e){this.scope=e}shouldAlignMiddle(){return!this.scope.content.canViewAsInstructor()}}a.$inject=["scope"];class r{constructor(e){this.$injector=e,this.restrict="E",this.template=s,this.scope=!1,this.link=(e,t,n)=>{e.contentItemPage=this.$injector.instantiate(a,{scope:e,element:t,attrs:n})}}}r.$inject=["$injector"],i.module(o,[]).directive("bbContentItemPage",["$injector",e=>e.instantiate(r)])},zByx:function(e,t,n){"use strict";n("ufNb"),n("82Nl");var i=n("Llzl"),s=n("0JpG"),o=n("pjml"),a=n("7pcG"),r=n("Fvsw"),c=n("zGdY");const l="ultra.components.services.calendar.schedule";class d{constructor(e,t,n){this.localize=e,this.calendar=t,this.context=n}getWeeklyRepeatLabel(e,t,n="medium",i){if(c.CalendarRecurFrequency.Weekly!==e.recurRules.freq)return"";let a;switch(n.trim().toLowerCase()){case"short":a=s.ILocaleDateFormat.ShortWeekday;break;case"medium":a=s.ILocaleDateFormat.MediumWeekday;break;case"long":a=s.ILocaleDateFormat.LongWeekday;break;default:a=s.ILocaleDateFormat.MediumWeekday}return e.recurRules.byWeekDay.map(e=>o.g.RecurWeekDay.parse(e)).filter(e=>!!e).sort((e,t)=>e.dayOfWeek-t.dayOfWeek).map(e=>this.localize.formatDateSync(this.calendar.getSampleDateForDayOfWeek(e.dayOfWeek),a)).join(this.localize.translateSync({locale:i,key:t,options:{noWrap:!0}}))}getNextMonthlyEventDate(e,t){return this.updateDate(e,t,this.calendar.getNextEventForMonthlyRepeat(e.recurRules,this.context.getServerTime()))}getNextDailyEventDate(e,t){return this.updateDate(e,t,this.calendar.getNextEventForDailyRepeat(e.recurRules,this.context.getServerTime()))}updateDate(e,t,n){let i=t[e.itemSourceId];return i&&i.getTime()===n.getTime()||(t[e.itemSourceId]=n,i=n),i}}d.$inject=[s.serviceName,a.b,r.b];class u extends d{}angular.module(l,[a.a,r.a,s.moduleName]).service("bbSchedule",d);var p=n("4qUd");n.d(t,"a",(function(){return h}));const h="ultra.components.directives.calendar.scheduleOutline";class m{constructor(e,t,n){this.scope=e,this.scheduleService=t,this.localize=n,this.nextEventDates=Object.create(null),this.showMore=!1}getSchedules(){let e=this.scope.scheduleOutlineCollection();return this.orderScheduleByRecentDate(e),e.length>2?(this.showMore=!0,e=this.scope.scheduleOutlineCollection().slice(0,2),this.orderScheduleByRecentDate(e)):this.showMore=!1,e}orderScheduleByRecentDate(e){return e.sort((e,t)=>{const n=this.getNextDateToSort(e),i=this.getNextDateToSort(t);let s=0;return n<i?s=-1:n>i&&(s=1),s})}getNextDateToSort(e){switch(e.recurRules.freq){case"DAILY":return this.getNextDailyEventDate(e);case"MONTHLY":return this.getNextEventDate(e);default:return e.startDate}}getWeeklyRepeatLabel(e){return this.scheduleService.getWeeklyRepeatLabel(e,"scheduleOutline.weekdayDelimiter",this.scope.weekDayFormat,this.localize.getLocale(this.scope))}getNextEventDate(e){return this.scheduleService.getNextMonthlyEventDate(e,this.nextEventDates)}getNextDailyEventDate(e){return this.scheduleService.getNextDailyEventDate(e,this.nextEventDates)}areAnyLocationsSet(){return this.scope.scheduleOutlineCollection().some(e=>!!e.location)}}m.$inject=["scope","bbSchedule",s.serviceName];class b{constructor(e){this.$injector=e,this.restrict="E",this.template=p,this.scope={scheduleOutlineCollection:"&",weekDayFormat:"@?"},this.link=e=>{e.scheduleOutline=this.$injector.instantiate(m,{scope:e}),e.TRUNCATION_LOCATION_COURSE_CARD=20,e.TRUNCATION_LOCATION_OUTLINE=35}}}b.$inject=["$injector"],i.module(h,[l]).directive("bbScheduleOutline",["$injector",e=>e.instantiate(b)])},zEHu:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("Llzl"),s=n("jhBu");const o="ultra.components.directives.courseEntitlement";class a{constructor(e,t){this.$entitlementService=e,this.ngIfDirective=t,this.scope={bbCourseEntitlement:"@",courseId:"@",entitlementAction:"@",showContents:"@"},this.restrict=this.ngIfDirective[0].restrict,this.priority=this.ngIfDirective[0].priority,this.transclude=this.ngIfDirective[0].transclude,this.terminal=this.ngIfDirective[0].terminal,this.link=(e,t,n,i,s)=>{n.ngIf="::showContents",this.ngIfDirective[0].compile(t,n,void 0)(e,t,n,i,s);let o,a=!0;if(e.entitlementAction&&"hide"===e.entitlementAction.toLowerCase()&&(a=!1),!e.bbCourseEntitlement)throw e.showContents=!1,new Error("No entitlementUid has been provided");o=e.bbCourseEntitlement;const r=e.$parent.$watch(e.courseId,t=>{t&&(this.$entitlementService.hasCourseEntitlement(o,t).then(t=>{e.showContents=a===t},t=>{e.showContents=!1}),r())})}}}a.$inject=[s.b,"ngIfDirective","$parse"],i.module(o,[s.a]).directive("bbCourseEntitlement",["$injector",e=>e.instantiate(a)])},zdqs:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("nsO7"),s=n("VdDF"),o=n("pjml"),a=n("zGdY");class r{constructor(e){this.termUtil=e,this.membershipTermMapper=new c(this.termUtil)}getMembershipMapper(){return this.membershipTermMapper}map(e,t){return e.map(e=>({membership:e,term:this.membershipTermMapper.adjustTerm(e,t)}))}}class c{constructor(e){this.termUtil=e}adjustTerm(e,t){const n=this.getCourseDateRange(e);return n.start>t?e.course.ui.term=this.termUtil.upcomingTerm:s.a.isWithinDateRange(t,n)?e.course.ui.term=this.termUtil.currentTerm:e.course.term?e.course.ui.term=e.course.term:e.course.ui.term=this.getTermMappingBasedOnCourseDates(e,n,t),e.course.ui.term}getCourseDateRange(e){let t,n;if(a.CourseDuration.DateRange===e.course.durationType)t=e.course.startDate,n=e.course.endDate;else if(a.CourseDuration.FixedNumDays===e.course.durationType)t=e.enrollmentDate,(n=new Date(e.enrollmentDate.getTime())).setDate(n.getDate()+e.course.numDaysOfUse);else if(a.CourseDuration.UseTerm===e.course.durationType){const i=e.course.term?this.termUtil.getTerm(e.course.term.id):null;i&&(o.Gb.TermDuration.DateRange.isEqualTo(i.durationType)?(t=i.startDate,n=i.endDate):o.Gb.TermDuration.FixedNumDays.isEqualTo(i.durationType)&&(t=e.enrollmentDate,(n=new Date(e.enrollmentDate.getTime())).setDate(n.getDate()+i.daysOfUse)))}return{end:n,start:t}}getTermMappingBasedOnCourseDates(e,t,n){let s=t.start||e.course.term&&e.course.term.startDate;if(!s){if(!(t.end&&n>t.end))return this.termUtil.currentTerm;s=t.end}const o=this.termUtil.filterTerm(s);if(0===o.length)return this.termUtil.createYearTerm(s);if(1===o.length)return o[0];if(o.length>1){const e=i.sortBy(o,["startDate","id"]);return e[e.length-1]}}}},zphb:function(e,t){e.exports='<div class="simple-statistic-contents" ng-class="::item().cssClass">\n  <div bb-tooltip enhanced-tooltip="true" data-tooltip-on-overflow-only="true" title="{{ ::item().data }}">\n    <div class="stat-data"\n         ng-attr-aria-label="{{ item().aria ? item().aria : undefined }}"\n         data-ng-bind-html="::item().trusted"\n         data-ellipsis></div>\n  </div>\n  <div ng-if="::item().subtext" class="stat-sub-text" bb-translate>{{ ::item().subtext }}</div>\n  <div ng-if="::!item().subtext && item().reserveSubtextSpace" class="stat-sub-text" aria-hidden="true">&nbsp;</div>\n</div>'}}]);